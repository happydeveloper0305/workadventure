"use strict";var ia=Object.defineProperty;var oa=(r,t,e)=>t in r?ia(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var u=(r,t,e)=>(oa(r,typeof t!="symbol"?t+"":t,e),e);var M;(function(r){r.assertEqual=i=>i;function t(i){}r.assertIs=t;function e(i){throw new Error}r.assertNever=e,r.arrayToEnum=i=>{const o={};for(const s of i)o[s]=s;return o},r.getValidEnumValues=i=>{const o=r.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(const l of o)s[l]=i[l];return r.objectValues(s)},r.objectValues=i=>r.objectKeys(i).map(function(o){return i[o]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const o=[];for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},r.find=(i,o)=>{for(const s of i)if(o(s))return s},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function a(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}r.joinValues=a,r.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(M||(M={}));const h=M.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),H=r=>{switch(typeof r){case"undefined":return h.undefined;case"string":return h.string;case"number":return isNaN(r)?h.nan:h.number;case"boolean":return h.boolean;case"function":return h.function;case"bigint":return h.bigint;case"object":return Array.isArray(r)?h.array:r===null?h.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?h.promise:typeof Map<"u"&&r instanceof Map?h.map:typeof Set<"u"&&r instanceof Set?h.set:typeof Date<"u"&&r instanceof Date?h.date:h.object;default:return h.unknown}},p=M.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),Qr=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class Y extends Error{constructor(t){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const e=t||function(o){return o.message},a={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)a._errors.push(e(s));else{let l=a,c=0;for(;c<s.path.length;){const d=s.path[c];c===s.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(e(s))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),a}toString(){return this.message}get message(){return JSON.stringify(this.issues,M.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){const e={},a=[];for(const i of this.issues)i.path.length>0?(e[i.path[0]]=e[i.path[0]]||[],e[i.path[0]].push(t(i))):a.push(t(i));return{formErrors:a,fieldErrors:e}}get formErrors(){return this.flatten()}}Y.create=r=>new Y(r);const ve=(r,t)=>{let e;switch(r.code){case p.invalid_type:r.received===h.undefined?e="Required":e=`Expected ${r.expected}, received ${r.received}`;break;case p.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(r.expected,M.jsonStringifyReplacer)}`;break;case p.unrecognized_keys:e=`Unrecognized key(s) in object: ${M.joinValues(r.keys,", ")}`;break;case p.invalid_union:e="Invalid input";break;case p.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${M.joinValues(r.options)}`;break;case p.invalid_enum_value:e=`Invalid enum value. Expected ${M.joinValues(r.options)}, received '${r.received}'`;break;case p.invalid_arguments:e="Invalid function arguments";break;case p.invalid_return_type:e="Invalid function return type";break;case p.invalid_date:e="Invalid date";break;case p.invalid_string:typeof r.validation=="object"?"startsWith"in r.validation?e=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?e=`Invalid input: must end with "${r.validation.endsWith}"`:M.assertNever(r.validation):r.validation!=="regex"?e=`Invalid ${r.validation}`:e="Invalid";break;case p.too_small:r.type==="array"?e=`Array must contain ${r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?e=`String must contain ${r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?e=`Number must be greater than ${r.inclusive?"or equal to ":""}${r.minimum}`:r.type==="date"?e=`Date must be greater than ${r.inclusive?"or equal to ":""}${new Date(r.minimum)}`:e="Invalid input";break;case p.too_big:r.type==="array"?e=`Array must contain ${r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?e=`String must contain ${r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?e=`Number must be less than ${r.inclusive?"or equal to ":""}${r.maximum}`:r.type==="date"?e=`Date must be smaller than ${r.inclusive?"or equal to ":""}${new Date(r.maximum)}`:e="Invalid input";break;case p.custom:e="Invalid input";break;case p.invalid_intersection_types:e="Intersection results could not be merged";break;case p.not_multiple_of:e=`Number must be a multiple of ${r.multipleOf}`;break;default:e=t.defaultError,M.assertNever(r)}return{message:e}};let en=ve;function tn(r){en=r}function Oe(){return en}const We=r=>{const{data:t,path:e,errorMaps:a,issueData:i}=r,o=[...e,...i.path||[]],s={...i,path:o};let l="";const c=a.filter(d=>!!d).slice().reverse();for(const d of c)l=d(s,{data:t,defaultError:l}).message;return{...i,path:o,message:i.message||l}},rn=[];function m(r,t){const e=We({issueData:t,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Oe(),ve].filter(a=>!!a)});r.common.issues.push(e)}class O{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){const a=[];for(const i of e){if(i.status==="aborted")return b;i.status==="dirty"&&t.dirty(),a.push(i.value)}return{status:t.value,value:a}}static async mergeObjectAsync(t,e){const a=[];for(const i of e)a.push({key:await i.key,value:await i.value});return O.mergeObjectSync(t,a)}static mergeObjectSync(t,e){const a={};for(const i of e){const{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return b;o.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),(typeof s.value<"u"||i.alwaysSet)&&(a[o.value]=s.value)}return{status:t.value,value:a}}}const b=Object.freeze({status:"aborted"}),nn=r=>({status:"dirty",value:r}),W=r=>({status:"valid",value:r}),_t=r=>r.status==="aborted",wt=r=>r.status==="dirty",Ze=r=>r.status==="valid",Tt=r=>typeof Promise!==void 0&&r instanceof Promise;var T;(function(r){r.errToObj=t=>typeof t=="string"?{message:t}:t||{},r.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(T||(T={}));class G{constructor(t,e,a,i){this.parent=t,this.data=e,this._path=a,this._key=i}get path(){return this._path.concat(this._key)}}const gr=(r,t)=>{if(Ze(t))return{success:!0,data:t.value};{if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");const e=new Y(r.common.issues);return{success:!1,error:e}}};function w(r){if(!r)return{};const{errorMap:t,invalid_type_error:e,required_error:a,description:i}=r;if(t&&(e||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(s,l)=>s.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:a!=null?a:l.defaultError}:{message:e!=null?e:l.defaultError},description:i}}class _{constructor(t){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return H(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:H(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new O,ctx:{common:t.parent.common,data:t.data,parsedType:H(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(Tt(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const a=this.safeParse(t,e);if(a.success)return a.data;throw a.error}safeParse(t,e){var a;const i={common:{issues:[],async:(a=e==null?void 0:e.async)!==null&&a!==void 0?a:!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:H(t)},o=this._parseSync({data:t,path:i.path,parent:i});return gr(i,o)}async parseAsync(t,e){const a=await this.safeParseAsync(t,e);if(a.success)return a.data;throw a.error}async safeParseAsync(t,e){const a={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:H(t)},i=this._parse({data:t,path:[],parent:a}),o=await(Tt(i)?i:Promise.resolve(i));return gr(a,o)}refine(t,e){const a=i=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(i):e;return this._refinement((i,o)=>{const s=t(i),l=()=>o.addIssue({code:p.custom,...a(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(c=>c?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(t,e){return this._refinement((a,i)=>t(a)?!0:(i.addIssue(typeof e=="function"?e(a,i):e),!1))}_refinement(t){return new V({schema:this,typeName:f.ZodEffects,effect:{type:"refinement",refinement:t}})}optional(){return q.create(this)}nullable(){return ae.create(this)}nullish(){return this.optional().nullable()}array(){return B.create(this)}promise(){return ue.create(this)}or(t){return ge.create([this,t])}and(t){return _e.create(this,t)}transform(t){return new V({schema:this,typeName:f.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new jt({innerType:this,defaultValue:e,typeName:f.ZodDefault})}brand(){return new cr({typeName:f.ZodBranded,type:this,...w(void 0)})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sa=/^c[^\s-]{8,}$/i,la=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,ca=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class X extends _{constructor(){super(...arguments),this._regex=(t,e,a)=>this.refinement(i=>t.test(i),{validation:e,code:p.invalid_string,...T.errToObj(a)}),this.nonempty=t=>this.min(1,T.errToObj(t)),this.trim=()=>new X({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(t){if(this._getType(t)!==h.string){const o=this._getOrReturnCtx(t);return m(o,{code:p.invalid_type,expected:h.string,received:o.parsedType}),b}const a=new O;let i;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(i=this._getOrReturnCtx(t,i),m(i,{code:p.too_small,minimum:o.value,type:"string",inclusive:!0,message:o.message}),a.dirty());else if(o.kind==="max")t.data.length>o.value&&(i=this._getOrReturnCtx(t,i),m(i,{code:p.too_big,maximum:o.value,type:"string",inclusive:!0,message:o.message}),a.dirty());else if(o.kind==="email")ca.test(t.data)||(i=this._getOrReturnCtx(t,i),m(i,{validation:"email",code:p.invalid_string,message:o.message}),a.dirty());else if(o.kind==="uuid")la.test(t.data)||(i=this._getOrReturnCtx(t,i),m(i,{validation:"uuid",code:p.invalid_string,message:o.message}),a.dirty());else if(o.kind==="cuid")sa.test(t.data)||(i=this._getOrReturnCtx(t,i),m(i,{validation:"cuid",code:p.invalid_string,message:o.message}),a.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),m(i,{validation:"url",code:p.invalid_string,message:o.message}),a.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),m(i,{validation:"regex",code:p.invalid_string,message:o.message}),a.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="startsWith"?t.data.startsWith(o.value)||(i=this._getOrReturnCtx(t,i),m(i,{code:p.invalid_string,validation:{startsWith:o.value},message:o.message}),a.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(i=this._getOrReturnCtx(t,i),m(i,{code:p.invalid_string,validation:{endsWith:o.value},message:o.message}),a.dirty()):M.assertNever(o);return{status:a.value,value:t.data}}_addCheck(t){return new X({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...T.errToObj(t)})}url(t){return this._addCheck({kind:"url",...T.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...T.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...T.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...T.errToObj(e)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...T.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...T.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...T.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...T.errToObj(e)})}length(t,e){return this.min(t,e).max(t,e)}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get minLength(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}X.create=r=>new X({checks:[],typeName:f.ZodString,...w(r)});function ua(r,t){const e=(r.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,i=e>a?e:a,o=parseInt(r.toFixed(i).replace(".","")),s=parseInt(t.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}class re extends _{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._getType(t)!==h.number){const o=this._getOrReturnCtx(t);return m(o,{code:p.invalid_type,expected:h.number,received:o.parsedType}),b}let a;const i=new O;for(const o of this._def.checks)o.kind==="int"?M.isInteger(t.data)||(a=this._getOrReturnCtx(t,a),m(a,{code:p.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(a=this._getOrReturnCtx(t,a),m(a,{code:p.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(a=this._getOrReturnCtx(t,a),m(a,{code:p.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?ua(t.data,o.value)!==0&&(a=this._getOrReturnCtx(t,a),m(a,{code:p.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):M.assertNever(o);return{status:i.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,T.toString(e))}gt(t,e){return this.setLimit("min",t,!1,T.toString(e))}lte(t,e){return this.setLimit("max",t,!0,T.toString(e))}lt(t,e){return this.setLimit("max",t,!1,T.toString(e))}setLimit(t,e,a,i){return new re({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:a,message:T.toString(i)}]})}_addCheck(t){return new re({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:T.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:T.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:T.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:T.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:T.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:T.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int")}}re.create=r=>new re({checks:[],typeName:f.ZodNumber,...w(r)});class Re extends _{_parse(t){if(this._getType(t)!==h.bigint){const a=this._getOrReturnCtx(t);return m(a,{code:p.invalid_type,expected:h.bigint,received:a.parsedType}),b}return W(t.data)}}Re.create=r=>new Re({typeName:f.ZodBigInt,...w(r)});class Le extends _{_parse(t){if(this._getType(t)!==h.boolean){const a=this._getOrReturnCtx(t);return m(a,{code:p.invalid_type,expected:h.boolean,received:a.parsedType}),b}return W(t.data)}}Le.create=r=>new Le({typeName:f.ZodBoolean,...w(r)});class le extends _{_parse(t){if(this._getType(t)!==h.date){const o=this._getOrReturnCtx(t);return m(o,{code:p.invalid_type,expected:h.date,received:o.parsedType}),b}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return m(o,{code:p.invalid_date}),b}const a=new O;let i;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(i=this._getOrReturnCtx(t,i),m(i,{code:p.too_small,message:o.message,inclusive:!0,minimum:o.value,type:"date"}),a.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(i=this._getOrReturnCtx(t,i),m(i,{code:p.too_big,message:o.message,inclusive:!0,maximum:o.value,type:"date"}),a.dirty()):M.assertNever(o);return{status:a.value,value:new Date(t.data.getTime())}}_addCheck(t){return new le({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:T.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:T.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}}le.create=r=>new le({checks:[],typeName:f.ZodDate,...w(r)});class Ne extends _{_parse(t){if(this._getType(t)!==h.undefined){const a=this._getOrReturnCtx(t);return m(a,{code:p.invalid_type,expected:h.undefined,received:a.parsedType}),b}return W(t.data)}}Ne.create=r=>new Ne({typeName:f.ZodUndefined,...w(r)});class Ue extends _{_parse(t){if(this._getType(t)!==h.null){const a=this._getOrReturnCtx(t);return m(a,{code:p.invalid_type,expected:h.null,received:a.parsedType}),b}return W(t.data)}}Ue.create=r=>new Ue({typeName:f.ZodNull,...w(r)});class ce extends _{constructor(){super(...arguments),this._any=!0}_parse(t){return W(t.data)}}ce.create=r=>new ce({typeName:f.ZodAny,...w(r)});class te extends _{constructor(){super(...arguments),this._unknown=!0}_parse(t){return W(t.data)}}te.create=r=>new te({typeName:f.ZodUnknown,...w(r)});class K extends _{_parse(t){const e=this._getOrReturnCtx(t);return m(e,{code:p.invalid_type,expected:h.never,received:e.parsedType}),b}}K.create=r=>new K({typeName:f.ZodNever,...w(r)});class Ve extends _{_parse(t){if(this._getType(t)!==h.undefined){const a=this._getOrReturnCtx(t);return m(a,{code:p.invalid_type,expected:h.void,received:a.parsedType}),b}return W(t.data)}}Ve.create=r=>new Ve({typeName:f.ZodVoid,...w(r)});class B extends _{_parse(t){const{ctx:e,status:a}=this._processInputParams(t),i=this._def;if(e.parsedType!==h.array)return m(e,{code:p.invalid_type,expected:h.array,received:e.parsedType}),b;if(i.minLength!==null&&e.data.length<i.minLength.value&&(m(e,{code:p.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,message:i.minLength.message}),a.dirty()),i.maxLength!==null&&e.data.length>i.maxLength.value&&(m(e,{code:p.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,message:i.maxLength.message}),a.dirty()),e.common.async)return Promise.all(e.data.map((s,l)=>i.type._parseAsync(new G(e,s,e.path,l)))).then(s=>O.mergeArray(a,s));const o=e.data.map((s,l)=>i.type._parseSync(new G(e,s,e.path,l)));return O.mergeArray(a,o)}get element(){return this._def.type}min(t,e){return new B({...this._def,minLength:{value:t,message:T.toString(e)}})}max(t,e){return new B({...this._def,maxLength:{value:t,message:T.toString(e)}})}length(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}B.create=(r,t)=>new B({type:r,minLength:null,maxLength:null,typeName:f.ZodArray,...w(t)});var $e;(function(r){r.mergeShapes=(t,e)=>({...t,...e})})($e||($e={}));const _r=r=>t=>new z({...r,shape:()=>({...r.shape(),...t})});function fe(r){if(r instanceof z){const t={};for(const e in r.shape){const a=r.shape[e];t[e]=q.create(fe(a))}return new z({...r._def,shape:()=>t})}else return r instanceof B?B.create(fe(r.element)):r instanceof q?q.create(fe(r.unwrap())):r instanceof ae?ae.create(fe(r.unwrap())):r instanceof D?D.create(r.items.map(t=>fe(t))):r}class z extends _{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=_r(this._def),this.extend=_r(this._def)}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),e=M.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==h.object){const d=this._getOrReturnCtx(t);return m(d,{code:p.invalid_type,expected:h.object,received:d.parsedType}),b}const{status:a,ctx:i}=this._processInputParams(t),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof K&&this._def.unknownKeys==="strip"))for(const d in i.data)s.includes(d)||l.push(d);const c=[];for(const d of s){const v=o[d],J=i.data[d];c.push({key:{status:"valid",value:d},value:v._parse(new G(i,J,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof K){const d=this._def.unknownKeys;if(d==="passthrough")for(const v of l)c.push({key:{status:"valid",value:v},value:{status:"valid",value:i.data[v]}});else if(d==="strict")l.length>0&&(m(i,{code:p.unrecognized_keys,keys:l}),a.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const v of l){const J=i.data[v];c.push({key:{status:"valid",value:v},value:d._parse(new G(i,J,i.path,v)),alwaysSet:v in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const v of c){const J=await v.key;d.push({key:J,value:await v.value,alwaysSet:v.alwaysSet})}return d}).then(d=>O.mergeObjectSync(a,d)):O.mergeObjectSync(a,c)}get shape(){return this._def.shape()}strict(t){return T.errToObj,new z({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,a)=>{var i,o,s,l;const c=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,e,a).message)!==null&&s!==void 0?s:a.defaultError;return e.code==="unrecognized_keys"?{message:(l=T.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new z({...this._def,unknownKeys:"strip"})}passthrough(){return new z({...this._def,unknownKeys:"passthrough"})}setKey(t,e){return this.augment({[t]:e})}merge(t){return new z({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>$e.mergeShapes(this._def.shape(),t._def.shape()),typeName:f.ZodObject})}catchall(t){return new z({...this._def,catchall:t})}pick(t){const e={};return M.objectKeys(t).map(a=>{this.shape[a]&&(e[a]=this.shape[a])}),new z({...this._def,shape:()=>e})}omit(t){const e={};return M.objectKeys(this.shape).map(a=>{M.objectKeys(t).indexOf(a)===-1&&(e[a]=this.shape[a])}),new z({...this._def,shape:()=>e})}deepPartial(){return fe(this)}partial(t){const e={};if(t)return M.objectKeys(this.shape).map(a=>{M.objectKeys(t).indexOf(a)===-1?e[a]=this.shape[a]:e[a]=this.shape[a].optional()}),new z({...this._def,shape:()=>e});for(const a in this.shape){const i=this.shape[a];e[a]=i.optional()}return new z({...this._def,shape:()=>e})}required(){const t={};for(const e in this.shape){let i=this.shape[e];for(;i instanceof q;)i=i._def.innerType;t[e]=i}return new z({...this._def,shape:()=>t})}keyof(){return an(M.objectKeys(this.shape))}}z.create=(r,t)=>new z({shape:()=>r,unknownKeys:"strip",catchall:K.create(),typeName:f.ZodObject,...w(t)});z.strictCreate=(r,t)=>new z({shape:()=>r,unknownKeys:"strict",catchall:K.create(),typeName:f.ZodObject,...w(t)});z.lazycreate=(r,t)=>new z({shape:r,unknownKeys:"strip",catchall:K.create(),typeName:f.ZodObject,...w(t)});class ge extends _{_parse(t){const{ctx:e}=this._processInputParams(t),a=this._def.options;function i(o){for(const l of o)if(l.result.status==="valid")return l.result;for(const l of o)if(l.result.status==="dirty")return e.common.issues.push(...l.ctx.common.issues),l.result;const s=o.map(l=>new Y(l.ctx.common.issues));return m(e,{code:p.invalid_union,unionErrors:s}),b}if(e.common.async)return Promise.all(a.map(async o=>{const s={...e,common:{...e.common,issues:[]},parent:null};return{result:await o._parseAsync({data:e.data,path:e.path,parent:s}),ctx:s}})).then(i);{let o;const s=[];for(const c of a){const d={...e,common:{...e.common,issues:[]},parent:null},v=c._parseSync({data:e.data,path:e.path,parent:d});if(v.status==="valid")return v;v.status==="dirty"&&!o&&(o={result:v,ctx:d}),d.common.issues.length&&s.push(d.common.issues)}if(o)return e.common.issues.push(...o.ctx.common.issues),o.result;const l=s.map(c=>new Y(c));return m(e,{code:p.invalid_union,unionErrors:l}),b}}get options(){return this._def.options}}ge.create=(r,t)=>new ge({options:r,typeName:f.ZodUnion,...w(t)});class Ke extends _{_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==h.object)return m(e,{code:p.invalid_type,expected:h.object,received:e.parsedType}),b;const a=this.discriminator,i=e.data[a],o=this.options.get(i);return o?e.common.async?o._parseAsync({data:e.data,path:e.path,parent:e}):o._parseSync({data:e.data,path:e.path,parent:e}):(m(e,{code:p.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[a]}),b)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(t,e,a){const i=new Map;try{e.forEach(o=>{const s=o.shape[t].value;i.set(s,o)})}catch{throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(i.size!==e.length)throw new Error("Some of the discriminator values are not unique");return new Ke({typeName:f.ZodDiscriminatedUnion,discriminator:t,options:i,...w(a)})}}function Ht(r,t){const e=H(r),a=H(t);if(r===t)return{valid:!0,data:r};if(e===h.object&&a===h.object){const i=M.objectKeys(t),o=M.objectKeys(r).filter(l=>i.indexOf(l)!==-1),s={...r,...t};for(const l of o){const c=Ht(r[l],t[l]);if(!c.valid)return{valid:!1};s[l]=c.data}return{valid:!0,data:s}}else if(e===h.array&&a===h.array){if(r.length!==t.length)return{valid:!1};const i=[];for(let o=0;o<r.length;o++){const s=r[o],l=t[o],c=Ht(s,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return e===h.date&&a===h.date&&+r==+t?{valid:!0,data:r}:{valid:!1}}class _e extends _{_parse(t){const{status:e,ctx:a}=this._processInputParams(t),i=(o,s)=>{if(_t(o)||_t(s))return b;const l=Ht(o.value,s.value);return l.valid?((wt(o)||wt(s))&&e.dirty(),{status:e.value,value:l.data}):(m(a,{code:p.invalid_intersection_types}),b)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}_e.create=(r,t,e)=>new _e({left:r,right:t,typeName:f.ZodIntersection,...w(e)});class D extends _{_parse(t){const{status:e,ctx:a}=this._processInputParams(t);if(a.parsedType!==h.array)return m(a,{code:p.invalid_type,expected:h.array,received:a.parsedType}),b;if(a.data.length<this._def.items.length)return m(a,{code:p.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),b;!this._def.rest&&a.data.length>this._def.items.length&&(m(a,{code:p.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),e.dirty());const o=a.data.map((s,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new G(a,s,a.path,l)):null}).filter(s=>!!s);return a.common.async?Promise.all(o).then(s=>O.mergeArray(e,s)):O.mergeArray(e,o)}get items(){return this._def.items}rest(t){return new D({...this._def,rest:t})}}D.create=(r,t)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new D({items:r,typeName:f.ZodTuple,rest:null,...w(t)})};class we extends _{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:a}=this._processInputParams(t);if(a.parsedType!==h.object)return m(a,{code:p.invalid_type,expected:h.object,received:a.parsedType}),b;const i=[],o=this._def.keyType,s=this._def.valueType;for(const l in a.data)i.push({key:o._parse(new G(a,l,a.path,l)),value:s._parse(new G(a,a.data[l],a.path,l))});return a.common.async?O.mergeObjectAsync(e,i):O.mergeObjectSync(e,i)}get element(){return this._def.valueType}static create(t,e,a){return e instanceof _?new we({keyType:t,valueType:e,typeName:f.ZodRecord,...w(a)}):new we({keyType:X.create(),valueType:t,typeName:f.ZodRecord,...w(e)})}}class qe extends _{_parse(t){const{status:e,ctx:a}=this._processInputParams(t);if(a.parsedType!==h.map)return m(a,{code:p.invalid_type,expected:h.map,received:a.parsedType}),b;const i=this._def.keyType,o=this._def.valueType,s=[...a.data.entries()].map(([l,c],d)=>({key:i._parse(new G(a,l,a.path,[d,"key"])),value:o._parse(new G(a,c,a.path,[d,"value"]))}));if(a.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of s){const d=await c.key,v=await c.value;if(d.status==="aborted"||v.status==="aborted")return b;(d.status==="dirty"||v.status==="dirty")&&e.dirty(),l.set(d.value,v.value)}return{status:e.value,value:l}})}else{const l=new Map;for(const c of s){const d=c.key,v=c.value;if(d.status==="aborted"||v.status==="aborted")return b;(d.status==="dirty"||v.status==="dirty")&&e.dirty(),l.set(d.value,v.value)}return{status:e.value,value:l}}}}qe.create=(r,t,e)=>new qe({valueType:t,keyType:r,typeName:f.ZodMap,...w(e)});class ne extends _{_parse(t){const{status:e,ctx:a}=this._processInputParams(t);if(a.parsedType!==h.set)return m(a,{code:p.invalid_type,expected:h.set,received:a.parsedType}),b;const i=this._def;i.minSize!==null&&a.data.size<i.minSize.value&&(m(a,{code:p.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,message:i.minSize.message}),e.dirty()),i.maxSize!==null&&a.data.size>i.maxSize.value&&(m(a,{code:p.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,message:i.maxSize.message}),e.dirty());const o=this._def.valueType;function s(c){const d=new Set;for(const v of c){if(v.status==="aborted")return b;v.status==="dirty"&&e.dirty(),d.add(v.value)}return{status:e.value,value:d}}const l=[...a.data.values()].map((c,d)=>o._parse(new G(a,c,a.path,d)));return a.common.async?Promise.all(l).then(c=>s(c)):s(l)}min(t,e){return new ne({...this._def,minSize:{value:t,message:T.toString(e)}})}max(t,e){return new ne({...this._def,maxSize:{value:t,message:T.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}ne.create=(r,t)=>new ne({valueType:r,minSize:null,maxSize:null,typeName:f.ZodSet,...w(t)});class se extends _{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==h.function)return m(e,{code:p.invalid_type,expected:h.function,received:e.parsedType}),b;function a(l,c){return We({data:l,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Oe(),ve].filter(d=>!!d),issueData:{code:p.invalid_arguments,argumentsError:c}})}function i(l,c){return We({data:l,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Oe(),ve].filter(d=>!!d),issueData:{code:p.invalid_return_type,returnTypeError:c}})}const o={errorMap:e.common.contextualErrorMap},s=e.data;return this._def.returns instanceof ue?W(async(...l)=>{const c=new Y([]),d=await this._def.args.parseAsync(l,o).catch(Q=>{throw c.addIssue(a(l,Q)),c}),v=await s(...d);return await this._def.returns._def.type.parseAsync(v,o).catch(Q=>{throw c.addIssue(i(v,Q)),c})}):W((...l)=>{const c=this._def.args.safeParse(l,o);if(!c.success)throw new Y([a(l,c.error)]);const d=s(...c.data),v=this._def.returns.safeParse(d,o);if(!v.success)throw new Y([i(d,v.error)]);return v.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new se({...this._def,args:D.create(t).rest(te.create())})}returns(t){return new se({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,a){return new se({args:t||D.create([]).rest(te.create()),returns:e||te.create(),typeName:f.ZodFunction,...w(a)})}}class Be extends _{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}Be.create=(r,t)=>new Be({getter:r,typeName:f.ZodLazy,...w(t)});class De extends _{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return m(e,{code:p.invalid_literal,expected:this._def.value}),b}return{status:"valid",value:t.data}}get value(){return this._def.value}}De.create=(r,t)=>new De({value:r,typeName:f.ZodLiteral,...w(t)});function an(r,t){return new Je({values:r,typeName:f.ZodEnum,...w(t)})}class Je extends _{_parse(t){if(typeof t.data!="string"){const e=this._getOrReturnCtx(t),a=this._def.values;return m(e,{expected:M.joinValues(a),received:e.parsedType,code:p.invalid_type}),b}if(this._def.values.indexOf(t.data)===-1){const e=this._getOrReturnCtx(t),a=this._def.values;return m(e,{received:e.data,code:p.invalid_enum_value,options:a}),b}return W(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}}Je.create=an;class Ye extends _{_parse(t){const e=M.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(t);if(a.parsedType!==h.string&&a.parsedType!==h.number){const i=M.objectValues(e);return m(a,{expected:M.joinValues(i),received:a.parsedType,code:p.invalid_type}),b}if(e.indexOf(t.data)===-1){const i=M.objectValues(e);return m(a,{received:a.data,code:p.invalid_enum_value,options:i}),b}return W(t.data)}get enum(){return this._def.values}}Ye.create=(r,t)=>new Ye({values:r,typeName:f.ZodNativeEnum,...w(t)});class ue extends _{_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==h.promise&&e.common.async===!1)return m(e,{code:p.invalid_type,expected:h.promise,received:e.parsedType}),b;const a=e.parsedType===h.promise?e.data:Promise.resolve(e.data);return W(a.then(i=>this._def.type.parseAsync(i,{path:e.path,errorMap:e.common.contextualErrorMap})))}}ue.create=(r,t)=>new ue({type:r,typeName:f.ZodPromise,...w(t)});class V extends _{innerType(){return this._def.schema}_parse(t){const{status:e,ctx:a}=this._processInputParams(t),i=this._def.effect||null;if(i.type==="preprocess"){const s=i.transform(a.data);return a.common.async?Promise.resolve(s).then(l=>this._def.schema._parseAsync({data:l,path:a.path,parent:a})):this._def.schema._parseSync({data:s,path:a.path,parent:a})}const o={addIssue:s=>{m(a,s),s.fatal?e.abort():e.dirty()},get path(){return a.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="refinement"){const s=l=>{const c=i.refinement(l,o);if(a.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return l.status==="aborted"?b:(l.status==="dirty"&&e.dirty(),s(l.value),{status:e.value,value:l.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>l.status==="aborted"?b:(l.status==="dirty"&&e.dirty(),s(l.value).then(()=>({status:e.value,value:l.value}))))}if(i.type==="transform")if(a.common.async===!1){const s=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Ze(s))return s;const l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:l}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(s=>Ze(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:e.value,value:l})):s);M.assertNever(i)}}V.create=(r,t,e)=>new V({schema:r,typeName:f.ZodEffects,effect:t,...w(e)});V.createWithPreprocess=(r,t,e)=>new V({schema:t,effect:{type:"preprocess",transform:r},typeName:f.ZodEffects,...w(e)});class q extends _{_parse(t){return this._getType(t)===h.undefined?W(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}q.create=(r,t)=>new q({innerType:r,typeName:f.ZodOptional,...w(t)});class ae extends _{_parse(t){return this._getType(t)===h.null?W(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ae.create=(r,t)=>new ae({innerType:r,typeName:f.ZodNullable,...w(t)});class jt extends _{_parse(t){const{ctx:e}=this._processInputParams(t);let a=e.data;return e.parsedType===h.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}jt.create=(r,t)=>new q({innerType:r,typeName:f.ZodOptional,...w(t)});class Ge extends _{_parse(t){if(this._getType(t)!==h.nan){const a=this._getOrReturnCtx(t);return m(a,{code:p.invalid_type,expected:h.nan,received:a.parsedType}),b}return{status:"valid",value:t.data}}}Ge.create=r=>new Ge({typeName:f.ZodNaN,...w(r)});const on=Symbol("zod_brand");class cr extends _{_parse(t){const{ctx:e}=this._processInputParams(t),a=e.data;return this._def.type._parse({data:a,path:e.path,parent:e})}unwrap(){return this._def.type}}const ur=(r,t={},e)=>r?ce.create().superRefine((a,i)=>{if(!r(a)){const o=typeof t=="function"?t(a):t,s=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...s,fatal:e})}}):ce.create(),sn={object:z.lazycreate};var f;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded"})(f||(f={}));const ln=(r,t={message:`Input not instance of ${r.name}`})=>ur(e=>e instanceof r,t,!0),dr=X.create,pr=re.create,cn=Ge.create,un=Re.create,hr=Le.create,dn=le.create,pn=Ne.create,hn=Ue.create,yn=ce.create,mn=te.create,fn=K.create,bn=Ve.create,vn=B.create,gn=z.create,_n=z.strictCreate,wn=ge.create,Tn=Ke.create,Mn=_e.create,xn=D.create,zn=we.create,Pn=qe.create,jn=ne.create,In=se.create,kn=Be.create,En=De.create,Sn=Je.create,An=Ye.create,Cn=ue.create,Mt=V.create,On=q.create,Wn=ae.create,Zn=V.createWithPreprocess,Rn=()=>dr().optional(),Ln=()=>pr().optional(),Nn=()=>hr().optional(),Un=b;var n=Object.freeze({__proto__:null,getParsedType:H,ZodParsedType:h,defaultErrorMap:ve,setErrorMap:tn,getErrorMap:Oe,makeIssue:We,EMPTY_PATH:rn,addIssueToContext:m,ParseStatus:O,INVALID:b,DIRTY:nn,OK:W,isAborted:_t,isDirty:wt,isValid:Ze,isAsync:Tt,ZodType:_,ZodString:X,ZodNumber:re,ZodBigInt:Re,ZodBoolean:Le,ZodDate:le,ZodUndefined:Ne,ZodNull:Ue,ZodAny:ce,ZodUnknown:te,ZodNever:K,ZodVoid:Ve,ZodArray:B,get objectUtil(){return $e},ZodObject:z,ZodUnion:ge,ZodDiscriminatedUnion:Ke,ZodIntersection:_e,ZodTuple:D,ZodRecord:we,ZodMap:qe,ZodSet:ne,ZodFunction:se,ZodLazy:Be,ZodLiteral:De,ZodEnum:Je,ZodNativeEnum:Ye,ZodPromise:ue,ZodEffects:V,ZodTransformer:V,ZodOptional:q,ZodNullable:ae,ZodDefault:jt,ZodNaN:Ge,BRAND:on,ZodBranded:cr,custom:ur,Schema:_,ZodSchema:_,late:sn,get ZodFirstPartyTypeKind(){return f},any:yn,array:vn,bigint:un,boolean:hr,date:dn,discriminatedUnion:Tn,effect:Mt,enum:Sn,function:In,instanceof:ln,intersection:Mn,lazy:kn,literal:En,map:Pn,nan:cn,nativeEnum:An,never:fn,null:hn,nullable:Wn,number:pr,object:gn,oboolean:Nn,onumber:Ln,optional:On,ostring:Rn,preprocess:Zn,promise:Cn,record:zn,set:jn,strictObject:_n,string:dr,transformer:Mt,tuple:xn,undefined:pn,union:wn,unknown:mn,void:bn,NEVER:Un,ZodIssueCode:p,quotelessJson:Qr,ZodError:Y});const da=Object.freeze(Object.defineProperty({__proto__:null,BRAND:on,DIRTY:nn,EMPTY_PATH:rn,INVALID:b,NEVER:Un,OK:W,ParseStatus:O,Schema:_,ZodAny:ce,ZodArray:B,ZodBigInt:Re,ZodBoolean:Le,ZodBranded:cr,ZodDate:le,ZodDefault:jt,ZodDiscriminatedUnion:Ke,ZodEffects:V,ZodEnum:Je,ZodError:Y,get ZodFirstPartyTypeKind(){return f},ZodFunction:se,ZodIntersection:_e,ZodIssueCode:p,ZodLazy:Be,ZodLiteral:De,ZodMap:qe,ZodNaN:Ge,ZodNativeEnum:Ye,ZodNever:K,ZodNull:Ue,ZodNullable:ae,ZodNumber:re,ZodObject:z,ZodOptional:q,ZodParsedType:h,ZodPromise:ue,ZodRecord:we,ZodSchema:_,ZodSet:ne,ZodString:X,ZodTransformer:V,ZodTuple:D,ZodType:_,ZodUndefined:Ne,ZodUnion:ge,ZodUnknown:te,ZodVoid:Ve,addIssueToContext:m,any:yn,array:vn,bigint:un,boolean:hr,custom:ur,date:dn,default:n,defaultErrorMap:ve,discriminatedUnion:Tn,effect:Mt,enum:Sn,function:In,getErrorMap:Oe,getParsedType:H,instanceof:ln,intersection:Mn,isAborted:_t,isAsync:Tt,isDirty:wt,isValid:Ze,late:sn,lazy:kn,literal:En,makeIssue:We,map:Pn,nan:cn,nativeEnum:An,never:fn,null:hn,nullable:Wn,number:pr,object:gn,get objectUtil(){return $e},oboolean:Nn,onumber:Ln,optional:On,ostring:Rn,preprocess:Zn,promise:Cn,quotelessJson:Qr,record:zn,set:jn,setErrorMap:tn,strictObject:_n,string:dr,transformer:Mt,tuple:xn,undefined:pn,union:wn,unknown:mn,void:bn,z:n},Symbol.toStringTag,{value:"Module"})),pa=n.object({message:n.string(),author:n.string()});var Vn=(r=>(r[r.text=1]="text",r[r.me=2]="me",r[r.userIncoming=3]="userIncoming",r[r.userOutcoming=4]="userOutcoming",r[r.userWriting=5]="userWriting",r[r.userStopWriting=6]="userStopWriting",r))(Vn||{});const ha=n.nativeEnum(Vn),wr=n.object({type:ha,date:n.date(),author:n.optional(n.nullable(n.string())),targets:n.optional(n.nullable(n.array(n.nullable(n.string())))),text:n.optional(n.nullable(n.array(n.nullable(n.string()))))}),ya=n.object({popupId:n.number()}),ma=n.object({url:n.string()}),fa=n.object({url:n.string()}),ba=n.object({url:n.string(),allowApi:n.boolean().optional(),allowPolicy:n.optional(n.string()),widthPercent:n.optional(n.number()),position:n.optional(n.number()),closable:n.boolean().optional(),lazy:n.boolean().optional()}),Tr=n.object({id:n.string()}),va=n.object({label:n.string(),className:n.optional(n.string())}),ga=n.object({popupId:n.number(),targetObject:n.string(),message:n.string(),buttons:n.array(va)}),_a=n.object({url:n.string()}),Mr=n.object({name:n.string()}),wa=n.object({layerName:n.string(),propertyName:n.string(),propertyValue:n.optional(n.union([n.string(),n.number(),n.boolean()]))}),Ta=n.object({url:n.string()}),Ma=n.object({volume:n.optional(n.number()),loop:n.boolean().optional(),mute:n.boolean().optional(),rate:n.optional(n.number()),detune:n.optional(n.number()),seek:n.optional(n.number()),delay:n.optional(n.number())}),xa=n.object({url:n.string(),config:n.optional(Ma)}),za=n.object({url:n.string()}),Pa=n.array(n.object({x:n.number(),y:n.number(),tile:n.union([n.number(),n.string(),n.null()]),layer:n.string()})),ja=n.object({roomId:n.string(),mapUrl:n.string(),nickname:n.string(),language:n.string().optional(),playerId:n.number().optional(),uuid:n.string().optional(),startLayerName:n.string().optional(),tags:n.string().array(),variables:n.unknown(),playerVariables:n.unknown(),userRoomToken:n.string().optional(),metadata:n.unknown().optional()}),Ia=n.object({data:n.unknown()}),xt=n.object({key:n.string(),value:n.unknown()});n.object({type:n.literal("setVariable"),data:xt});const ka=n.object({x:n.number(),y:n.number(),width:n.number(),height:n.number()}),Ea=n.object({name:n.string(),url:n.optional(n.string()),visible:n.boolean().optional(),allowApi:n.boolean().optional(),allow:n.optional(n.string()),x:n.optional(n.number()),y:n.optional(n.number()),width:n.optional(n.number()),height:n.optional(n.number()),origin:n.optional(n.enum(["player","map"])),scale:n.optional(n.number())}),xr=n.object({name:n.string(),url:n.string(),position:ka,visible:n.boolean().optional(),allowApi:n.boolean().optional(),allow:n.optional(n.string()),origin:n.optional(n.enum(["player","map"])),scale:n.optional(n.number())}),Sa=n.object({url:n.string()}),Aa="triggerActionMessage",Ca="removeActionMessage",Oa=n.enum(["message","warning"]),Wa=n.object({message:n.string(),uuid:n.string(),type:Oa}),$n=n.object({uuid:n.string()}),Za=n.object({name:n.string()}),Ra=n.object({allowApi:n.boolean()}),La=n.object({name:n.string(),iframe:n.optional(n.string()),options:Ra}),qn=n.object({x:n.number(),y:n.number()}),Na=n.object({x:n.number(),y:n.number(),width:n.optional(n.number()),height:n.optional(n.number()),lock:n.boolean(),smooth:n.boolean()}),Ua=n.object({smooth:n.boolean()}),Va=n.object({red:n.number(),green:n.number(),blue:n.number()}),$a=n.object({x:n.number(),y:n.number(),speed:n.optional(n.number())}),qa=n.object({x:n.number(),y:n.number(),cancelled:n.boolean()}),Ba=n.object({id:n.number(),actionKey:n.string()}),Da=n.object({id:n.number(),actionKey:n.string()}),Ya=n.object({areaName:n.string(),propertyName:n.string(),propertyValue:n.optional(n.union([n.string(),n.number(),n.boolean()]))}),Ga=/-*\d+(px|em|%|cm|in|pc|pt|mm|ex|vw|vh|rem)|auto|inherit/,be=n.string().regex(Ga),yr=n.object({top:be.optional(),bottom:be.optional(),left:be.optional(),right:be.optional()}),Ka=n.enum(["top","middle","bottom"]),Ja=n.enum(["left","middle","right"]),mr=n.object({vertical:Ka,horizontal:Ja}),fr=n.object({height:be,width:be}),Ha=n.object({url:n.string(),visible:n.boolean().optional(),allowApi:n.boolean().optional(),allowPolicy:n.optional(n.string()),position:mr,size:fr,margin:yr.optional()}),Fa=n.object({id:n.string(),url:n.string().optional(),visible:n.boolean().optional(),position:mr.optional(),size:fr.optional(),margin:yr.optional()}),zr=n.object({id:n.string(),url:n.string(),visible:n.boolean(),allowApi:n.boolean(),allowPolicy:n.string(),position:mr,size:fr,margin:yr.optional()}),Bn=n.object({name:n.string(),x:n.optional(n.number()),y:n.optional(n.number()),width:n.optional(n.number()),height:n.optional(n.number())}),Pr=n.object({name:n.string(),x:n.number(),y:n.number(),width:n.number(),height:n.number()}),Xa=n.object({message:n.string()}),jr=n.object({name:n.string()}),Ir=n.object({name:n.string()}),kr=n.object({name:n.string()}),Qa=n.object({popupId:n.number(),buttonId:n.number()}),ei=n.object({id:n.number(),actionName:n.string()}),ti=n.object({direction:n.enum(["right","left","up","down"]),moving:n.boolean(),x:n.number(),y:n.number(),oldX:n.optional(n.number()),oldY:n.optional(n.number())}),ri=n.object({x:n.number(),y:n.number(),width:n.number(),height:n.number(),zoom:n.number()}),ni=n.object({uuid:n.string(),playUri:n.string()}),ai=n.object({url:n.string()}),ii=n.object({url:n.string(),name:n.string(),type:n.string(),subscribe:n.boolean()}),oi=n.object({menuItem:n.string()}),Te=n.object({playerId:n.number(),name:n.string(),userUuid:n.string(),availabilityStatus:n.string(),outlineColor:n.number().optional(),position:qn,variables:n.map(n.string(),n.unknown())}),si=Te.omit({userUuid:!0}).partial({name:!0,availabilityStatus:!0,outlineColor:!0,position:!0,variables:!0}),li=n.object({users:Te.array()}),Er=n.object({user:Te}),ci=n.object({key:n.string(),value:n.unknown(),playerId:n.number()}),ui=n.object({players:n.boolean(),movement:n.boolean()}),di=n.object({key:n.string(),value:n.unknown(),public:n.boolean(),persist:n.boolean(),ttl:n.number().optional(),scope:n.union([n.literal("room"),n.literal("world")])}),pi=n.object({notification:n.boolean(),chatSounds:n.boolean(),enableChat:n.boolean(),enableChatUpload:n.boolean()}),hi=n.object({visibility:n.boolean()}),yi=n.object({userName:n.string(),notificationType:n.number(),forum:n.optional(n.nullable(n.string()))}),mi=n.object({visitCardUrl:n.string()}),fi=n.object({src:n.string(),allow:n.string().optional().nullable().default(null),tiltle:n.string().optional().default("WorkAdventure modal iframe"),position:n.string().optional().default("right"),allowApi:n.boolean().optional().default(!1)});n.union([n.object({type:n.literal("addActionsMenuKeyToRemotePlayer"),data:Ba}),n.object({type:n.literal("removeActionsMenuKeyFromRemotePlayer"),data:Da}),n.object({type:n.literal("loadPage"),data:fa}),n.object({type:n.literal("chat"),data:pa}),n.object({type:n.literal("openChat"),data:n.undefined()}),n.object({type:n.literal("closeChat"),data:n.undefined()}),n.object({type:n.literal("addPersonnalMessage"),data:n.string()}),n.object({type:n.literal("newChatMessageWritingStatus"),data:n.number()}),n.object({type:n.literal("cameraFollowPlayer"),data:Ua}),n.object({type:n.literal("cameraSet"),data:Na}),n.object({type:n.literal("openPopup"),data:ga}),n.object({type:n.literal("closePopup"),data:ya}),n.object({type:n.literal("openTab"),data:_a}),n.object({type:n.literal("goToPage"),data:ma}),n.object({type:n.literal("turnOffMicrophone"),data:n.undefined()}),n.object({type:n.literal("turnOffWebcam"),data:n.undefined()}),n.object({type:n.literal("disableMicrophone"),data:n.undefined()}),n.object({type:n.literal("restoreMicrophone"),data:n.undefined()}),n.object({type:n.literal("disableWebcam"),data:n.undefined()}),n.object({type:n.literal("restoreWebcam"),data:n.undefined()}),n.object({type:n.literal("disablePlayerControls"),data:n.undefined()}),n.object({type:n.literal("restorePlayerControls"),data:n.undefined()}),n.object({type:n.literal("disablePlayerProximityMeeting"),data:n.undefined()}),n.object({type:n.literal("restorePlayerProximityMeeting"),data:n.undefined()}),n.object({type:n.literal("displayBubble"),data:n.undefined()}),n.object({type:n.literal("removeBubble"),data:n.undefined()}),n.object({type:n.literal("onPlayerMove"),data:n.undefined()}),n.object({type:n.literal("onCameraUpdate"),data:n.undefined()}),n.object({type:n.literal("showLayer"),data:Mr}),n.object({type:n.literal("hideLayer"),data:Mr}),n.object({type:n.literal("setProperty"),data:wa}),n.object({type:n.literal("setAreaProperty"),data:Ya}),n.object({type:n.literal("loadSound"),data:Ta}),n.object({type:n.literal("playSound"),data:xa}),n.object({type:n.literal("stopSound"),data:za}),n.object({type:n.literal("registerMenu"),data:La}),n.object({type:n.literal("unregisterMenu"),data:Za}),n.object({type:n.literal("setTiles"),data:Pa}),n.object({type:n.literal("modifyEmbeddedWebsite"),data:Ea}),n.object({type:n.literal("modifyUIWebsite"),data:Fa}),n.object({type:n.literal("modifyArea"),data:Bn}),n.object({type:n.literal("askPosition"),data:ni}),n.object({type:n.literal("openInviteMenu"),data:n.undefined()}),n.object({type:n.literal("chatTotalMessagesToSee"),data:n.number()}),n.object({type:n.literal("notification"),data:yi}),n.object({type:n.literal("login"),data:n.undefined()}),n.object({type:n.literal("refresh"),data:n.undefined()}),n.object({type:n.literal("showBusinessCard"),data:mi}),n.object({type:n.literal("openModal"),data:fi}),n.object({type:n.literal("closeModal"),data:n.undefined()}),n.object({type:n.literal("redirectPricing"),data:n.undefined()})]);const bi=n.union([n.object({type:n.literal("userInputChat"),data:Xa}),n.object({type:n.literal("joinProximityMeetingEvent"),data:li}),n.object({type:n.literal("participantJoinProximityMeetingEvent"),data:Er}),n.object({type:n.literal("participantLeaveProximityMeetingEvent"),data:Er}),n.object({type:n.literal("leaveProximityMeetingEvent"),data:n.undefined()}),n.object({type:n.literal("enterEvent"),data:jr}),n.object({type:n.literal("leaveEvent"),data:jr}),n.object({type:n.literal("enterLayerEvent"),data:Ir}),n.object({type:n.literal("leaveLayerEvent"),data:Ir}),n.object({type:n.literal("enterAreaEvent"),data:kr}),n.object({type:n.literal("leaveAreaEvent"),data:kr}),n.object({type:n.literal("buttonClickedEvent"),data:Qa}),n.object({type:n.literal("remotePlayerClickedEvent"),data:Te}),n.object({type:n.literal("actionsMenuActionClickedEvent"),data:ei}),n.object({type:n.literal("hasPlayerMoved"),data:ti}),n.object({type:n.literal("wasCameraUpdated"),data:ri}),n.object({type:n.literal("menuItemClicked"),data:oi}),n.object({type:n.literal("setVariable"),data:xt}),n.object({type:n.literal("setPlayerVariable"),data:xt}),n.object({type:n.literal("setSharedPlayerVariable"),data:ci}),n.object({type:n.literal("messageTriggered"),data:$n}),n.object({type:n.literal("leaveMuc"),data:ai}),n.object({type:n.literal("joinMuc"),data:ii}),n.object({type:n.literal("addRemotePlayer"),data:Te}),n.object({type:n.literal("removeRemotePlayer"),data:n.number()}),n.object({type:n.literal("remotePlayerChanged"),data:si}),n.object({type:n.literal("settings"),data:pi}),n.object({type:n.literal("chatVisibility"),data:hi}),n.object({type:n.literal("availabilityStatus"),data:n.number()}),n.object({type:n.literal("peerConnectionStatus"),data:n.boolean()}),n.object({type:n.literal("comingUser"),data:wr}),n.object({type:n.literal("addChatMessage"),data:wr}),n.object({type:n.literal("updateWritingStatusChatList"),data:n.array(n.nullable(n.string()))})]),vi=n.object({type:n.string(),data:n.unknown().optional()});n.undefined(),n.undefined(),n.undefined(),n.undefined(),n.number(),n.undefined(),n.array(Tr),n.string(),n.undefined(),n.undefined(),n.undefined(),n.undefined(),n.undefined(),n.string(),n.string(),n.undefined(),n.undefined(),n.undefined(),n.string(),n.undefined(),n.string(),n.undefined(),n.undefined(),n.undefined(),n.undefined(),n.undefined(),n.string(),n.undefined(),n.undefined(),n.array(zr),n.array(Te);const gi=r=>typeof r.type=="string"&&typeof r.id=="number",_i=n.object({id:n.number(),type:n.string(),error:n.string()}),vt={};function j(r){return vt[r.type]===void 0&&(vt[r.type]=[]),vt[r.type].push(r.callback),r}function y(r){window.parent.postMessage(r,"*")}let At=0;const Se=new Map;function P(r){return new Promise((t,e)=>{window.parent.postMessage({id:At,query:r},"*"),Se.set(At,{resolve:t,reject:e}),At++})}class L{}var Ft=function(r,t){return Ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])},Ft(r,t)};function It(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ft(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Xt(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],a=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function zt(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var a=e.call(r),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(s)throw s.error}}return o}function Pt(r,t,e){if(e||arguments.length===2)for(var a=0,i=t.length,o;a<i;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return r.concat(o||Array.prototype.slice.call(t))}function F(r){return typeof r=="function"}function Dn(r){var t=function(a){Error.call(a),a.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Ct=Dn(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(a,i){return i+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Qt(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var kt=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,a,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=Xt(s),c=l.next();!c.done;c=l.next()){var d=c.value;d.remove(this)}}catch($){t={error:$}}finally{try{c&&!c.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}else s.remove(this);var v=this.initialTeardown;if(F(v))try{v()}catch($){o=$ instanceof Ct?$.errors:[$]}var J=this._finalizers;if(J){this._finalizers=null;try{for(var Q=Xt(J),ze=Q.next();!ze.done;ze=Q.next()){var aa=ze.value;try{Sr(aa)}catch($){o=o!=null?o:[],$ instanceof Ct?o=Pt(Pt([],zt(o)),zt($.errors)):o.push($)}}}catch($){a={error:$}}finally{try{ze&&!ze.done&&(i=Q.return)&&i.call(Q)}finally{if(a)throw a.error}}}if(o)throw new Ct(o)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)Sr(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Qt(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&Qt(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}(),Yn=kt.EMPTY;function Gn(r){return r instanceof kt||r&&"closed"in r&&F(r.remove)&&F(r.add)&&F(r.unsubscribe)}function Sr(r){F(r)?r():r.unsubscribe()}var br={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},er={setTimeout:function(r,t){for(var e=[],a=2;a<arguments.length;a++)e[a-2]=arguments[a];var i=er.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,Pt([r,t],zt(e))):setTimeout.apply(void 0,Pt([r,t],zt(e)))},clearTimeout:function(r){var t=er.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function wi(r){er.setTimeout(function(){throw r})}function Ar(){}var dt=null;function gt(r){if(br.useDeprecatedSynchronousErrorHandling){var t=!dt;if(t&&(dt={errorThrown:!1,error:null}),r(),t){var e=dt,a=e.errorThrown,i=e.error;if(dt=null,a)throw i}}else r()}var Kn=function(r){It(t,r);function t(e){var a=r.call(this)||this;return a.isStopped=!1,e?(a.destination=e,Gn(e)&&e.add(a)):a.destination=zi,a}return t.create=function(e,a,i){return new tr(e,a,i)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(kt),Ti=Function.prototype.bind;function Ot(r,t){return Ti.call(r,t)}var Mi=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(a){pt(a)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(a){pt(a)}else pt(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){pt(e)}},r}(),tr=function(r){It(t,r);function t(e,a,i){var o=r.call(this)||this,s;if(F(e)||!e)s={next:e!=null?e:void 0,error:a!=null?a:void 0,complete:i!=null?i:void 0};else{var l;o&&br.useDeprecatedNextContext?(l=Object.create(e),l.unsubscribe=function(){return o.unsubscribe()},s={next:e.next&&Ot(e.next,l),error:e.error&&Ot(e.error,l),complete:e.complete&&Ot(e.complete,l)}):s=e}return o.destination=new Mi(s),o}return t}(Kn);function pt(r){wi(r)}function xi(r){throw r}var zi={closed:!0,next:Ar,error:xi,complete:Ar},Pi=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ji(r){return r}function Ii(r){return r.length===0?ji:r.length===1?r[0]:function(e){return r.reduce(function(a,i){return i(a)},e)}}var Cr=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,a){var i=this,o=Ei(t)?t:new tr(t,e,a);return gt(function(){var s=i,l=s.operator,c=s.source;o.add(l?l.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var a=this;return e=Or(e),new e(function(i,o){var s=new tr({next:function(l){try{t(l)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});a.subscribe(s)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[Pi]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ii(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=Or(t),new t(function(a,i){var o;e.subscribe(function(s){return o=s},function(s){return i(s)},function(){return a(o)})})},r.create=function(t){return new r(t)},r}();function Or(r){var t;return(t=r!=null?r:br.Promise)!==null&&t!==void 0?t:Promise}function ki(r){return r&&F(r.next)&&F(r.error)&&F(r.complete)}function Ei(r){return r&&r instanceof Kn||ki(r)&&Gn(r)}var Si=Dn(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),E=function(r){It(t,r);function t(){var e=r.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var a=new Wr(this,this);return a.operator=e,a},t.prototype._throwIfClosed=function(){if(this.closed)throw new Si},t.prototype.next=function(e){var a=this;gt(function(){var i,o;if(a._throwIfClosed(),!a.isStopped){a.currentObservers||(a.currentObservers=Array.from(a.observers));try{for(var s=Xt(a.currentObservers),l=s.next();!l.done;l=s.next()){var c=l.value;c.next(e)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(e){var a=this;gt(function(){if(a._throwIfClosed(),!a.isStopped){a.hasError=a.isStopped=!0,a.thrownError=e;for(var i=a.observers;i.length;)i.shift().error(e)}})},t.prototype.complete=function(){var e=this;gt(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var a=e.observers;a.length;)a.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var a=this,i=this,o=i.hasError,s=i.isStopped,l=i.observers;return o||s?Yn:(this.currentObservers=null,l.push(e),new kt(function(){a.currentObservers=null,Qt(l,e)}))},t.prototype._checkFinalizedStatuses=function(e){var a=this,i=a.hasError,o=a.thrownError,s=a.isStopped;i?e.error(o):s&&e.complete()},t.prototype.asObservable=function(){var e=new Cr;return e.source=this,e},t.create=function(e,a){return new Wr(e,a)},t}(Cr),Wr=function(r){It(t,r);function t(e,a){var i=r.call(this)||this;return i.destination=e,i.source=a,i}return t.prototype.next=function(e){var a,i;(i=(a=this.destination)===null||a===void 0?void 0:a.next)===null||i===void 0||i.call(a,e)},t.prototype.error=function(e){var a,i;(i=(a=this.destination)===null||a===void 0?void 0:a.error)===null||i===void 0||i.call(a,e)},t.prototype.complete=function(){var e,a;(a=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||a===void 0||a.call(e)},t.prototype._subscribe=function(e){var a,i;return(i=(a=this.source)===null||a===void 0?void 0:a.subscribe(e))!==null&&i!==void 0?i:Yn},t}(E);const Zr=new E;class Ai extends L{constructor(){super(...arguments);u(this,"callbacks",[j({callback:e=>{Zr.next(e.message)},type:"userInputChat"})])}open(){y({type:"openChat",data:void 0})}close(){y({type:"closeChat",data:void 0})}sendChatMessage(e,a){y({type:"chat",data:{message:e,author:a!=null?a:"System"}})}onChatMessage(e){Zr.subscribe(e)}}const Wt=new Ai;class Rr{constructor(t){this.id=t}close(){return P({type:"closeCoWebsite",data:this.id})}}class Ci extends L{constructor(){super(...arguments);u(this,"callbacks",[])}openTab(e){y({type:"openTab",data:{url:e}})}goToPage(e){y({type:"goToPage",data:{url:e}})}goToRoom(e){y({type:"loadPage",data:{url:e}})}async openCoWebSite(e,a,i,o,s,l,c){const d=await P({type:"openCoWebsite",data:{url:e,allowApi:a,allowPolicy:i,widthPercent:o,position:s,closable:l,lazy:c}});return new Rr(d.id)}async getCoWebSites(){return(await P({type:"getCoWebsites",data:void 0})).map(a=>new Rr(a.id))}closeCoWebSite(){return P({type:"closeCoWebsites",data:void 0})}}const de=new Ci;class Oi extends L{constructor(){super(...arguments);u(this,"callbacks",[])}disablePlayerControls(){y({type:"disablePlayerControls",data:void 0})}restorePlayerControls(){y({type:"restorePlayerControls",data:void 0})}turnOffMicrophone(){y({type:"turnOffMicrophone",data:void 0})}turnOffWebcam(){y({type:"turnOffWebcam",data:void 0})}disableMicrophone(){y({type:"disableMicrophone",data:void 0})}restoreMicrophone(){y({type:"restoreMicrophone",data:void 0})}disableWebcam(){y({type:"disableWebcam",data:void 0})}restoreWebcam(){y({type:"restoreWebcam",data:void 0})}disablePlayerProximityMeeting(){y({type:"disablePlayerProximityMeeting",data:void 0})}restorePlayerProximityMeeting(){y({type:"restorePlayerProximityMeeting",data:void 0})}}const Zt=new Oi;class Wi{constructor(t){this.id=t}close(){y({type:"closePopup",data:{popupId:this.id}})}}function Zi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const t=Math.random()*16|0;return(r==="x"?t:t&3|8).toString(16)})}class Ri{constructor(t,e){u(this,"uuid");u(this,"type");u(this,"message");u(this,"callback");var a;this.onRemove=e,this.uuid=Zi(),this.message=t.message,this.type=(a=t.type)!=null?a:"message",this.callback=t.callback,this.create().catch(i=>console.error(i))}async create(){await P({type:Aa,data:{message:this.message,type:this.type,uuid:this.uuid}})}async remove(){await P({type:Ca,data:{uuid:this.uuid}}),this.onRemove()}triggerCallback(){this.callback()}}class Li{constructor(t){this.menuName=t}remove(){y({type:"unregisterMenu",data:{name:this.menuName}})}}class Lr{constructor(t,e){u(this,"website");u(this,"_vertical");u(this,"_horizontal");this.website=t,this._vertical=e.vertical,this._horizontal=e.horizontal}get vertical(){return this._vertical}set vertical(t){this._vertical=t,y({type:"modifyUIWebsite",data:{id:this.website.id,position:{vertical:this._vertical,horizontal:this._horizontal}}})}get horizontal(){return this._horizontal}set horizontal(t){this._horizontal=t,y({type:"modifyUIWebsite",data:{id:this.website.id,position:{vertical:this._vertical,horizontal:this._horizontal}}})}}class Nr{constructor(t,e){u(this,"website");u(this,"_height");u(this,"_width");this.website=t,this._height=e.height,this._width=e.width}get height(){return this._height}set height(t){this._height=t,y({type:"modifyUIWebsite",data:{id:this.website.id,size:{height:this._height,width:this._width}}})}get width(){return this._height}set width(t){this._width=t,y({type:"modifyUIWebsite",data:{id:this.website.id,size:{height:this._height,width:this._width}}})}}class Ur{constructor(t,e){u(this,"website");u(this,"_top");u(this,"_bottom");u(this,"_left");u(this,"_right");this.website=t,this._top=e.top,this._bottom=e.bottom,this._left=e.left,this._right=e.right}get top(){return this._top}set top(t){this._top=t,y({type:"modifyUIWebsite",data:{id:this.website.id,margin:{top:this._top}}})}get bottom(){return this._bottom}set bottom(t){this._bottom=t,y({type:"modifyUIWebsite",data:{id:this.website.id,margin:{bottom:this._bottom}}})}get left(){return this._left}set left(t){this._left=t,y({type:"modifyUIWebsite",data:{id:this.website.id,margin:{left:this._left}}})}get right(){return this._right}set right(t){this._right=t,y({type:"modifyUIWebsite",data:{id:this.website.id,margin:{right:this._right}}})}}class Vr{constructor(t){u(this,"id");u(this,"_url");u(this,"_visible");u(this,"_allowPolicy");u(this,"_allowApi");u(this,"_position");u(this,"_size");u(this,"_margin");var e,a,i,o;this.id=t.id,this._url=t.url,this._visible=(e=t.visible)!=null?e:!0,this._allowPolicy=(a=t.allowPolicy)!=null?a:"",this._allowApi=(i=t.allowApi)!=null?i:!1,this._position=new Lr(this,t.position),this._size=new Nr(this,t.size),this._margin=new Ur(this,(o=t.margin)!=null?o:{})}get url(){return this._url}set url(t){this._url=t,y({type:"modifyUIWebsite",data:{id:this.id,url:this._url}})}get visible(){return this._visible}set visible(t){this._visible=t,y({type:"modifyUIWebsite",data:{id:this.id,visible:this._visible}})}get allowPolicy(){return this._allowPolicy}get allowApi(){return this._allowApi}get position(){return this._position}set position(t){this._position=new Lr(this,t),y({type:"modifyUIWebsite",data:{id:this.id,position:{vertical:this._position.vertical,horizontal:this._position.horizontal}}})}get size(){return this._size}set size(t){this._size=new Nr(this,t),y({type:"modifyUIWebsite",data:{id:this.id,size:{height:this._size.height,width:this._size.width}}})}get margin(){return this._margin}set margin(t){this._margin=new Ur(this,t),y({type:"modifyUIWebsite",data:{id:this.id,margin:{top:this._margin.top,bottom:this._margin.bottom,left:this._margin.left,right:this._margin.right}}})}close(){return P({type:"closeUIWebsite",data:this.id})}}class Ni extends L{constructor(){super(...arguments);u(this,"callbacks",[])}async open(e){const a=await P({type:"openUIWebsite",data:e});return new Vr(a)}async getAll(){return(await P({type:"getUIWebsites",data:void 0})).map(a=>new Vr(a))}}const Ui=new Ni,ie=new Map;class Ce{constructor(t){u(this,"_playerId");u(this,"_name");u(this,"_userUuid");u(this,"_availabilityStatus");u(this,"_outlineColor");u(this,"_position");u(this,"_variables");u(this,"_variablesSubjects",new Map);u(this,"state");u(this,"actions",new Map);u(this,"_position$",new E);u(this,"position$",this._position$.asObservable());this._playerId=t.playerId,this._name=t.name,this._userUuid=t.userUuid,this._availabilityStatus=t.availabilityStatus,this._outlineColor=t.outlineColor,this._position=t.position,this._variables=t.variables;const e=this._variablesSubjects,a=this._variables;this.state=new Proxy({onVariableChange(i){let o=e.get(i);return o===void 0&&(o=new E,e.set(i,o)),o.asObservable()}},{get(i,o,s){return o in i?Reflect.get(i,o,s):a.get(o.toString())},has(i,o){return o in i?!0:a.has(o.toString())}})}get playerId(){return this._playerId}get name(){return this._name}get uuid(){return this._userUuid}get outlineColor(){return this._outlineColor}get position(){return this._position}set position(t){this._position=t,this._position$.next(t)}destroy(){this._position$.complete();for(const t of this._variablesSubjects.values())t.complete()}setVariable(t,e){this._variables.set(t,e);const a=this._variablesSubjects.get(t);a&&a.next(e)}addAction(t,e){const a=new qi(this,t,e);return this.actions.set(t,a),y({type:"addActionsMenuKeyToRemotePlayer",data:{id:this._playerId,actionKey:t}}),a}callAction(t){const e=this.actions.get(t);e&&e.call()}removeAction(t){this.actions.delete(t),y({type:"removeActionsMenuKeyFromRemotePlayer",data:{id:this._playerId,actionKey:t}})}}class Vi extends L{constructor(){super(...arguments);u(this,"callbacks",[])}openModal(e){y({type:"openModal",data:e})}closeModal(){y({type:"closeModal",data:void 0})}}const $i=new Vi;let Pe=0;const $r=new Map,qr=new Map,Br=new Map,Rt=new Map,Lt=new Map;class qi{constructor(t,e,a){u(this,"remotePlayer");u(this,"key");u(this,"callback");this.remotePlayer=t,this.key=e,this.callback=a}call(){this.callback()}remove(){this.remotePlayer.removeAction(this.key)}}class Bi extends L{constructor(){super();u(this,"_onRemotePlayerClicked");u(this,"onRemotePlayerClicked");u(this,"currentlyClickedRemotePlayer");u(this,"callbacks",[j({type:"buttonClickedEvent",callback:e=>{var o;const a=(o=qr.get(e.popupId))==null?void 0:o.get(e.buttonId),i=$r.get(e.popupId);if(i===void 0)throw new Error('Could not find popup with ID "'+e.popupId+'"');a&&a(i)}}),j({type:"menuItemClicked",callback:e=>{const a=Rt.get(e.menuItem);if(Br.get(e.menuItem)===void 0)throw new Error('Could not find menu named "'+e.menuItem+'"');a&&a(e.menuItem)}}),j({type:"messageTriggered",callback:e=>{const a=Lt.get(e.uuid);a&&a.triggerCallback()}}),j({type:"remotePlayerClickedEvent",callback:e=>{this._onRemotePlayerClicked.next(new Ce(e))}}),j({type:"actionsMenuActionClickedEvent",callback:e=>{var a;(a=this.currentlyClickedRemotePlayer)==null||a.callAction(e.actionName)}})]);this._onRemotePlayerClicked=new E,this.onRemotePlayerClicked=this._onRemotePlayerClicked.asObservable()}openPopup(e,a,i){Pe++;const o=new Wi(Pe),s=new Map;qr.set(Pe,s);let l=0;for(const c of i){const d=c.callback;d&&s.set(l,()=>{d(o)}),l++}return y({type:"openPopup",data:{popupId:Pe,targetObject:e,message:a,buttons:i.map(c=>({label:c.label,className:c.className}))}}),$r.set(Pe,o),o}registerMenuCommand(e,a){const i=new Li(e);if(typeof a=="function")Rt.set(e,a),y({type:"registerMenu",data:{name:e,options:{allowApi:!1}}});else if(a.allowApi=a.allowApi===void 0?a.iframe!==void 0:a.allowApi,a.iframe!==void 0)y({type:"registerMenu",data:{name:e,iframe:a.iframe,options:{allowApi:a.allowApi}}});else if(a.callback!==void 0)Rt.set(e,a.callback),y({type:"registerMenu",data:{name:e,options:{allowApi:a.allowApi}}});else throw new Error("When adding a menu with WA.ui.registerMenuCommand, you must pass either an iframe or a callback");return Br.set(e,i),i}addActionsMenuKeyToRemotePlayer(e,a){y({type:"addActionsMenuKeyToRemotePlayer",data:{id:e,actionKey:a}})}removeActionsMenuKeyFromRemotePlayer(e,a){y({type:"removeActionsMenuKeyFromRemotePlayer",data:{id:e,actionKey:a}})}displayBubble(){y({type:"displayBubble",data:void 0})}removeBubble(){y({type:"removeBubble",data:void 0})}displayActionMessage(e){const a=new Ri(e,()=>{Lt.delete(a.uuid)});return Lt.set(a.uuid,a),a}get website(){return Ui}get modal(){return $i}}const ht=new Bi;class Di{constructor(t){this.url=t,y({type:"loadSound",data:{url:this.url}})}play(t){return y({type:"playSound",data:{url:this.url,config:t}}),this.url}stop(){return y({type:"stopSound",data:{url:this.url}}),this.url}}class Yi extends L{constructor(){super(...arguments);u(this,"callbacks",[])}loadSound(e){return new Di(e)}}const Dr=new Yi;class Yr{constructor(t){u(this,"name");u(this,"_url");u(this,"_visible");u(this,"_allow");u(this,"_allowApi");u(this,"_position");u(this,"origin");u(this,"_scale");var e,a,i,o;this.config=t,this.name=t.name,this._url=t.url,this._visible=(e=t.visible)!=null?e:!0,this._allow=(a=t.allow)!=null?a:"",this._allowApi=(i=t.allowApi)!=null?i:!1,this._position=t.position,this.origin=t.origin,this._scale=(o=t.scale)!=null?o:1}get url(){return this._url}set url(t){this._url=t,y({type:"modifyEmbeddedWebsite",data:{name:this.name,url:this._url}})}get visible(){return this._visible}set visible(t){this._visible=t,y({type:"modifyEmbeddedWebsite",data:{name:this.name,visible:this._visible}})}get x(){return this._position.x}set x(t){this._position.x=t,y({type:"modifyEmbeddedWebsite",data:{name:this.name,x:this._position.x}})}get y(){return this._position.y}set y(t){this._position.y=t,y({type:"modifyEmbeddedWebsite",data:{name:this.name,y:this._position.y}})}get width(){return this._position.width}set width(t){this._position.width=t,y({type:"modifyEmbeddedWebsite",data:{name:this.name,width:this._position.width}})}get height(){return this._position.height}set height(t){this._position.height=t,y({type:"modifyEmbeddedWebsite",data:{name:this.name,height:this._position.height}})}get scale(){return this._scale}set scale(t){this._scale=t,y({type:"modifyEmbeddedWebsite",data:{name:this.name,scale:this._scale}})}}class Gi extends L{constructor(){super(...arguments);u(this,"callbacks",[])}async get(e){const a=await P({type:"getEmbeddedWebsite",data:e});return new Yr(a)}create(e){return P({type:"createEmbeddedWebsite",data:e}).catch(a=>{console.error(a)}),new Yr(e)}async delete(e){return await P({type:"deleteEmbeddedWebsite",data:e})}}const Ki=new Gi;var yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ji(r){var t=r.default;if(typeof t=="function"){var e=function(){return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(a){var i=Object.getOwnPropertyDescriptor(r,a);Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:function(){return r[a]}})}),e}var Hi={},He={};const A=Ji(da);Object.defineProperty(He,"__esModule",{value:!0});He.ITiledMapChunk=void 0;const ee=A;He.ITiledMapChunk=ee.z.object({data:ee.z.union([ee.z.string(),ee.z.number().array()]),height:ee.z.number(),width:ee.z.number(),x:ee.z.number(),y:ee.z.number()});var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ITiledMapFrame=void 0;const Nt=A;Fe.ITiledMapFrame=Nt.z.object({duration:Nt.z.number(),tileid:Nt.z.number()});var Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.ITiledMapGrid=void 0;const mt=A;Xe.ITiledMapGrid=mt.z.object({width:mt.z.number(),height:mt.z.number(),orientation:mt.z.enum(["orthogonal","isometric"])});var Qe={},R={};Object.defineProperty(R,"__esModule",{value:!0});R.ITiledMapProperty=void 0;const g=A,Fi=g.z.union([g.z.string(),g.z.number(),g.z.boolean(),g.z.null()]),rr=g.z.lazy(()=>g.z.union([Fi,g.z.array(rr),g.z.record(rr)])),Xi=g.z.object({name:g.z.string(),type:g.z.union([g.z.literal("string"),g.z.literal("color"),g.z.literal("file")]),value:g.z.string().optional(),propertytype:g.z.string().optional()}),Qi=g.z.object({name:g.z.string(),type:g.z.union([g.z.literal("int"),g.z.literal("object")]),value:g.z.number().int().optional(),propertytype:g.z.string().optional()}),eo=g.z.object({name:g.z.string(),type:g.z.literal("float"),value:g.z.number().optional(),propertytype:g.z.string().optional()}),to=g.z.object({name:g.z.string(),type:g.z.literal("bool"),value:g.z.boolean().optional(),propertytype:g.z.string().optional()}),ro=g.z.object({name:g.z.string(),type:g.z.literal("class"),value:rr.optional(),propertytype:g.z.string().optional()});R.ITiledMapProperty=g.z.union([Xi,Qi,eo,to,ro]);Object.defineProperty(Qe,"__esModule",{value:!0});Qe.ITiledMapImageLayer=void 0;const S=A,no=R;Qe.ITiledMapImageLayer=S.z.object({image:S.z.string(),name:S.z.string(),opacity:S.z.number(),type:S.z.literal("imagelayer"),visible:S.z.boolean(),height:S.z.number().optional(),id:S.z.number().optional(),offsetx:S.z.number().optional(),offsety:S.z.number().optional(),parallaxx:S.z.number().optional(),parallaxy:S.z.number().optional(),properties:no.ITiledMapProperty.array().optional(),repeatx:S.z.boolean().optional(),repeaty:S.z.boolean().optional(),startx:S.z.number().optional(),starty:S.z.number().optional(),tintcolor:S.z.string().optional(),class:S.z.string().optional(),width:S.z.number().optional(),x:S.z.number().optional(),y:S.z.number().optional()});var et={},tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.ITiledMapPoint=void 0;const Ut=A;tt.ITiledMapPoint=Ut.z.object({x:Ut.z.number(),y:Ut.z.number()});var rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.ITiledMapText=void 0;const N=A;rt.ITiledMapText=N.z.object({text:N.z.string(),bold:N.z.boolean().optional(),color:N.z.string().optional(),fontfamily:N.z.string().optional(),halign:N.z.enum(["center","right","justify","left"]).optional(),italic:N.z.boolean().optional(),kerning:N.z.boolean().optional(),pixelsize:N.z.number().optional(),strikeout:N.z.boolean().optional(),underline:N.z.boolean().optional(),valign:N.z.enum(["center","bottom","top"]).optional(),wrap:N.z.boolean().optional()});Object.defineProperty(et,"__esModule",{value:!0});et.ITiledMapObject=void 0;const Z=A,ao=R,Gr=tt,io=rt;et.ITiledMapObject=Z.z.object({id:Z.z.number(),name:Z.z.string(),visible:Z.z.boolean(),x:Z.z.number(),y:Z.z.number(),ellipse:Z.z.boolean().optional(),gid:Z.z.number().optional(),height:Z.z.number().optional(),point:Z.z.boolean().optional(),polygon:Gr.ITiledMapPoint.array().optional(),polyline:Gr.ITiledMapPoint.array().optional(),properties:ao.ITiledMapProperty.array().optional(),rotation:Z.z.number().optional(),template:Z.z.string().optional(),text:io.ITiledMapText.optional(),type:Z.z.string().optional(),class:Z.z.string().optional(),width:Z.z.number().optional()});var je={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.ITiledMapTileLayer=void 0;const I=A,oo=R,so=He;nt.ITiledMapTileLayer=I.z.object({data:I.z.union([I.z.string(),I.z.number().array()]),height:I.z.number(),id:I.z.number(),name:I.z.string(),opacity:I.z.number(),type:I.z.literal("tilelayer"),visible:I.z.boolean(),width:I.z.number(),chunks:so.ITiledMapChunk.array().optional(),compression:I.z.string().optional(),encoding:I.z.enum(["csv","base64"]).optional(),offsetx:I.z.number().optional(),offsety:I.z.number().optional(),parallaxx:I.z.number().optional(),parallaxy:I.z.number().optional(),properties:oo.ITiledMapProperty.array().optional(),startx:I.z.number().optional(),starty:I.z.number().optional(),tintcolor:I.z.string().optional(),class:I.z.string().optional(),x:I.z.number().optional(),y:I.z.number().optional()});var Ie={},Kr;function Jn(){if(Kr)return Ie;Kr=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.ITiledMapGroupLayer=void 0;const r=A,t=R,e=vr();return Ie.ITiledMapGroupLayer=r.z.lazy(()=>r.z.object({name:r.z.string(),opacity:r.z.number(),type:r.z.literal("group"),layers:e.ITiledMapLayer.array(),visible:r.z.boolean(),height:r.z.number().optional(),draworder:r.z.string().optional(),id:r.z.number().optional(),class:r.z.string().optional(),offsetx:r.z.number().optional(),offsety:r.z.number().optional(),parallaxx:r.z.number().optional(),parallaxy:r.z.number().optional(),properties:t.ITiledMapProperty.array().optional(),startx:r.z.number().optional(),starty:r.z.number().optional(),tintcolor:r.z.string().optional(),width:r.z.number().optional(),x:r.z.number().optional(),y:r.z.number().optional()})),Ie}var Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.ITiledMapObjectLayer=void 0;const C=A,lo=R,co=et;Me.ITiledMapObjectLayer=C.z.object({name:C.z.string(),objects:co.ITiledMapObject.array(),opacity:C.z.number(),type:C.z.literal("objectgroup"),visible:C.z.boolean(),draworder:C.z.string().optional(),height:C.z.number().optional(),id:C.z.number().optional(),offsetx:C.z.number().optional(),offsety:C.z.number().optional(),parallaxx:C.z.number().optional(),parallaxy:C.z.number().optional(),properties:lo.ITiledMapProperty.array().optional(),startx:C.z.number().optional(),starty:C.z.number().optional(),tintcolor:C.z.string().optional(),width:C.z.number().optional(),class:C.z.string().optional(),x:C.z.number().optional(),y:C.z.number().optional()});var Jr;function vr(){if(Jr)return je;Jr=1,Object.defineProperty(je,"__esModule",{value:!0}),je.ITiledMapLayer=void 0;const r=A,t=nt,e=Jn(),a=Me,i=Qe;return je.ITiledMapLayer=r.z.union([t.ITiledMapTileLayer,e.ITiledMapGroupLayer,a.ITiledMapObjectLayer,i.ITiledMapImageLayer]),je}var at={};Object.defineProperty(at,"__esModule",{value:!0});at.ITiledMapOffset=void 0;const Vt=A;at.ITiledMapOffset=Vt.z.object({x:Vt.z.number(),y:Vt.z.number()});var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.ITiledMapTerrain=void 0;const $t=A,uo=R;xe.ITiledMapTerrain=$t.z.object({name:$t.z.string(),tile:$t.z.number(),properties:uo.ITiledMapProperty.array().optional()});var it={};Object.defineProperty(it,"__esModule",{value:!0});it.ITiledMapTile=void 0;const U=A,po=Fe,ho=Me,yo=R,mo=xe;it.ITiledMapTile=U.z.object({id:U.z.number(),animation:po.ITiledMapFrame.array().optional(),image:U.z.string().optional(),imageheight:U.z.number().optional(),imagewidth:U.z.number().optional(),x:U.z.number().optional(),y:U.z.number().optional(),width:U.z.number().optional(),height:U.z.number().optional(),objectgroup:ho.ITiledMapObjectLayer.array().optional(),probability:U.z.number().optional(),properties:yo.ITiledMapProperty.array().optional(),class:U.z.string().optional(),terrain:mo.ITiledMapTerrain.array().optional(),type:U.z.string().optional()});var ot={},st={};Object.defineProperty(st,"__esModule",{value:!0});st.ITiledMapTransformations=void 0;const ke=A;st.ITiledMapTransformations=ke.z.object({hflip:ke.z.boolean().optional(),vflip:ke.z.boolean().optional(),rotate:ke.z.boolean().optional(),preferuntransformed:ke.z.boolean().optional()});var lt={},ct={};Object.defineProperty(ct,"__esModule",{value:!0});ct.ITiledMapWangColor=void 0;const oe=A,fo=R;ct.ITiledMapWangColor=oe.z.object({name:oe.z.string(),color:oe.z.string(),tile:oe.z.number(),probability:oe.z.number(),properties:fo.ITiledMapProperty.array(),type:oe.z.string().optional(),class:oe.z.string().optional()});var ut={};Object.defineProperty(ut,"__esModule",{value:!0});ut.ITiledMapWangTile=void 0;const qt=A;ut.ITiledMapWangTile=qt.z.object({tileid:qt.z.string(),wangid:qt.z.number().array()});Object.defineProperty(lt,"__esModule",{value:!0});lt.ITiledMapWangSet=void 0;const Ee=A,bo=R,vo=ct,go=ut;lt.ITiledMapWangSet=Ee.z.object({name:Ee.z.string(),tile:Ee.z.number(),colors:vo.ITiledMapWangColor.array().optional(),properties:bo.ITiledMapProperty.array().optional(),wangtiles:go.ITiledMapWangTile.array().optional(),type:Ee.z.enum(["corner","edge","mixed"]),class:Ee.z.string().optional()});Object.defineProperty(ot,"__esModule",{value:!0});ot.ITiledMapTileset=void 0;const x=A,_o=R,wo=xe,To=Xe,Mo=at,xo=it,zo=st,Po=lt;ot.ITiledMapTileset=x.z.object({name:x.z.string(),image:x.z.string(),backgroundcolor:x.z.string().optional(),columns:x.z.number().optional(),fillmode:x.z.enum(["stretch","preserve-aspect-fit"]).optional(),firstgid:x.z.number().optional(),grid:To.ITiledMapGrid.optional(),id:x.z.number().optional(),imageheight:x.z.number().optional(),imagewidth:x.z.number().optional(),margin:x.z.number().optional(),objectalignment:x.z.string().optional(),properties:_o.ITiledMapProperty.array().optional(),source:x.z.string().optional(),spacing:x.z.number().optional(),terrains:wo.ITiledMapTerrain.array().optional(),tilecount:x.z.number().optional(),tiledversion:x.z.string().optional(),tileheight:x.z.number().optional(),tileoffset:Mo.ITiledMapOffset.optional(),tilerendersize:x.z.enum(["tile","grid"]).optional(),tiles:xo.ITiledMapTile.array().optional(),tilewidth:x.z.number().optional(),transformations:zo.ITiledMapTransformations.optional(),transparentcolor:x.z.string().optional(),type:x.z.literal("tileset").optional(),class:x.z.string().optional(),version:x.z.union([x.z.string(),x.z.number()]).optional(),wangsets:Po.ITiledMapWangSet.array().optional()});var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.ITiledMap=void 0;const jo=R,Io=vr(),ko=ot,k=A;Et.ITiledMap=k.z.object({layers:Io.ITiledMapLayer.array(),tiledversion:k.z.string(),tilesets:ko.ITiledMapTileset.array(),type:k.z.literal("map"),backgroundcolor:k.z.string().optional(),compressionlevel:k.z.number().optional(),height:k.z.number().optional(),hexsidelength:k.z.number().optional(),infinite:k.z.boolean().optional(),nextlayerid:k.z.number().optional(),nextobjectid:k.z.number().optional(),orientation:k.z.enum(["orthogonal","isometric","staggered","hexagonal"]).optional(),parallaxoriginx:k.z.number().optional(),parallaxoriginy:k.z.number().optional(),properties:jo.ITiledMapProperty.array().optional(),renderorder:k.z.enum(["right-down","right-up","left-down","left-up"]).optional(),staggeraxis:k.z.enum(["x","y"]).optional(),staggerindex:k.z.enum(["odd","even"]).optional(),tileheight:k.z.number().optional(),tilewidth:k.z.number().optional(),class:k.z.string().optional(),version:k.z.union([k.z.string(),k.z.number()]).optional(),width:k.z.number().optional()});var St={};Object.defineProperty(St,"__esModule",{value:!0});St.upgradeMapToNewest=void 0;function Eo(r,t=!1){const e=t?JSON.parse(JSON.stringify(r)):r;for(const a of e.layers)Hn(a);return e}St.upgradeMapToNewest=Eo;function Hn(r){var t;if(r.type==="group")for(const e of(t=r.layers)!==null&&t!==void 0?t:[])Hn(e);if(r.type==="objectgroup")for(const e of r.objects)e.class===void 0&&(e.class=e.type)}(function(r){var t=yt&&yt.__createBinding||(Object.create?function(o,s,l,c){c===void 0&&(c=l),Object.defineProperty(o,c,{enumerable:!0,get:function(){return s[l]}})}:function(o,s,l,c){c===void 0&&(c=l),o[c]=s[l]}),e=yt&&yt.__exportStar||function(o,s){for(var l in o)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&t(s,o,l)};Object.defineProperty(r,"__esModule",{value:!0}),r.upgradeMapToNewest=r.ITiledMapGroupLayer=void 0,e(He,r),e(Fe,r),e(Xe,r),e(Qe,r),e(et,r),e(vr(),r),e(Me,r),e(at,r),e(tt,r),e(R,r),e(xe,r),e(rt,r),e(it,r),e(ot,r),e(st,r),e(ct,r),e(lt,r),e(ut,r),e(nt,r);var a=Jn();Object.defineProperty(r,"ITiledMapGroupLayer",{enumerable:!0,get:function(){return a.ITiledMapGroupLayer}}),e(Et,r);var i=St;Object.defineProperty(r,"upgradeMapToNewest",{enumerable:!0,get:function(){return i.upgradeMapToNewest}})})(Hi);class Hr{constructor(t){u(this,"config");u(this,"name");u(this,"type","area");u(this,"_x");u(this,"_y");u(this,"_width");u(this,"_height");this.config=t,this.name=t.name,this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height}setProperty(t,e){y({type:"setAreaProperty",data:{areaName:this.name,propertyName:t,propertyValue:e}})}get x(){return this._x}set x(t){this._x=t,y({type:"modifyArea",data:{name:this.name,x:this._x}})}set y(t){this._y=t,y({type:"modifyArea",data:{name:this.name,y:this._y}})}get y(){return this._y}set width(t){this._width=t,y({type:"modifyArea",data:{name:this.name,width:this._width}})}get width(){return this._width}set height(t){this._height=t,y({type:"modifyArea",data:{name:this.name,height:this._height}})}get height(){return this._height}}const ft=new Map,bt=new Map;class So extends L{constructor(){super(...arguments);u(this,"callbacks",[j({type:"enterAreaEvent",callback:e=>{var a;(a=ft.get(e.name))==null||a.next()}}),j({type:"leaveAreaEvent",callback:e=>{var a;(a=bt.get(e.name))==null||a.next()}})])}create(e){return P({type:"createArea",data:e}),new Hr(e)}async get(e){const a=await P({type:"getArea",data:e});return new Hr(a)}async delete(e){await P({type:"deleteArea",data:e}),ft.delete(e),bt.delete(e)}onEnter(e){let a=ft.get(e);return a===void 0&&(a=new E,ft.set(e,a)),a.asObservable()}onLeave(e){let a=bt.get(e);return a===void 0&&(a=new E,bt.set(e,a)),a.asObservable()}}const Ao=new So,Bt=new Map,Dt=new Map,Yt=new Map,Gt=new Map;let nr;const Co=r=>{nr=r};let ar;const Oo=r=>{ar=r};class Wo extends L{constructor(){super(...arguments);u(this,"callbacks",[j({callback:e=>{var a;(a=Bt.get(e.name))==null||a.next()},type:"enterEvent"}),j({type:"leaveEvent",callback:e=>{var a;(a=Dt.get(e.name))==null||a.next()}}),j({type:"enterLayerEvent",callback:e=>{var a;(a=Yt.get(e.name))==null||a.next()}}),j({type:"leaveLayerEvent",callback:e=>{var a;(a=Gt.get(e.name))==null||a.next()}})])}onEnterZone(e,a){let i=Bt.get(e);i===void 0&&(i=new E,Bt.set(e,i)),i.subscribe(a)}onLeaveZone(e,a){let i=Dt.get(e);i===void 0&&(i=new E,Dt.set(e,i)),i.subscribe(a)}onEnterLayer(e){let a=Yt.get(e);return a===void 0&&(a=new E,Yt.set(e,a)),a.asObservable()}onLeaveLayer(e){let a=Gt.get(e);return a===void 0&&(a=new E,Gt.set(e,a)),a.asObservable()}showLayer(e){y({type:"showLayer",data:{name:e}})}hideLayer(e){y({type:"hideLayer",data:{name:e}})}setProperty(e,a,i){y({type:"setProperty",data:{layerName:e,propertyName:a,propertyValue:i}})}async getTiledMap(){return(await P({type:"getMapData",data:void 0})).data}setTiles(e){y({type:"setTiles",data:e})}get id(){if(nr===void 0)throw new Error("Room id not initialized yet. You should call WA.room.id within a WA.onInit callback.");return nr}get mapURL(){if(ar===void 0)throw new Error("mapURL is not initialized yet. You should call WA.room.mapURL within a WA.onInit callback.");return ar}async loadTileset(e){return await P({type:"loadTileset",data:{url:e}})}get website(){return Ki}get area(){return Ao}}const Kt=new Wo;class Fn{constructor(){u(this,"setVariableResolvers",new E);u(this,"variables",new Map);u(this,"variableSubscribers",new Map);this.setVariableResolvers.subscribe(t=>{this.variables.set(t.key,t.value);const e=this.variableSubscribers.get(t.key);e!==void 0&&e.next(t.value)})}initVariables(t){for(const[e,a]of t.entries())this.variables.has(e)||this.variables.set(e,a)}loadVariable(t){return this.variables.get(t)}hasVariable(t){return this.variables.has(t)}onVariableChange(t){let e=this.variableSubscribers.get(t);return e===void 0&&(e=new E,this.variableSubscribers.set(t,e)),e.asObservable()}}class Zo extends Fn{constructor(){super();u(this,"callbacks",[j({type:"setVariable",callback:e=>{this.setVariableResolvers.next(e)}})])}saveVariable(e,a){return this.variables.set(e,a),P({type:"setVariable",data:{key:e,value:a}})}}function Ro(){return new Proxy(new Zo,{get(r,t,e){return t in r?Reflect.get(r,t,e):r.loadVariable(t.toString())},set(r,t,e,a){return r.saveVariable(t.toString(),e).catch(i=>console.error(i)),!0},has(r,t){return t in r?!0:r.hasVariable(t.toString())}})}class Lo extends Fn{constructor(){super();u(this,"callbacks",[j({type:"setPlayerVariable",callback:e=>{this.setVariableResolvers.next(e)}})])}saveVariable(e,a,i){var o,s,l,c;if(i&&i.ttl!==void 0&&!i.persist)throw new Error("A variable that has a ttl set must be persisted with 'persist = true'");if(i&&i.scope==="world"&&!i.persist)throw new Error("A variable that has a 'world' scope must be persisted with 'persist = true'");return this.variables.set(e,a),P({type:"setPlayerVariable",data:{key:e,value:a,public:(o=i==null?void 0:i.public)!=null?o:!1,ttl:(s=i==null?void 0:i.ttl)!=null?s:void 0,persist:(l=i==null?void 0:i.persist)!=null?l:!0,scope:(c=i==null?void 0:i.scope)!=null?c:"world"}})}}const No=new Proxy(new Lo,{get(r,t,e){return t in r?Reflect.get(r,t,e):r.loadVariable(t.toString())},set(r,t,e,a){return r.saveVariable(t.toString(),e).catch(i=>console.error(i)),!0},has(r,t){return t in r?!0:r.hasVariable(t.toString())}});let pe,he,ye,me;class Uo extends L{constructor(){super(...arguments);u(this,"callbacks",[j({type:"joinProximityMeetingEvent",callback:e=>{pe==null||pe.next(e.users.map(a=>new Ce(a)))}}),j({type:"participantJoinProximityMeetingEvent",callback:e=>{he==null||he.next(new Ce(e.user))}}),j({type:"participantLeaveProximityMeetingEvent",callback:e=>{ye==null||ye.next(new Ce(e.user))}}),j({type:"leaveProximityMeetingEvent",callback:()=>{me==null||me.next()}})])}onJoin(){return pe===void 0&&(pe=new E),pe}onParticipantJoin(){return he===void 0&&(he=new E),he}onParticipantLeave(){return ye===void 0&&(ye=new E),ye}onLeave(){return me===void 0&&(me=new E),me}}const Vo=new Uo,Fr=new E;let ir;const $o=r=>{ir=r};let or;const qo=r=>{or=r};let sr;const Bo=r=>{sr=r};let lr;const Do=r=>{lr=r};let Ae;const Yo=r=>{Ae=r};class Go extends L{constructor(){super(...arguments);u(this,"state",No);u(this,"callbacks",[j({type:"hasPlayerMoved",callback:e=>{Fr.next(e)}})])}get name(){if(ir===void 0)throw new Error("Player name not initialized yet. You should call WA.player.name within a WA.onInit callback.");return ir}get id(){if(Ae===void 0)throw new Error("Player id not initialized yet. You should call WA.player.id within a WA.onInit callback.");return Ae}get playerId(){throw new Error("Player id not initialized yet. You should call WA.player.playerId within a WA.onInit callback.")}get uuid(){if(Ae===void 0)throw new Error("Player id not initialized yet. You should call WA.player.uuid within a WA.onInit callback.");return Ae}get language(){if(or===void 0)throw new Error("Player language not initialized yet. You should call WA.player.language within a WA.onInit callback.");return or}get tags(){if(sr===void 0)throw new Error("Tags not initialized yet. You should call WA.player.tags within a WA.onInit callback.");return sr}async getPosition(){return await P({type:"getPlayerPosition",data:void 0})}onPlayerMove(e){Fr.subscribe(e),y({type:"onPlayerMove",data:void 0})}async moveTo(e,a,i){return await P({type:"movePlayerTo",data:{x:e,y:a,speed:i}})}get userRoomToken(){if(lr===void 0)throw new Error("User-room token not initialized yet. You should call WA.player.userRoomToken within a WA.onInit callback.");return lr}setOutlineColor(e,a,i){return P({type:"setPlayerOutline",data:{red:e,green:a,blue:i}})}removeOutlineColor(){return P({type:"removePlayerOutline",data:void 0})}get proximityMeeting(){return Vo}}const Xn=new Go,Jt=new Map,Qn=new E,Ko=Qn.asObservable(),ea=new E,Jo=ea.asObservable(),ta=new E,Ho=ta.asObservable();class Fo extends L{constructor(){super(...arguments);u(this,"trackingPlayers",!1);u(this,"trackingMovement",!1);u(this,"callbacks",[j({type:"setSharedPlayerVariable",callback:e=>{const a=ie.get(e.playerId);if(a===void 0){console.warn("Received a variable message for a player that isn't connected. Ignoring.",e);return}const i=Jt.get(e.key);i&&i.next({player:a,value:e.value}),a.setVariable(e.key,e.value)}}),j({type:"addRemotePlayer",callback:e=>{this.registerRemotePlayer(e)}}),j({type:"removeRemotePlayer",callback:e=>{const a=ie.get(e);a===void 0?console.warn("Could not find remote player to delete: ",e):(ie.delete(e),ea.next(a),a.destroy())}}),j({type:"remotePlayerChanged",callback:e=>{const a=ie.get(e.playerId);if(a===void 0){console.warn("Could not find remote player with ID : ",e.playerId);return}if(e.position){const i=a.position;a.position=e.position,ta.next({player:a,newPosition:e.position,oldPosition:i})}}})])}registerRemotePlayer(e){const a=new Ce(e);ie.set(e.playerId,a),Qn.next(a)}async configureTracking(e){var s,l;const a=(s=e==null?void 0:e.players)!=null?s:!0,i=(l=e==null?void 0:e.movement)!=null?l:!0;if(a===this.trackingPlayers&&i===this.trackingMovement)return;this.trackingPlayers=a,this.trackingMovement=i;const o=await P({type:"enablePlayersTracking",data:{players:this.trackingPlayers,movement:this.trackingMovement}});if(a)for(const c of o)this.registerRemotePlayer(c)}onVariableChange(e){let a=Jt.get(e);return a||(a=new E,Jt.set(e,a)),a.asObservable()}get onPlayerEnters(){if(!this.trackingPlayers)throw new Error("Cannot call WA.players.onPlayerEnters(). You forgot to call WA.players.configureTracking() first.");return Ko}get onPlayerLeaves(){if(!this.trackingPlayers)throw new Error("Cannot call WA.players.onPlayerLeaves(). You forgot to call WA.players.configureTracking() first.");return Jo}get onPlayerMoves(){if(!this.trackingMovement)throw new Error("Cannot call WA.players.onPlayerMoves(). You forgot to call WA.players.configureTracking() first.");return Ho}get(e){return ie.get(e)}list(){return ie.values()}}const Xo=new Fo,Xr=new E;class Qo extends L{constructor(){super(...arguments);u(this,"callbacks",[j({type:"wasCameraUpdated",callback:e=>{Xr.next(e)}})])}followPlayer(e=!1){y({type:"cameraFollowPlayer",data:{smooth:e}})}set(e,a,i,o,s=!1,l=!1){y({type:"cameraSet",data:{x:e,y:a,width:i,height:o,lock:s,smooth:l}})}onCameraUpdate(){return y({type:"onCameraUpdate",data:void 0}),Xr.asObservable()}}const es=new Qo,ra=Ro();let na;const ts=r=>{na=r},rs=P({type:"getState",data:void 0}).then(r=>{$o(r.nickname),qo(r.language),Co(r.roomId),Oo(r.mapUrl),Bo(r.tags),Yo(r.uuid),Do(r.userRoomToken),ts(r.metadata),ra.initVariables(r.variables),Xn.state.initVariables(r.playerVariables)}),ns={ui:ht,nav:de,controls:Zt,chat:Wt,sound:Dr,room:Kt,player:Xn,players:Xo,camera:es,state:ra,onInit(){return rs},get metadata(){return na},sendChatMessage(r,t){console.warn("Method WA.sendChatMessage is deprecated. Please use WA.chat.sendChatMessage instead"),Wt.sendChatMessage(r,t)},disablePlayerControls(){console.warn("Method WA.disablePlayerControls is deprecated. Please use WA.controls.disablePlayerControls instead"),Zt.disablePlayerControls()},restorePlayerControls(){console.warn("Method WA.restorePlayerControls is deprecated. Please use WA.controls.restorePlayerControls instead"),Zt.restorePlayerControls()},displayBubble(){console.warn("Method WA.displayBubble is deprecated. Please use WA.ui.displayBubble instead"),ht.displayBubble()},removeBubble(){console.warn("Method WA.removeBubble is deprecated. Please use WA.ui.removeBubble instead"),ht.removeBubble()},openTab(r){console.warn("Method WA.openTab is deprecated. Please use WA.nav.openTab instead"),de.openTab(r)},loadSound(r){return console.warn("Method WA.loadSound is deprecated. Please use WA.sound.loadSound instead"),Dr.loadSound(r)},goToPage(r){console.warn("Method WA.goToPage is deprecated. Please use WA.nav.goToPage instead"),de.goToPage(r)},goToRoom(r){console.warn("Method WA.goToRoom is deprecated. Please use WA.nav.goToRoom instead"),de.goToRoom(r)},openCoWebSite(r,t=!1,e=""){return console.warn("Method WA.openCoWebSite is deprecated. Please use WA.nav.openCoWebSite instead"),de.openCoWebSite(r,t,e)},closeCoWebSite(){return console.warn("Method WA.closeCoWebSite is deprecated. Please use WA.nav.closeCoWebSite instead"),de.closeCoWebSite()},openPopup(r,t,e){return console.warn("Method WA.openPopup is deprecated. Please use WA.ui.openPopup instead"),ht.openPopup(r,t,e)},onChatMessage(r){console.warn("Method WA.onChatMessage is deprecated. Please use WA.chat.onChatMessage instead"),Wt.onChatMessage(r)},onEnterZone(r,t){console.warn("Method WA.onEnterZone is deprecated. Please use WA.room.onEnterZone instead"),Kt.onEnterZone(r,t)},onLeaveZone(r,t){console.warn("Method WA.onLeaveZone is deprecated. Please use WA.room.onLeaveZone instead"),Kt.onLeaveZone(r,t)}};window.WA=ns;window.addEventListener("message",r=>{if(r.source!==window.parent)return;const t=r.data,e=_i.safeParse(t);if(e.success){const a=e.data,i=a.id,o=a.error,s=Se.get(i);if(s===void 0)throw new Error("In Iframe API, got an error answer for a question that we have no track of.");s.reject(new Error(o)),Se.delete(i)}else if(gi(t)){const a=t.id,i=t.data,o=Se.get(a);if(o===void 0)throw new Error("In Iframe API, got an answer for a question that we have no track of.");o.resolve(i),Se.delete(a)}else{const a=bi.safeParse(t);if(a.success){const i=a.data,o=vt[i.type];if(o===void 0)throw new Error('Missing event handler for event of type "'+i.type+"'");for(const s of o)s==null||s(i.data)}else if(vi.safeParse(t).success)throw new Error("Could not parse message received from WorkAdventure. Message:"+JSON.stringify(t))}});
//# sourceMappingURL=iframe_api.js.map
