{"version":3,"file":"iframe_api.js","sources":["../node_modules/zod/lib/index.mjs","../src/front/api/Events/ChatEvent.ts","../src/front/api/Events/ClosePopupEvent.ts","../src/front/api/Events/GoToPageEvent.ts","../src/front/api/Events/LoadPageEvent.ts","../src/front/api/Events/OpenCoWebsiteEvent.ts","../src/front/api/Events/OpenPopupEvent.ts","../src/front/api/Events/OpenTabEvent.ts","../src/front/api/Events/LayerEvent.ts","../src/front/api/Events/SetPropertyEvent.ts","../src/front/api/Events/LoadSoundEvent.ts","../src/front/api/Events/PlaySoundEvent.ts","../src/front/api/Events/StopSoundEvent.ts","../src/front/api/Events/SetTilesEvent.ts","../src/front/api/Events/GameStateEvent.ts","../src/front/api/Events/MapDataEvent.ts","../src/front/api/Events/SetVariableEvent.ts","../src/front/api/Events/EmbeddedWebsiteEvent.ts","../src/front/api/Events/LoadTilesetEvent.ts","../src/front/api/Events/Ui/TriggerActionMessageEvent.ts","../src/front/api/Events/Ui/MenuRegisterEvent.ts","../src/front/api/Events/PlayerPosition.ts","../src/front/api/Events/CameraSetEvent.ts","../src/front/api/Events/CameraFollowPlayerEvent.ts","../src/front/api/Events/ColorEvent.ts","../src/front/api/Events/MovePlayerToEvent.ts","../src/front/api/Events/MovePlayerToEventAnswer.ts","../src/front/api/Events/AddActionsMenuKeyToRemotePlayerEvent.ts","../src/front/api/Events/RemoveActionsMenuKeyFromRemotePlayerEvent.ts","../src/front/api/Events/SetAreaPropertyEvent.ts","../src/front/api/Events/Ui/UIWebsite.ts","../src/front/api/Events/CreateAreaEvent.ts","../src/front/api/Events/UserInputChatEvent.ts","../src/front/api/Events/EnterLeaveEvent.ts","../src/front/api/Events/ChangeLayerEvent.ts","../src/front/api/Events/ChangeAreaEvent.ts","../src/front/api/Events/ButtonClickedEvent.ts","../src/front/api/Events/ActionsMenuActionClickedEvent.ts","../src/front/api/Events/HasPlayerMovedEvent.ts","../src/front/api/Events/WasCameraUpdatedEvent.ts","../src/front/api/Events/AskPositionEvent.ts","../src/front/api/Events/LeaveMucEvent.ts","../src/front/api/Events/JoinMucEvent.ts","../src/front/api/Events/Ui/MenuItemClickedEvent.ts","../src/front/api/Events/AddPlayerEvent.ts","../src/front/api/Events/ProximityMeeting/JoinProximityMeetingEvent.ts","../src/front/api/Events/ProximityMeeting/ParticipantProximityMeetingEvent.ts","../src/front/api/Events/SetSharedPlayerVariableEvent.ts","../src/front/api/Events/EnablePlayersTrackingEvent.ts","../src/front/api/Events/SetPlayerVariableEvent.ts","../src/front/api/Events/SettingsEvent.ts","../src/front/api/Events/ChatVisibilityEvent.ts","../src/front/api/Events/NotificationEvent.ts","../src/front/api/Events/ShowBusinessCardEvent.ts","../src/front/api/Events/ModalEvent.ts","../src/front/api/Events/IframeEvent.ts","../src/front/api/Iframe/registeredCallbacks.ts","../src/front/api/Iframe/IframeApiContribution.ts","../node_modules/tslib/tslib.es6.js","../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","../node_modules/rxjs/dist/esm5/internal/Subscription.js","../node_modules/rxjs/dist/esm5/internal/config.js","../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","../node_modules/rxjs/dist/esm5/internal/util/noop.js","../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","../node_modules/rxjs/dist/esm5/internal/Subscriber.js","../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","../node_modules/rxjs/dist/esm5/internal/util/identity.js","../node_modules/rxjs/dist/esm5/internal/util/pipe.js","../node_modules/rxjs/dist/esm5/internal/Observable.js","../node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js","../node_modules/rxjs/dist/esm5/internal/Subject.js","../src/front/api/Iframe/chat.ts","../src/front/api/Iframe/nav.ts","../src/front/api/Iframe/controls.ts","../src/front/api/Iframe/Ui/Popup.ts","../src/front/api/Iframe/Ui/ActionMessage.ts","../src/front/api/Iframe/Ui/Menu.ts","../src/front/api/Iframe/Ui/UIWebsite.ts","../src/front/api/Iframe/Players/RemotePlayer.ts","../src/front/api/Iframe/Ui/Modal.ts","../src/front/api/Iframe/ui.ts","../src/front/api/Iframe/Sound/Sound.ts","../src/front/api/Iframe/sound.ts","../src/front/api/Iframe/Room/EmbeddedWebsite.ts","../src/front/api/Iframe/website.ts","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapChunk.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapFrame.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapGrid.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapProperty.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapImageLayer.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapPoint.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapText.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapObject.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapTileLayer.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapGroupLayer.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapObjectLayer.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapLayer.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapOffset.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapTerrain.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapTile.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapTransformations.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapWangColor.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapWangTile.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapWangSet.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMapTileset.js","../node_modules/@workadventure/tiled-map-type-guard/dist/ITiledMap.js","../node_modules/@workadventure/tiled-map-type-guard/dist/utility.js","../node_modules/@workadventure/tiled-map-type-guard/dist/index.js","../src/front/api/Iframe/Area/Area.ts","../src/front/api/Iframe/area.ts","../src/front/api/Iframe/room.ts","../src/front/api/Iframe/AbstractState.ts","../src/front/api/Iframe/state.ts","../src/front/api/Iframe/playerState.ts","../src/front/api/Iframe/Player/ProximityMeeting.ts","../src/front/api/Iframe/player.ts","../src/front/api/Iframe/players.ts","../src/front/api/Iframe/camera.ts","../src/iframe_api.ts"],"sourcesContent":["var util;\n(function (util) {\n    util.assertEqual = (val) => val;\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array\n            .map((val) => (typeof val === \"string\" ? `'${val}'` : val))\n            .join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nconst ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then &&\n                typeof data.then === \"function\" &&\n                data.catch &&\n                typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n\nconst ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nclass ZodError extends Error {\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    get errors() {\n        return this.issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be greater than ${issue.inclusive ? `or equal to ` : ``}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be greater than ${issue.inclusive ? `or equal to ` : ``}${new Date(issue.minimum)}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be less than ${issue.inclusive ? `or equal to ` : ``}${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be smaller than ${issue.inclusive ? `or equal to ` : ``}${new Date(issue.maximum)}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\n\nlet overrideErrorMap = errorMap;\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\n\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: issueData.message || errorMessage,\n    };\n};\nconst EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap,\n            ctx.schemaErrorMap,\n            getErrorMap(),\n            errorMap,\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            syncPairs.push({\n                key: await pair.key,\n                value: await pair.value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (typeof value.value !== \"undefined\" || pair.alwaysSet) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nconst INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nconst OK = (value) => ({ status: \"valid\", value });\nconst isAborted = (x) => x.status === \"aborted\";\nconst isDirty = (x) => x.status === \"dirty\";\nconst isValid = (x) => x.status === \"valid\";\nconst isAsync = (x) => typeof Promise !== undefined && x instanceof Promise;\n\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil || (errorUtil = {}));\n\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        return this._path.concat(this._key);\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        const error = new ZodError(ctx.common.issues);\n        return { success: false, error };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        if (typeof ctx.data === \"undefined\") {\n            return { message: required_error !== null && required_error !== void 0 ? required_error : ctx.defaultError };\n        }\n        return { message: invalid_type_error !== null && invalid_type_error !== void 0 ? invalid_type_error : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this.superRefine = this._refinement;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.default = this.default.bind(this);\n        this.describe = this.describe.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n    }\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        var _a;\n        const ctx = {\n            common: {\n                issues: [],\n                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n                async: true,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: [], parent: ctx });\n        const result = await (isAsync(maybeAsyncResult)\n            ? maybeAsyncResult\n            : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\"\n                    ? refinementData(val, ctx)\n                    : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    optional() {\n        return ZodOptional.create(this);\n    }\n    nullable() {\n        return ZodNullable.create(this);\n    }\n    nullish() {\n        return this.optional().nullable();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this);\n    }\n    or(option) {\n        return ZodUnion.create([this, option]);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(undefined),\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst uuidRegex = /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n// eslint-disable-next-line\nconst emailRegex = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\nclass ZodString extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._regex = (regex, validation, message) => this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n        /**\n         * @deprecated Use z.string().min(1) instead.\n         * @see {@link ZodString.min}\n         */\n        this.nonempty = (message) => this.min(1, errorUtil.errToObj(message));\n        this.trim = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            }\n            //\n            );\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch (_a) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this.min(len, message).max(len, message);\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / Math.pow(10, decCount);\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\");\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.bigint,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all(ctx.data.map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = ctx.data.map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return this.min(len, message).max(len, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////\n/////////////////////////////////////////\n//////////                     //////////\n//////////      ZodObject      //////////\n//////////                     //////////\n/////////////////////////////////////////\n/////////////////////////////////////////\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second,\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nconst AugmentFactory = (def) => (augmentation) => {\n    return new ZodObject({\n        ...def,\n        shape: () => ({\n            ...def.shape(),\n            ...augmentation,\n        }),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return ZodArray.create(deepPartialify(schema.element));\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        this.augment = AugmentFactory(this._def);\n        this.extend = AugmentFactory(this._def);\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        return (this._cached = { shape, keys });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever &&\n            this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") ;\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    syncPairs.push({\n                        key,\n                        value: await pair.value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        var _a, _b, _c, _d;\n                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        // const mergedShape = objectUtil.mergeShapes(\n        //   this._def.shape(),\n        //   merging._def.shape()\n        // );\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        util.objectKeys(mask).map((key) => {\n            // only add to shape if key corresponds to an element of the current shape\n            if (this.shape[key])\n                shape[key] = this.shape[key];\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        util.objectKeys(this.shape).map((key) => {\n            if (util.objectKeys(mask).indexOf(key) === -1) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        if (mask) {\n            util.objectKeys(this.shape).map((key) => {\n                if (util.objectKeys(mask).indexOf(key) === -1) {\n                    newShape[key] = this.shape[key];\n                }\n                else {\n                    newShape[key] = this.shape[key].optional();\n                }\n            });\n            return new ZodObject({\n                ...this._def,\n                shape: () => newShape,\n            });\n        }\n        else {\n            for (const key in this.shape) {\n                const fieldSchema = this.shape[key];\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required() {\n        const newShape = {};\n        for (const key in this.shape) {\n            const fieldSchema = this.shape[key];\n            let newField = fieldSchema;\n            while (newField instanceof ZodOptional) {\n                newField = newField._def.innerType;\n            }\n            newShape[key] = newField;\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.options.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: this.validDiscriminatorValues,\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get validDiscriminatorValues() {\n        return Array.from(this.options.keys());\n    }\n    get options() {\n        return this._def.options;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, types, params) {\n        // Get all the valid discriminator values\n        const options = new Map();\n        try {\n            types.forEach((type) => {\n                const discriminatorValue = type.shape[discriminator].value;\n                options.set(discriminatorValue, type);\n            });\n        }\n        catch (e) {\n            throw new Error(\"The discriminator value could not be extracted from all the provided schemas\");\n        }\n        // Assert that all the discriminator values are unique\n        if (options.size !== types.length) {\n            throw new Error(\"Some of the discriminator values are not unique\");\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util\n            .objectKeys(a)\n            .filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date &&\n        bType === ZodParsedType.date &&\n        +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = ctx.data\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nclass ZodMap extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            return OK(async (...args) => {\n                const error = new ZodError([]);\n                const parsedArgs = await this._def.args\n                    .parseAsync(args, params)\n                    .catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await fn(...parsedArgs);\n                const parsedReturns = await this._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            return OK((...args) => {\n                const parsedArgs = this._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = fn(...parsedArgs.data);\n                const parsedReturns = this._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args\n                ? args\n                : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (this._def.values.indexOf(input.data) === -1) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n}\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string &&\n            ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (nativeEnumValues.indexOf(input.data) === -1) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise &&\n            ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise\n            ? ctx.data\n            : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then((processed) => {\n                    return this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                });\n            }\n            else {\n                return this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc\n            // effect: RefinementEffect<any>\n            ) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                // if (base.status === \"aborted\") return INVALID;\n                // if (base.status === \"dirty\") {\n                //   return { status: \"dirty\", value: base.value };\n                // }\n                if (!isValid(base))\n                    return base;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((base) => {\n                    if (!isValid(base))\n                        return base;\n                    // if (base.status === \"aborted\") return INVALID;\n                    // if (base.status === \"dirty\") {\n                    //   return { status: \"dirty\", value: base.value };\n                    // }\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nconst BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nconst custom = (check, params = {}, fatal) => {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            if (!check(data)) {\n                const p = typeof params === \"function\" ? params(data) : params;\n                const p2 = typeof p === \"string\" ? { message: p } : p;\n                ctx.addIssue({ code: \"custom\", ...p2, fatal });\n            }\n        });\n    return ZodAny.create();\n};\nconst late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// new approach that works for abstract classes\n// but required TS 4.4+\n// abstract class Class {\n//   constructor(..._: any[]) {}\n// }\n// const instanceOfType = <T extends typeof Class>(\nconst instanceOfType = (cls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params, true);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nconst NEVER = INVALID;\n\nvar mod = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    getParsedType: getParsedType,\n    ZodParsedType: ZodParsedType,\n    defaultErrorMap: errorMap,\n    setErrorMap: setErrorMap,\n    getErrorMap: getErrorMap,\n    makeIssue: makeIssue,\n    EMPTY_PATH: EMPTY_PATH,\n    addIssueToContext: addIssueToContext,\n    ParseStatus: ParseStatus,\n    INVALID: INVALID,\n    DIRTY: DIRTY,\n    OK: OK,\n    isAborted: isAborted,\n    isDirty: isDirty,\n    isValid: isValid,\n    isAsync: isAsync,\n    ZodType: ZodType,\n    ZodString: ZodString,\n    ZodNumber: ZodNumber,\n    ZodBigInt: ZodBigInt,\n    ZodBoolean: ZodBoolean,\n    ZodDate: ZodDate,\n    ZodUndefined: ZodUndefined,\n    ZodNull: ZodNull,\n    ZodAny: ZodAny,\n    ZodUnknown: ZodUnknown,\n    ZodNever: ZodNever,\n    ZodVoid: ZodVoid,\n    ZodArray: ZodArray,\n    get objectUtil () { return objectUtil; },\n    ZodObject: ZodObject,\n    ZodUnion: ZodUnion,\n    ZodDiscriminatedUnion: ZodDiscriminatedUnion,\n    ZodIntersection: ZodIntersection,\n    ZodTuple: ZodTuple,\n    ZodRecord: ZodRecord,\n    ZodMap: ZodMap,\n    ZodSet: ZodSet,\n    ZodFunction: ZodFunction,\n    ZodLazy: ZodLazy,\n    ZodLiteral: ZodLiteral,\n    ZodEnum: ZodEnum,\n    ZodNativeEnum: ZodNativeEnum,\n    ZodPromise: ZodPromise,\n    ZodEffects: ZodEffects,\n    ZodTransformer: ZodEffects,\n    ZodOptional: ZodOptional,\n    ZodNullable: ZodNullable,\n    ZodDefault: ZodDefault,\n    ZodNaN: ZodNaN,\n    BRAND: BRAND,\n    ZodBranded: ZodBranded,\n    custom: custom,\n    Schema: ZodType,\n    ZodSchema: ZodType,\n    late: late,\n    get ZodFirstPartyTypeKind () { return ZodFirstPartyTypeKind; },\n    any: anyType,\n    array: arrayType,\n    bigint: bigIntType,\n    boolean: booleanType,\n    date: dateType,\n    discriminatedUnion: discriminatedUnionType,\n    effect: effectsType,\n    'enum': enumType,\n    'function': functionType,\n    'instanceof': instanceOfType,\n    intersection: intersectionType,\n    lazy: lazyType,\n    literal: literalType,\n    map: mapType,\n    nan: nanType,\n    nativeEnum: nativeEnumType,\n    never: neverType,\n    'null': nullType,\n    nullable: nullableType,\n    number: numberType,\n    object: objectType,\n    oboolean: oboolean,\n    onumber: onumber,\n    optional: optionalType,\n    ostring: ostring,\n    preprocess: preprocessType,\n    promise: promiseType,\n    record: recordType,\n    set: setType,\n    strictObject: strictObjectType,\n    string: stringType,\n    transformer: effectsType,\n    tuple: tupleType,\n    'undefined': undefinedType,\n    union: unionType,\n    unknown: unknownType,\n    'void': voidType,\n    NEVER: NEVER,\n    ZodIssueCode: ZodIssueCode,\n    quotelessJson: quotelessJson,\n    ZodError: ZodError\n});\n\nexport { BRAND, DIRTY, EMPTY_PATH, INVALID, NEVER, OK, ParseStatus, ZodType as Schema, ZodAny, ZodArray, ZodBigInt, ZodBoolean, ZodBranded, ZodDate, ZodDefault, ZodDiscriminatedUnion, ZodEffects, ZodEnum, ZodError, ZodFirstPartyTypeKind, ZodFunction, ZodIntersection, ZodIssueCode, ZodLazy, ZodLiteral, ZodMap, ZodNaN, ZodNativeEnum, ZodNever, ZodNull, ZodNullable, ZodNumber, ZodObject, ZodOptional, ZodParsedType, ZodPromise, ZodRecord, ZodType as ZodSchema, ZodSet, ZodString, ZodEffects as ZodTransformer, ZodTuple, ZodType, ZodUndefined, ZodUnion, ZodUnknown, ZodVoid, addIssueToContext, anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, custom, dateType as date, mod as default, errorMap as defaultErrorMap, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, getErrorMap, getParsedType, instanceOfType as instanceof, intersectionType as intersection, isAborted, isAsync, isDirty, isValid, late, lazyType as lazy, literalType as literal, makeIssue, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, objectUtil, oboolean, onumber, optionalType as optional, ostring, preprocessType as preprocess, promiseType as promise, quotelessJson, recordType as record, setType as set, setErrorMap, strictObjectType as strictObject, stringType as string, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, mod as z };\n","import { z } from \"zod\";\n\nexport const isChatEvent = z.object({\n    message: z.string(),\n    author: z.string(),\n});\n\nexport enum ChatMessageTypes {\n    text = 1,\n    me,\n    userIncoming,\n    userOutcoming,\n    userWriting,\n    userStopWriting,\n}\n\nexport const isChatMessageTypes = z.nativeEnum(ChatMessageTypes);\n\nexport const isChatMessage = z.object({\n    type: isChatMessageTypes,\n    date: z.date(),\n    author: z.optional(z.nullable(z.string())),\n    targets: z.optional(z.nullable(z.array(z.nullable(z.string())))),\n    text: z.optional(z.nullable(z.array(z.nullable(z.string())))),\n});\nexport type ChatMessage = z.infer<typeof isChatMessage>;\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type ChatEvent = z.infer<typeof isChatEvent>;\n","import { z } from \"zod\";\n\nexport const isClosePopupEvent = z.object({\n    popupId: z.number(),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type ClosePopupEvent = z.infer<typeof isClosePopupEvent>;\n","import { z } from \"zod\";\n\nexport const isGoToPageEvent = z.object({\n    url: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type GoToPageEvent = z.infer<typeof isGoToPageEvent>;\n","import { z } from \"zod\";\n\nexport const isLoadPageEvent = z.object({\n    url: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type LoadPageEvent = z.infer<typeof isLoadPageEvent>;\n","import { z } from \"zod\";\n\nexport const isOpenCoWebsiteEvent = z.object({\n    url: z.string(),\n    allowApi: z.boolean().optional(),\n    allowPolicy: z.optional(z.string()),\n    widthPercent: z.optional(z.number()),\n    position: z.optional(z.number()),\n    closable: z.boolean().optional(),\n    lazy: z.boolean().optional(),\n});\n\nexport const isCoWebsite = z.object({\n    id: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type OpenCoWebsiteEvent = z.infer<typeof isOpenCoWebsiteEvent>;\n","import { z } from \"zod\";\n\nexport const isButtonDescriptor = z.object({\n    label: z.string(),\n    className: z.optional(z.string()),\n});\n\nexport const isOpenPopupEvent = z.object({\n    popupId: z.number(),\n    targetObject: z.string(),\n    message: z.string(),\n    buttons: z.array(isButtonDescriptor),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type OpenPopupEvent = z.infer<typeof isOpenPopupEvent>;\n","import { z } from \"zod\";\n\nexport const isOpenTabEvent = z.object({\n    url: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type OpenTabEvent = z.infer<typeof isOpenTabEvent>;\n","import { z } from \"zod\";\n\nexport const isLayerEvent = z.object({\n    name: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to show/hide a layer.\n */\nexport type LayerEvent = z.infer<typeof isLayerEvent>;\n","import { z } from \"zod\";\n\nexport const isSetPropertyEvent = z.object({\n    layerName: z.string(),\n    propertyName: z.string(),\n    propertyValue: z.optional(z.union([z.string(), z.number(), z.boolean()])),\n});\n\n/**\n * A message sent from the iFrame to the game to change the value of the property of the layer\n */\nexport type SetPropertyEvent = z.infer<typeof isSetPropertyEvent>;\n","import { z } from \"zod\";\n\nexport const isLoadSoundEvent = z.object({\n    url: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type LoadSoundEvent = z.infer<typeof isLoadSoundEvent>;\n","import { z } from \"zod\";\n\nexport const isSoundConfig = z.object({\n    volume: z.optional(z.number()),\n    loop: z.boolean().optional(),\n    mute: z.boolean().optional(),\n    rate: z.optional(z.number()),\n    detune: z.optional(z.number()),\n    seek: z.optional(z.number()),\n    delay: z.optional(z.number()),\n});\n\nexport const isPlaySoundEvent = z.object({\n    url: z.string(),\n    config: z.optional(isSoundConfig),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type PlaySoundEvent = z.infer<typeof isPlaySoundEvent>;\n","import { z } from \"zod\";\n\nexport const isStopSoundEvent = z.object({\n    url: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type StopSoundEvent = z.infer<typeof isStopSoundEvent>;\n","import { z } from \"zod\";\n\nexport const isSetTilesEvent = z.array(\n    z.object({\n        x: z.number(),\n        y: z.number(),\n        tile: z.union([z.number(), z.string(), z.null()]),\n        layer: z.string(),\n    })\n);\n\n/**\n * A message sent from the iFrame to the game to set one or many tiles.\n */\nexport type SetTilesEvent = z.infer<typeof isSetTilesEvent>;\n","import { z } from \"zod\";\n\nexport const isGameStateEvent = z.object({\n    roomId: z.string(),\n    mapUrl: z.string(),\n    nickname: z.string(),\n    language: z.string().optional(),\n    playerId: z.number().optional(),\n    uuid: z.string().optional(),\n    startLayerName: z.string().optional(),\n    tags: z.string().array(),\n    variables: z.unknown(), // Todo : Typing\n    playerVariables: z.unknown(), // Todo : Typing\n    userRoomToken: z.string().optional(),\n    metadata: z.unknown().optional(),\n});\n\n/**\n * A message sent from the game to the iFrame when the gameState is received by the script\n */\nexport type GameStateEvent = z.infer<typeof isGameStateEvent>;\n","import { z } from \"zod\";\n\nexport const isMapDataEvent = z.object({\n    data: z.unknown(), // Todo : Typing\n});\n\n/**\n * A message sent from the game to the iFrame when the data of the layers change after the iFrame send a message to the game that it want to listen to the data of the layers\n */\nexport type MapDataEvent = z.infer<typeof isMapDataEvent>;\n","import { z } from \"zod\";\n\nexport const isSetVariableEvent = z.object({\n    key: z.string(),\n    value: z.unknown(),\n});\n\nexport const isSetVariableIframeEvent = z.object({\n    type: z.literal(\"setVariable\"),\n    data: isSetVariableEvent,\n});\n\n/**\n * A message sent from the iFrame to the game to change the value of the property of the layer\n */\nexport type SetVariableEvent = z.infer<typeof isSetVariableEvent>;\n","import { z } from \"zod\";\n\nexport const isRectangle = z.object({\n    x: z.number(),\n    y: z.number(),\n    width: z.number(),\n    height: z.number(),\n});\n\n// TODO: make a variation that is all optional (except for the name)\nexport type Rectangle = z.infer<typeof isRectangle>;\n\nexport const isEmbeddedWebsiteEvent = z.object({\n    name: z.string(),\n    url: z.optional(z.string()),\n    visible: z.boolean().optional(),\n    allowApi: z.boolean().optional(),\n    allow: z.optional(z.string()),\n    x: z.optional(z.number()),\n    y: z.optional(z.number()),\n    width: z.optional(z.number()),\n    height: z.optional(z.number()),\n    origin: z.optional(z.enum([\"player\", \"map\"])),\n    scale: z.optional(z.number()),\n});\n\n/**\n * A message sent from the iFrame to the game to modify an embedded website\n */\nexport type ModifyEmbeddedWebsiteEvent = z.infer<typeof isEmbeddedWebsiteEvent>;\n\nexport const isCreateEmbeddedWebsiteEvent = z.object({\n    name: z.string(),\n    url: z.string(),\n    position: isRectangle,\n    visible: z.boolean().optional(),\n    allowApi: z.boolean().optional(),\n    allow: z.optional(z.string()),\n    origin: z.optional(z.enum([\"player\", \"map\"])),\n    scale: z.optional(z.number()),\n});\n\nexport type CreateEmbeddedWebsiteEvent = z.infer<typeof isCreateEmbeddedWebsiteEvent>;\n","import { z } from \"zod\";\n\nexport const isLoadTilesetEvent = z.object({\n    url: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to add a message in the chat.\n */\nexport type LoadTilesetEvent = z.infer<typeof isLoadTilesetEvent>;\n","import { z } from \"zod\";\n\nexport const triggerActionMessage = \"triggerActionMessage\";\nexport const removeActionMessage = \"removeActionMessage\";\n\nexport const isActionMessageType = z.enum([\"message\", \"warning\"]);\n\nexport type ActionMessageType = z.infer<typeof isActionMessageType>;\n\nexport const isTriggerActionMessageEvent = z.object({\n    message: z.string(),\n    uuid: z.string(),\n    type: isActionMessageType,\n});\n\nexport type TriggerActionMessageEvent = z.infer<typeof isTriggerActionMessageEvent>;\n\nexport const isMessageReferenceEvent = z.object({\n    uuid: z.string(),\n});\n\nexport type MessageReferenceEvent = z.infer<typeof isMessageReferenceEvent>;\n","import { z } from \"zod\";\n\n/**\n * A message sent from a script to the game to remove a custom menu from the menu\n */\nexport const isUnregisterMenuEvent = z.object({\n    name: z.string(),\n});\n\nexport type UnregisterMenuEvent = z.infer<typeof isUnregisterMenuEvent>;\n\nexport const isMenuRegisterOptions = z.object({\n    allowApi: z.boolean(),\n});\n\n/**\n * A message sent from a script to the game to add a custom menu from the menu\n */\nexport const isMenuRegisterEvent = z.object({\n    name: z.string(),\n    iframe: z.optional(z.string()),\n    options: isMenuRegisterOptions,\n});\n\nexport type MenuRegisterEvent = z.infer<typeof isMenuRegisterEvent>;\n","import { z } from \"zod\";\n\nexport const isPlayerPosition = z.object({\n    x: z.number(),\n    y: z.number(),\n});\n\nexport type PlayerPosition = z.infer<typeof isPlayerPosition>;\n","import { z } from \"zod\";\n\nexport const isCameraSetEvent = z.object({\n    x: z.number(),\n    y: z.number(),\n    width: z.optional(z.number()),\n    height: z.optional(z.number()),\n    lock: z.boolean(),\n    smooth: z.boolean(),\n});\n\n/**\n * A message sent from the iFrame to the game to change the camera position.\n */\nexport type CameraSetEvent = z.infer<typeof isCameraSetEvent>;\n","import { z } from \"zod\";\n\nexport const isCameraFollowPlayerEvent = z.object({\n    smooth: z.boolean(),\n});\n\n/**\n * A message sent from the iFrame to the game to make the camera follow player.\n */\nexport type CameraFollowPlayerEvent = z.infer<typeof isCameraFollowPlayerEvent>;\n","import { z } from \"zod\";\n\nexport const isColorEvent = z.object({\n    red: z.number(),\n    green: z.number(),\n    blue: z.number(),\n});\n\n/**\n * A message sent from the iFrame to the game to dynamically set the outline of the player.\n */\nexport type ColorEvent = z.infer<typeof isColorEvent>;\n","import { z } from \"zod\";\n\nexport const isMovePlayerToEventConfig = z.object({\n    x: z.number(),\n    y: z.number(),\n    speed: z.optional(z.number()),\n});\n\nexport type MovePlayerToEvent = z.infer<typeof isMovePlayerToEventConfig>;\n","import { z } from \"zod\";\n\nexport const isMovePlayerToEventAnswer = z.object({\n    x: z.number(),\n    y: z.number(),\n    cancelled: z.boolean(),\n});\n\nexport type ActionsMenuActionClickedEvent = z.infer<typeof isMovePlayerToEventAnswer>;\n","import { z } from \"zod\";\n\nexport const isAddActionsMenuKeyToRemotePlayerEvent = z.object({\n    id: z.number(),\n    actionKey: z.string(),\n});\n\nexport type AddActionsMenuKeyToRemotePlayerEvent = z.infer<typeof isAddActionsMenuKeyToRemotePlayerEvent>;\n\nexport type AddActionsMenuKeyToRemotePlayerEventCallback = (event: AddActionsMenuKeyToRemotePlayerEvent) => void;\n","import { z } from \"zod\";\n\nexport const isRemoveActionsMenuKeyFromRemotePlayerEvent = z.object({\n    id: z.number(),\n    actionKey: z.string(),\n});\n\nexport type RemoveActionsMenuKeyFromRemotePlayerEvent = z.infer<typeof isRemoveActionsMenuKeyFromRemotePlayerEvent>;\n\nexport type RemoveActionsMenuKeyFromRemotePlayerEventCallback = (\n    event: RemoveActionsMenuKeyFromRemotePlayerEvent\n) => void;\n","import { z } from \"zod\";\n\nexport const isSetAreaPropertyEvent = z.object({\n    areaName: z.string(),\n    propertyName: z.string(),\n    propertyValue: z.optional(z.union([z.string(), z.number(), z.boolean()])),\n});\n\n/**\n * A message sent from the iFrame to the game to change the value of the property of the area\n */\nexport type SetAreaPropertyEvent = z.infer<typeof isSetAreaPropertyEvent>;\n","import { z } from \"zod\";\n\nconst regexUnit = /-*\\d+(px|em|%|cm|in|pc|pt|mm|ex|vw|vh|rem)|auto|inherit/;\n\n// Parse the string to check if is a valid CSS unit (px,%,vw,vh...)\nexport const isUIWebsiteCSSValue = z.string().regex(regexUnit);\n\nexport type UIWebsiteCSSValue = z.infer<typeof isUIWebsiteCSSValue>;\n\nexport const isUIWebsiteMargin = z.object({\n    top: isUIWebsiteCSSValue.optional(),\n    bottom: isUIWebsiteCSSValue.optional(),\n    left: isUIWebsiteCSSValue.optional(),\n    right: isUIWebsiteCSSValue.optional(),\n});\n\nexport type UIWebsiteMargin = z.infer<typeof isUIWebsiteMargin>;\n\nexport const isViewportPositionVertical = z.enum([\"top\", \"middle\", \"bottom\"]);\n\nexport type ViewportPositionVertical = z.infer<typeof isViewportPositionVertical>;\n\nexport const isViewportPositionHorizontal = z.enum([\"left\", \"middle\", \"right\"]);\n\nexport type ViewportPositionHorizontal = z.infer<typeof isViewportPositionHorizontal>;\n\nexport const isUIWebsitePosition = z.object({\n    vertical: isViewportPositionVertical,\n    horizontal: isViewportPositionHorizontal,\n});\n\nexport type UIWebsitePosition = z.infer<typeof isUIWebsitePosition>;\n\nexport const isUIWebsiteSize = z.object({\n    height: isUIWebsiteCSSValue,\n    width: isUIWebsiteCSSValue,\n});\n\nexport type UIWebsiteSize = z.infer<typeof isUIWebsiteSize>;\n\nexport const isCreateUIWebsiteEvent = z.object({\n    url: z.string(),\n    visible: z.boolean().optional(),\n    allowApi: z.boolean().optional(),\n    allowPolicy: z.optional(z.string()),\n    position: isUIWebsitePosition,\n    size: isUIWebsiteSize,\n    margin: isUIWebsiteMargin.optional(),\n});\n\nexport type CreateUIWebsiteEvent = z.infer<typeof isCreateUIWebsiteEvent>;\n\nexport const isModifyUIWebsiteEvent = z.object({\n    id: z.string(),\n    url: z.string().optional(),\n    visible: z.boolean().optional(),\n    position: isUIWebsitePosition.optional(),\n    size: isUIWebsiteSize.optional(),\n    margin: isUIWebsiteMargin.optional(),\n});\n\nexport type ModifyUIWebsiteEvent = z.infer<typeof isModifyUIWebsiteEvent>;\n\nexport const isUIWebsite = z.object({\n    id: z.string(),\n    url: z.string(),\n    visible: z.boolean(),\n    allowApi: z.boolean(),\n    allowPolicy: z.string(),\n    position: isUIWebsitePosition,\n    size: isUIWebsiteSize,\n    margin: isUIWebsiteMargin.optional(),\n});\n\nexport type UIWebsite = z.infer<typeof isUIWebsite>;\n","import { z } from \"zod\";\n\nexport const isAreaEvent = z.object({\n    name: z.string(),\n    x: z.optional(z.number()),\n    y: z.optional(z.number()),\n    width: z.optional(z.number()),\n    height: z.optional(z.number()),\n});\n\n/**\n * A message sent from the iFrame to the game to modify an embedded website\n */\nexport type ModifyAreaEvent = z.infer<typeof isAreaEvent>;\n\nexport const isCreateAreaEvent = z.object({\n    name: z.string(),\n    x: z.number(),\n    y: z.number(),\n    width: z.number(),\n    height: z.number(),\n});\n\nexport type CreateAreaEvent = z.infer<typeof isCreateAreaEvent>;\n","import { z } from \"zod\";\n\nexport const isUserInputChatEvent = z.object({\n    message: z.string(),\n});\n\n/**\n * A message sent from the game to the iFrame when a user types a message in the chat.\n */\nexport type UserInputChatEvent = z.infer<typeof isUserInputChatEvent>;\n","import { z } from \"zod\";\n\nexport const isEnterLeaveEvent = z.object({\n    name: z.string(),\n});\n\n/**\n * A message sent from the game to the iFrame when a user enters or leaves a zone marked with the \"zone\" property.\n */\nexport type EnterLeaveEvent = z.infer<typeof isEnterLeaveEvent>;\n","import { z } from \"zod\";\n\nexport const isChangeLayerEvent = z.object({\n    name: z.string(),\n});\n\n/**\n * A message sent from the game to the iFrame when a user enters or leaves a layer.\n */\nexport type ChangeLayerEvent = z.infer<typeof isChangeLayerEvent>;\n","import { z } from \"zod\";\n\nexport const isChangeAreaEvent = z.object({\n    name: z.string(),\n});\n\n/**\n * A message sent from the game to the iFrame when a user enters or leaves an area.\n */\nexport type ChangeAreaEvent = z.infer<typeof isChangeAreaEvent>;\n","import { z } from \"zod\";\n\nexport const isButtonClickedEvent = z.object({\n    popupId: z.number(),\n    buttonId: z.number(),\n});\n\n/**\n * A message sent from the game to the iFrame when a user enters or leaves a zone marked with the \"zone\" property.\n */\nexport type ButtonClickedEvent = z.infer<typeof isButtonClickedEvent>;\n","import { z } from \"zod\";\n\nexport const isActionsMenuActionClickedEvent = z.object({\n    id: z.number(),\n    actionName: z.string(),\n});\n\nexport type ActionsMenuActionClickedEvent = z.infer<typeof isActionsMenuActionClickedEvent>;\n\nexport type ActionsMenuActionClickedEventCallback = (event: ActionsMenuActionClickedEvent) => void;\n","import { z } from \"zod\";\n\nexport const isHasPlayerMovedEvent = z.object({\n    direction: z.enum([\"right\", \"left\", \"up\", \"down\"]),\n    moving: z.boolean(),\n    x: z.number(),\n    y: z.number(),\n    oldX: z.optional(z.number()),\n    oldY: z.optional(z.number()),\n});\n\n/**\n * A message sent from the game to the iFrame to notify a movement from the current player.\n */\nexport type HasPlayerMovedEvent = z.infer<typeof isHasPlayerMovedEvent>;\n\nexport type HasPlayerMovedEventCallback = (event: HasPlayerMovedEvent) => void;\n","import { z } from \"zod\";\n\nexport const isWasCameraUpdatedEvent = z.object({\n    x: z.number(),\n    y: z.number(),\n    width: z.number(),\n    height: z.number(),\n    zoom: z.number(),\n});\n\n/**\n * A message sent from the game to the iFrame to notify a movement from the camera.\n */\nexport type WasCameraUpdatedEvent = z.infer<typeof isWasCameraUpdatedEvent>;\n\nexport type WasCameraUpdatedEventCallback = (event: WasCameraUpdatedEvent) => void;\n","import { z } from \"zod\";\n\nexport const isAskPositionEvent = z.object({\n    uuid: z.string(),\n    playUri: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to ask the position of the user with uuid and walk to him.\n */\nexport type AskPositionEvent = z.infer<typeof isAskPositionEvent>;\n","import { z } from \"zod\";\n\nexport const isLeaveMucEvent = z.object({\n    url: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to change the camera position.\n */\nexport type LeaveMucEvent = z.infer<typeof isLeaveMucEvent>;\n","import { z } from \"zod\";\n\nexport const isJoinMucEvent = z.object({\n    url: z.string(),\n    name: z.string(),\n    type: z.string(),\n    subscribe: z.boolean(),\n});\n\n/**\n * A message sent from the iFrame to the game to change the camera position.\n */\nexport type JoinMucEvent = z.infer<typeof isJoinMucEvent>;\n","import { z } from \"zod\";\n\nexport const isMenuItemClickedEvent = z.object({\n    menuItem: z.string(),\n});\n\n/**\n * A message sent from the game to the iFrame when a menu item is clicked.\n */\nexport type MenuItemClickedEvent = z.infer<typeof isMenuItemClickedEvent>;\n","import { z } from \"zod\";\nimport { isPlayerPosition } from \"./PlayerPosition\";\n\nexport const isAddPlayerEvent = z.object({\n    playerId: z.number(),\n    name: z.string(),\n    userUuid: z.string(),\n    availabilityStatus: z.string(),\n    outlineColor: z.number().optional(),\n    position: isPlayerPosition,\n    variables: z.map(z.string(), z.unknown()),\n});\n\nexport const isRemotePlayerChangedEvent = isAddPlayerEvent\n    .omit({\n        userUuid: true,\n    })\n    .partial({\n        name: true,\n        availabilityStatus: true,\n        outlineColor: true,\n        position: true,\n        variables: true,\n    });\n\n/**\n * A message sent from the game to the iFrame to notify a new player arrived in our viewport\n */\nexport type AddPlayerEvent = z.infer<typeof isAddPlayerEvent>;\n/**\n * A message sent from the game to the iFrame to notify a player has changed (moved / changed name, etc...)\n */\nexport type RemotePlayerChangedEvent = z.infer<typeof isRemotePlayerChangedEvent>;\n","import { z } from \"zod\";\nimport { isAddPlayerEvent } from \"../AddPlayerEvent\";\n\nexport const isJoinProximityMeetingEvent = z.object({\n    users: isAddPlayerEvent.array(),\n});\n\nexport type JoinProximityMeetingEvent = z.infer<typeof isJoinProximityMeetingEvent>;\n","import { z } from \"zod\";\nimport { isAddPlayerEvent } from \"../AddPlayerEvent\";\n\nexport const isParticipantProximityMeetingEvent = z.object({\n    user: isAddPlayerEvent,\n});\n\nexport type ParticipantProximityMeetingEvent = z.infer<typeof isParticipantProximityMeetingEvent>;\n","import { z } from \"zod\";\n\nexport const isSetSharedPlayerVariableEvent = z.object({\n    key: z.string(),\n    value: z.unknown(),\n    playerId: z.number(),\n});\n\n/**\n * A message sent from the iFrame to the game to change the value of the property of the layer\n */\nexport type SetSharedPlayerVariableEvent = z.infer<typeof isSetSharedPlayerVariableEvent>;\n","import { z } from \"zod\";\n\nexport const isEnablePlayersTrackingEvent = z.object({\n    players: z.boolean(),\n    movement: z.boolean(),\n});\n\n/**\n * A message sent from the game to the iFrame to notify the game that the iframe is interested in tracking users.\n */\nexport type EnablePlayersTrackingEvent = z.infer<typeof isEnablePlayersTrackingEvent>;\n","import { z } from \"zod\";\n\nexport const isSetPlayerVariableEvent = z.object({\n    key: z.string(),\n    value: z.unknown(),\n    public: z.boolean(),\n    persist: z.boolean(),\n    ttl: z.number().optional(),\n    scope: z.union([z.literal(\"room\"), z.literal(\"world\")]),\n});\n\n/**\n * A message sent from the iFrame to the game to set a variable related to the player\n */\nexport type SetPlayerVariableEvent = z.infer<typeof isSetPlayerVariableEvent>;\n","import { z } from \"zod\";\n\nexport const isSettingsEvent = z.object({\n    notification: z.boolean(),\n    chatSounds: z.boolean(),\n    enableChat: z.boolean(),\n    enableChatUpload: z.boolean(),\n});\n\nexport type SettingsEvent = z.infer<typeof isSettingsEvent>;\n","import { z } from \"zod\";\n\nexport const isChatVisibilityEvent = z.object({\n    visibility: z.boolean(),\n});\n\nexport type ChatVisibilityEvent = z.infer<typeof isChatVisibilityEvent>;\n","import { z } from \"zod\";\n\nexport const isNotificationEvent = z.object({\n    userName: z.string(),\n    notificationType: z.number(),\n    forum: z.optional(z.nullable(z.string())),\n});\n\n/**\n * A message sent from the iFrame to the game to emit a notification.\n */\nexport type NotificationEvent = z.infer<typeof isNotificationEvent>;\n","import { z } from \"zod\";\n\nexport const isShowBusinessCardEvent = z.object({\n    visitCardUrl: z.string(),\n});\n\n/**\n * A message sent from the iFrame to the game to emit a notification.\n */\nexport type ShowBusinessCardEvent = z.infer<typeof isShowBusinessCardEvent>;\n","import { z } from \"zod\";\n\nexport const isModalEvent = z.object({\n    src: z.string(),\n    allow: z.string().optional().nullable().default(null),\n    tiltle: z.string().optional().default(\"WorkAdventure modal iframe\"),\n    position: z.string().optional().default(\"right\"),\n    allowApi: z.boolean().optional().default(false),\n});\n\n/**\n * A message sent from the iFrame to the game to emit a notification.\n */\nexport type ModalEvent = z.infer<typeof isModalEvent>;\n","import { z } from \"zod\";\nimport { isChatEvent, isChatMessage } from \"./ChatEvent\";\nimport { isClosePopupEvent } from \"./ClosePopupEvent\";\nimport { isGoToPageEvent } from \"./GoToPageEvent\";\nimport { isLoadPageEvent } from \"./LoadPageEvent\";\nimport { isCoWebsite, isOpenCoWebsiteEvent } from \"./OpenCoWebsiteEvent\";\nimport { isOpenPopupEvent } from \"./OpenPopupEvent\";\nimport { isOpenTabEvent } from \"./OpenTabEvent\";\nimport { isLayerEvent } from \"./LayerEvent\";\nimport { isSetPropertyEvent } from \"./SetPropertyEvent\";\nimport { isLoadSoundEvent } from \"./LoadSoundEvent\";\nimport { isPlaySoundEvent } from \"./PlaySoundEvent\";\nimport { isStopSoundEvent } from \"./StopSoundEvent\";\nimport { isSetTilesEvent } from \"./SetTilesEvent\";\nimport { isGameStateEvent } from \"./GameStateEvent\";\nimport { isMapDataEvent } from \"./MapDataEvent\";\nimport { isSetVariableEvent } from \"./SetVariableEvent\";\nimport { isCreateEmbeddedWebsiteEvent, isEmbeddedWebsiteEvent } from \"./EmbeddedWebsiteEvent\";\nimport { isLoadTilesetEvent } from \"./LoadTilesetEvent\";\nimport { isMessageReferenceEvent, isTriggerActionMessageEvent } from \"./Ui/TriggerActionMessageEvent\";\nimport { isMenuRegisterEvent, isUnregisterMenuEvent } from \"./Ui/MenuRegisterEvent\";\nimport { isPlayerPosition } from \"./PlayerPosition\";\nimport { isCameraSetEvent } from \"./CameraSetEvent\";\nimport { isCameraFollowPlayerEvent } from \"./CameraFollowPlayerEvent\";\nimport { isColorEvent } from \"./ColorEvent\";\nimport { isMovePlayerToEventConfig } from \"./MovePlayerToEvent\";\nimport { isMovePlayerToEventAnswer } from \"./MovePlayerToEventAnswer\";\nimport { isAddActionsMenuKeyToRemotePlayerEvent } from \"./AddActionsMenuKeyToRemotePlayerEvent\";\nimport { isRemoveActionsMenuKeyFromRemotePlayerEvent } from \"./RemoveActionsMenuKeyFromRemotePlayerEvent\";\nimport { isSetAreaPropertyEvent } from \"./SetAreaPropertyEvent\";\nimport { isCreateUIWebsiteEvent, isModifyUIWebsiteEvent, isUIWebsite } from \"./Ui/UIWebsite\";\nimport { isAreaEvent, isCreateAreaEvent } from \"./CreateAreaEvent\";\nimport { isUserInputChatEvent } from \"./UserInputChatEvent\";\nimport { isEnterLeaveEvent } from \"./EnterLeaveEvent\";\nimport { isChangeLayerEvent } from \"./ChangeLayerEvent\";\nimport { isChangeAreaEvent } from \"./ChangeAreaEvent\";\nimport { isButtonClickedEvent } from \"./ButtonClickedEvent\";\nimport { isActionsMenuActionClickedEvent } from \"./ActionsMenuActionClickedEvent\";\nimport { isHasPlayerMovedEvent } from \"./HasPlayerMovedEvent\";\nimport { isWasCameraUpdatedEvent } from \"./WasCameraUpdatedEvent\";\nimport { isAskPositionEvent } from \"./AskPositionEvent\";\nimport { isLeaveMucEvent } from \"./LeaveMucEvent\";\nimport { isJoinMucEvent } from \"./JoinMucEvent\";\nimport { isMenuItemClickedEvent } from \"./Ui/MenuItemClickedEvent\";\nimport { isJoinProximityMeetingEvent } from \"./ProximityMeeting/JoinProximityMeetingEvent\";\nimport { isParticipantProximityMeetingEvent } from \"./ProximityMeeting/ParticipantProximityMeetingEvent\";\nimport { isSetSharedPlayerVariableEvent } from \"./SetSharedPlayerVariableEvent\";\nimport { isEnablePlayersTrackingEvent } from \"./EnablePlayersTrackingEvent\";\nimport { isAddPlayerEvent, isRemotePlayerChangedEvent } from \"./AddPlayerEvent\";\nimport { isSetPlayerVariableEvent } from \"./SetPlayerVariableEvent\";\nimport { isSettingsEvent } from \"./SettingsEvent\";\nimport { isChatVisibilityEvent } from \"./ChatVisibilityEvent\";\nimport { isNotificationEvent } from \"./NotificationEvent\";\nimport { isShowBusinessCardEvent } from \"./ShowBusinessCardEvent\";\nimport { isModalEvent } from \"./ModalEvent\";\n\nexport interface TypedMessageEvent<T> extends MessageEvent {\n    data: T;\n}\n\n/**\n * List event types sent from an iFrame to WorkAdventure\n */\nexport const isIframeEventWrapper = z.union([\n    z.object({\n        type: z.literal(\"addActionsMenuKeyToRemotePlayer\"),\n        data: isAddActionsMenuKeyToRemotePlayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"removeActionsMenuKeyFromRemotePlayer\"),\n        data: isRemoveActionsMenuKeyFromRemotePlayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"loadPage\"),\n        data: isLoadPageEvent,\n    }),\n    z.object({\n        type: z.literal(\"chat\"),\n        data: isChatEvent,\n    }),\n    z.object({\n        type: z.literal(\"openChat\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"closeChat\"),\n        data: z.undefined(),\n    }),\n    /* @deprecated with new service chat messagerie */\n    z.object({\n        type: z.literal(\"addPersonnalMessage\"),\n        data: z.string(),\n    }),\n    z.object({\n        type: z.literal(\"newChatMessageWritingStatus\"),\n        data: z.number(),\n    }),\n    z.object({\n        type: z.literal(\"cameraFollowPlayer\"),\n        data: isCameraFollowPlayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"cameraSet\"),\n        data: isCameraSetEvent,\n    }),\n    z.object({\n        type: z.literal(\"openPopup\"),\n        data: isOpenPopupEvent,\n    }),\n    z.object({\n        type: z.literal(\"closePopup\"),\n        data: isClosePopupEvent,\n    }),\n    z.object({\n        type: z.literal(\"openTab\"),\n        data: isOpenTabEvent,\n    }),\n    z.object({\n        type: z.literal(\"goToPage\"),\n        data: isGoToPageEvent,\n    }),\n    z.object({\n        type: z.literal(\"turnOffMicrophone\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"turnOffWebcam\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"disableMicrophone\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"restoreMicrophone\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"disableWebcam\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"restoreWebcam\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"disablePlayerControls\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"restorePlayerControls\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"disablePlayerProximityMeeting\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"restorePlayerProximityMeeting\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"displayBubble\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"removeBubble\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"onPlayerMove\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"onCameraUpdate\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"showLayer\"),\n        data: isLayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"hideLayer\"),\n        data: isLayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"setProperty\"),\n        data: isSetPropertyEvent,\n    }),\n    z.object({\n        type: z.literal(\"setAreaProperty\"),\n        data: isSetAreaPropertyEvent,\n    }),\n    z.object({\n        type: z.literal(\"loadSound\"),\n        data: isLoadSoundEvent,\n    }),\n    z.object({\n        type: z.literal(\"playSound\"),\n        data: isPlaySoundEvent,\n    }),\n    z.object({\n        type: z.literal(\"stopSound\"),\n        data: isStopSoundEvent,\n    }),\n    z.object({\n        type: z.literal(\"registerMenu\"),\n        data: isMenuRegisterEvent,\n    }),\n    z.object({\n        type: z.literal(\"unregisterMenu\"),\n        data: isUnregisterMenuEvent,\n    }),\n    z.object({\n        type: z.literal(\"setTiles\"),\n        data: isSetTilesEvent,\n    }),\n    z.object({\n        type: z.literal(\"modifyEmbeddedWebsite\"),\n        data: isEmbeddedWebsiteEvent,\n    }),\n    z.object({\n        type: z.literal(\"modifyUIWebsite\"),\n        data: isModifyUIWebsiteEvent,\n    }),\n    z.object({\n        type: z.literal(\"modifyArea\"),\n        data: isAreaEvent,\n    }),\n    z.object({\n        type: z.literal(\"askPosition\"),\n        data: isAskPositionEvent,\n    }),\n    z.object({\n        type: z.literal(\"openInviteMenu\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"chatTotalMessagesToSee\"),\n        data: z.number(),\n    }),\n    z.object({\n        type: z.literal(\"notification\"),\n        data: isNotificationEvent,\n    }),\n    z.object({\n        type: z.literal(\"login\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"refresh\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"showBusinessCard\"),\n        data: isShowBusinessCardEvent,\n    }),\n    z.object({\n        type: z.literal(\"openModal\"),\n        data: isModalEvent,\n    }),\n    z.object({\n        type: z.literal(\"closeModal\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"redirectPricing\"),\n        data: z.undefined(),\n    }),\n]);\n\nexport type IframeEvent = z.infer<typeof isIframeEventWrapper>;\n\nexport const isIframeResponseEvent = z.union([\n    z.object({\n        type: z.literal(\"userInputChat\"),\n        data: isUserInputChatEvent,\n    }),\n    z.object({\n        type: z.literal(\"joinProximityMeetingEvent\"),\n        data: isJoinProximityMeetingEvent,\n    }),\n    z.object({\n        type: z.literal(\"participantJoinProximityMeetingEvent\"),\n        data: isParticipantProximityMeetingEvent,\n    }),\n    z.object({\n        type: z.literal(\"participantLeaveProximityMeetingEvent\"),\n        data: isParticipantProximityMeetingEvent,\n    }),\n    z.object({\n        type: z.literal(\"leaveProximityMeetingEvent\"),\n        data: z.undefined(),\n    }),\n    z.object({\n        type: z.literal(\"enterEvent\"),\n        data: isEnterLeaveEvent,\n    }),\n    z.object({\n        type: z.literal(\"leaveEvent\"),\n        data: isEnterLeaveEvent,\n    }),\n    z.object({\n        type: z.literal(\"enterLayerEvent\"),\n        data: isChangeLayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"leaveLayerEvent\"),\n        data: isChangeLayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"enterAreaEvent\"),\n        data: isChangeAreaEvent,\n    }),\n    z.object({\n        type: z.literal(\"leaveAreaEvent\"),\n        data: isChangeAreaEvent,\n    }),\n    z.object({\n        type: z.literal(\"buttonClickedEvent\"),\n        data: isButtonClickedEvent,\n    }),\n    z.object({\n        type: z.literal(\"remotePlayerClickedEvent\"),\n        data: isAddPlayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"actionsMenuActionClickedEvent\"),\n        data: isActionsMenuActionClickedEvent,\n    }),\n    z.object({\n        type: z.literal(\"hasPlayerMoved\"),\n        data: isHasPlayerMovedEvent,\n    }),\n    z.object({\n        type: z.literal(\"wasCameraUpdated\"),\n        data: isWasCameraUpdatedEvent,\n    }),\n    z.object({\n        type: z.literal(\"menuItemClicked\"),\n        data: isMenuItemClickedEvent,\n    }),\n    z.object({\n        type: z.literal(\"setVariable\"),\n        data: isSetVariableEvent,\n    }),\n    z.object({\n        type: z.literal(\"setPlayerVariable\"),\n        data: isSetVariableEvent,\n    }),\n    z.object({\n        type: z.literal(\"setSharedPlayerVariable\"),\n        data: isSetSharedPlayerVariableEvent,\n    }),\n    z.object({\n        type: z.literal(\"messageTriggered\"),\n        data: isMessageReferenceEvent,\n    }),\n    z.object({\n        type: z.literal(\"leaveMuc\"),\n        data: isLeaveMucEvent,\n    }),\n    z.object({\n        type: z.literal(\"joinMuc\"),\n        data: isJoinMucEvent,\n    }),\n    z.object({\n        type: z.literal(\"addRemotePlayer\"),\n        data: isAddPlayerEvent,\n    }),\n    z.object({\n        type: z.literal(\"removeRemotePlayer\"),\n        data: z.number(),\n    }),\n    z.object({\n        type: z.literal(\"remotePlayerChanged\"),\n        data: isRemotePlayerChangedEvent,\n    }),\n    z.object({\n        type: z.literal(\"settings\"),\n        data: isSettingsEvent,\n    }),\n    z.object({\n        type: z.literal(\"chatVisibility\"),\n        data: isChatVisibilityEvent,\n    }),\n    z.object({\n        type: z.literal(\"availabilityStatus\"),\n        data: z.number(),\n    }),\n\n    // TODO will be deleted if timeline is becoming a MUC room\n    z.object({\n        type: z.literal(\"peerConnectionStatus\"),\n        data: z.boolean(),\n    }),\n    z.object({\n        type: z.literal(\"comingUser\"),\n        data: isChatMessage,\n    }),\n    z.object({\n        type: z.literal(\"addChatMessage\"),\n        data: isChatMessage,\n    }),\n    z.object({\n        type: z.literal(\"updateWritingStatusChatList\"),\n        data: z.array(z.nullable(z.string())),\n    }),\n]);\nexport type IframeResponseEvent = z.infer<typeof isIframeResponseEvent>;\n\nexport const isLookingLikeIframeEventWrapper = z.object({\n    type: z.string(),\n    data: z.unknown().optional(),\n});\n\n/**\n * List event types sent from an iFrame to WorkAdventure that expect a unique answer from WorkAdventure along the type for the answer from WorkAdventure to the iFrame.\n * Types are defined using Type guards that will actually bused to enforce and check types.\n */\nexport const iframeQueryMapTypeGuards = {\n    getState: {\n        query: z.undefined(),\n        answer: isGameStateEvent,\n    },\n    getMapData: {\n        query: z.undefined(),\n        answer: isMapDataEvent,\n    },\n    setVariable: {\n        query: isSetVariableEvent,\n        answer: z.undefined(),\n    },\n    setPlayerVariable: {\n        query: isSetPlayerVariableEvent,\n        answer: z.undefined(),\n    },\n    loadTileset: {\n        query: isLoadTilesetEvent,\n        answer: z.number(),\n    },\n    openCoWebsite: {\n        query: isOpenCoWebsiteEvent,\n        answer: isCoWebsite,\n    },\n    getCoWebsites: {\n        query: z.undefined(),\n        answer: z.array(isCoWebsite),\n    },\n    closeCoWebsite: {\n        query: z.string(),\n        answer: z.undefined(),\n    },\n    closeCoWebsites: {\n        query: z.undefined(),\n        answer: z.undefined(),\n    },\n    triggerActionMessage: {\n        query: isTriggerActionMessageEvent,\n        answer: z.undefined(),\n    },\n    removeActionMessage: {\n        query: isMessageReferenceEvent,\n        answer: z.undefined(),\n    },\n    getEmbeddedWebsite: {\n        query: z.string(),\n        answer: isCreateEmbeddedWebsiteEvent,\n    },\n    deleteEmbeddedWebsite: {\n        query: z.string(),\n        answer: z.undefined(),\n    },\n    createEmbeddedWebsite: {\n        query: isCreateEmbeddedWebsiteEvent,\n        answer: z.undefined(),\n    },\n    createArea: {\n        query: isCreateAreaEvent,\n        answer: z.undefined(),\n    },\n    getArea: {\n        query: z.string(),\n        answer: isCreateAreaEvent,\n    },\n    modifyArea: {\n        query: isAreaEvent,\n        answer: z.undefined(),\n    },\n    deleteArea: {\n        query: z.string(),\n        answer: z.undefined(),\n    },\n    setPlayerOutline: {\n        query: isColorEvent,\n        answer: z.undefined(),\n    },\n    removePlayerOutline: {\n        query: z.undefined(),\n        answer: z.undefined(),\n    },\n    getPlayerPosition: {\n        query: z.undefined(),\n        answer: isPlayerPosition,\n    },\n    movePlayerTo: {\n        query: isMovePlayerToEventConfig,\n        answer: isMovePlayerToEventAnswer,\n    },\n    openUIWebsite: {\n        query: isCreateUIWebsiteEvent,\n        answer: isUIWebsite,\n    },\n    closeUIWebsite: {\n        query: z.string(),\n        answer: z.undefined(),\n    },\n    getUIWebsites: {\n        query: z.undefined(),\n        answer: z.array(isUIWebsite),\n    },\n    enablePlayersTracking: {\n        query: isEnablePlayersTrackingEvent,\n        answer: z.array(isAddPlayerEvent),\n    },\n};\n\ntype IframeQueryMapTypeGuardsType = typeof iframeQueryMapTypeGuards;\ntype UnknownToVoid<T> = undefined extends T ? void : T;\n\nexport type IframeQueryMap = {\n    [key in keyof IframeQueryMapTypeGuardsType]: {\n        query: z.infer<typeof iframeQueryMapTypeGuards[key][\"query\"]>;\n        answer: UnknownToVoid<z.infer<typeof iframeQueryMapTypeGuards[key][\"answer\"]>>;\n    };\n};\n\nexport interface IframeQuery<T extends keyof IframeQueryMap> {\n    type: T;\n    data: IframeQueryMap[T][\"query\"];\n}\n\nexport interface IframeQueryWrapper<T extends keyof IframeQueryMap> {\n    id: number;\n    query: IframeQuery<T>;\n}\n\nexport const isIframeQueryKey = (type: string): type is keyof IframeQueryMap => {\n    return type in iframeQueryMapTypeGuards;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isIframeQuery = (event: any): event is IframeQuery<keyof IframeQueryMap> => {\n    const type = event.type;\n    if (typeof type !== \"string\") {\n        return false;\n    }\n    if (!isIframeQueryKey(type)) {\n        return false;\n    }\n\n    try {\n        iframeQueryMapTypeGuards[type].query.parse(event.data);\n    } catch (err) {\n        if (err instanceof z.ZodError) {\n            console.error(err.issues);\n        }\n        console.warn('Received a query with type \"' + type + '\" but the payload is invalid.');\n\n        return false;\n    }\n\n    return true;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isIframeQueryWrapper = (event: any): event is IframeQueryWrapper<keyof IframeQueryMap> =>\n    typeof event.id === \"number\" && isIframeQuery(event.query);\n\nexport interface IframeAnswerEvent<T extends keyof IframeQueryMap> {\n    id: number;\n    type: T;\n    data: IframeQueryMap[T][\"answer\"];\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isIframeAnswerEvent = (event: any): event is IframeAnswerEvent<keyof IframeQueryMap> =>\n    typeof event.type === \"string\" && typeof event.id === \"number\";\n\n/*export interface IframeErrorAnswerEvent {\n    id: number;\n    type: keyof IframeQueryMap;\n    error: string;\n}\n\nexport const isIframeErrorAnswerEvent = (event: {\n    type?: string;\n    id?: number;\n    error?: string;\n}): event is IframeErrorAnswerEvent =>\n    typeof event.type === \"string\" && typeof event.id === \"number\" && typeof event.error === \"string\";*/\n\nexport const isIframeErrorAnswerEvent = z.object({\n    id: z.number(),\n    type: z.string(),\n    error: z.string(),\n});\n\n/**\n * A message sent from the game to the iFrame when a user enters or leaves a zone.\n */\nexport type IframeErrorAnswerEvent = z.infer<typeof isIframeErrorAnswerEvent>;\n","import { IframeResponseEvent } from \"../Events/IframeEvent\";\n\nexport const registeredCallbacks: {\n    [K in IframeResponseEvent[\"type\"]]?: ((event: Extract<IframeResponseEvent, { type: K }>[\"data\"]) => void)[];\n} = {};\n\nexport function apiCallback<T extends IframeResponseEvent[\"type\"]>(callbackData: {\n    type: T;\n    callback: (event: Extract<IframeResponseEvent, { type: T }>[\"data\"]) => void;\n}): {\n    type: T;\n    callback: (event: Extract<IframeResponseEvent, { type: T }>[\"data\"]) => void;\n} {\n    if (registeredCallbacks[callbackData.type] === undefined) {\n        registeredCallbacks[callbackData.type] = [];\n    }\n    // TODO: we probably need to reverse the way this works, like in IframeListener, with a class exposing streams of observers\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    registeredCallbacks[callbackData.type].push(callbackData.callback);\n\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    return callbackData;\n}\n","import type { IframeEvent, IframeQuery, IframeQueryMap } from \"../Events/IframeEvent\";\nimport type { IframeQueryWrapper } from \"../Events/IframeEvent\";\n\nexport function sendToWorkadventure(content: IframeEvent) {\n    window.parent.postMessage(content, \"*\");\n}\n\nlet queryNumber = 0;\n\nexport const answerPromises = new Map<\n    number,\n    {\n        resolve: (\n            value:\n                | IframeQueryMap[keyof IframeQueryMap][\"answer\"]\n                | PromiseLike<IframeQueryMap[keyof IframeQueryMap][\"answer\"]>\n        ) => void;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        reject: (reason?: any) => void;\n    }\n>();\n\nexport function queryWorkadventure<T extends keyof IframeQueryMap>(\n    content: IframeQuery<T>\n): Promise<IframeQueryMap[T][\"answer\"]> {\n    return new Promise<IframeQueryMap[T][\"answer\"]>((resolve, reject) => {\n        window.parent.postMessage(\n            {\n                id: queryNumber,\n                query: content,\n            } as IframeQueryWrapper<T>,\n            \"*\"\n        );\n\n        answerPromises.set(queryNumber, {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            resolve,\n            reject,\n        });\n\n        queryNumber++;\n    });\n}\n\n/**\n * !! be aware that the implemented attributes (addMethodsAtRoot and subObjectIdentifier) must be readonly\n *\n *\n */\n\nexport abstract class IframeApiContribution<\n    T extends {\n        callbacks: unknown[];\n    }\n> {\n    abstract callbacks: T[\"callbacks\"];\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { createErrorClass } from './createErrorClass';\nexport var ObjectUnsubscribedError = createErrorClass(function (_super) {\n    return function ObjectUnsubscribedErrorImpl() {\n        _super(this);\n        this.name = 'ObjectUnsubscribedError';\n        this.message = 'object unsubscribed';\n    };\n});\n//# sourceMappingURL=ObjectUnsubscribedError.js.map","import { __extends, __values } from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscription, EMPTY_SUBSCRIPTION } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { arrRemove } from './util/arrRemove';\nimport { errorContext } from './util/errorContext';\nvar Subject = (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.closed = false;\n        _this.currentObservers = null;\n        _this.observers = [];\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype._throwIfClosed = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n    };\n    Subject.prototype.next = function (value) {\n        var _this = this;\n        errorContext(function () {\n            var e_1, _a;\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                if (!_this.currentObservers) {\n                    _this.currentObservers = Array.from(_this.observers);\n                }\n                try {\n                    for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var observer = _c.value;\n                        observer.next(value);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    };\n    Subject.prototype.error = function (err) {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.hasError = _this.isStopped = true;\n                _this.thrownError = err;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().error(err);\n                }\n            }\n        });\n    };\n    Subject.prototype.complete = function () {\n        var _this = this;\n        errorContext(function () {\n            _this._throwIfClosed();\n            if (!_this.isStopped) {\n                _this.isStopped = true;\n                var observers = _this.observers;\n                while (observers.length) {\n                    observers.shift().complete();\n                }\n            }\n        });\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = this.closed = true;\n        this.observers = this.currentObservers = null;\n    };\n    Object.defineProperty(Subject.prototype, \"observed\", {\n        get: function () {\n            var _a;\n            return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Subject.prototype._trySubscribe = function (subscriber) {\n        this._throwIfClosed();\n        return _super.prototype._trySubscribe.call(this, subscriber);\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        this._throwIfClosed();\n        this._checkFinalizedStatuses(subscriber);\n        return this._innerSubscribe(subscriber);\n    };\n    Subject.prototype._innerSubscribe = function (subscriber) {\n        var _this = this;\n        var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n        if (hasError || isStopped) {\n            return EMPTY_SUBSCRIPTION;\n        }\n        this.currentObservers = null;\n        observers.push(subscriber);\n        return new Subscription(function () {\n            _this.currentObservers = null;\n            arrRemove(observers, subscriber);\n        });\n    };\n    Subject.prototype._checkFinalizedStatuses = function (subscriber) {\n        var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n        if (hasError) {\n            subscriber.error(thrownError);\n        }\n        else if (isStopped) {\n            subscriber.complete();\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var _a, _b;\n        (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var _a, _b;\n        return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map","import { UserInputChatEvent } from \"../Events/UserInputChatEvent\";\nimport { IframeApiContribution, sendToWorkadventure } from \"./IframeApiContribution\";\nimport { apiCallback } from \"./registeredCallbacks\";\nimport { Subject } from \"rxjs\";\n\nconst chatStream = new Subject<string>();\n\nexport class WorkadventureChatCommands extends IframeApiContribution<WorkadventureChatCommands> {\n    callbacks = [\n        apiCallback({\n            callback: (event: UserInputChatEvent) => {\n                chatStream.next(event.message);\n            },\n            type: \"userInputChat\",\n        }),\n    ];\n\n    /**\n     * Open instantly the chat window.\n     * {@link https://workadventu.re/map-building/api-chat.md#open-the-chat-window | Website documentation}\n     */\n    open(): void {\n        sendToWorkadventure({ type: \"openChat\", data: undefined });\n    }\n\n    /**\n     * Close instantly the chat window.\n     * {@link https://workadventu.re/map-building/api-chat.md#close-the-chat-window | Website documentation}\n     */\n    close(): void {\n        sendToWorkadventure({ type: \"closeChat\", data: undefined });\n    }\n\n    /**\n     * Sends a message in the chat. The message is only visible in the browser of the current user.\n     * {@link https://workadventu.re/map-building/api-chat.md#sending-a-message-in-the-chat | Website documentation}\n     *\n     * @param {string} message Message to be displayed in the chat\n     * @param {string|undefined} author Name displayed for the author of the message. It does not have to be a real user\n     */\n    sendChatMessage(message: string, author?: string): void {\n        sendToWorkadventure({\n            type: \"chat\",\n            data: {\n                message: message,\n                author: author ?? \"System\",\n            },\n        });\n    }\n\n    /**\n     * Listens to messages typed by the current user and calls the callback. Messages from other users in the chat cannot be listened to.\n     * {@link https://workadventu.re/map-building/api-chat.md#listening-to-messages-from-the-chat | Website documentation}\n     *\n     * @param {function(string): void} callback Function that will be called when a message is received. It contains the message typed by the user\n     */\n    onChatMessage(callback: (message: string) => void): void {\n        chatStream.subscribe(callback);\n    }\n}\n\nexport default new WorkadventureChatCommands();\n","import { IframeApiContribution, sendToWorkadventure, queryWorkadventure } from \"./IframeApiContribution\";\n\nexport class CoWebsite {\n    constructor(private readonly id: string) {}\n\n    close() {\n        return queryWorkadventure({\n            type: \"closeCoWebsite\",\n            data: this.id,\n        });\n    }\n}\n\nexport class WorkadventureNavigationCommands extends IframeApiContribution<WorkadventureNavigationCommands> {\n    callbacks = [];\n\n    /**\n     * Opens the webpage at \"url\" in your browser, in a new tab.\n     * {@link https://workadventu.re/map-building/api-nav.md#opening-a-web-page-in-a-new-tab | Website documentation}\n     *\n     * @param {string} url Url of the web page\n     */\n    openTab(url: string): void {\n        sendToWorkadventure({\n            type: \"openTab\",\n            data: {\n                url,\n            },\n        });\n    }\n\n    /**\n     * Opens the webpage at \"url\" in your browser in place of WorkAdventure. WorkAdventure will be completely unloaded.\n     * {@link https://workadventu.re/map-building/api-nav.md#opening-a-web-page-in-the-current-tab | Website documentation}\n     *\n     * @param {string} url Url of the web page\n     */\n    goToPage(url: string): void {\n        sendToWorkadventure({\n            type: \"goToPage\",\n            data: {\n                url,\n            },\n        });\n    }\n\n    /**\n     * Load the map at url without unloading workadventure.\n     * relative urls: \"../subFolder/map.json[#start-layer-name]\" global urls: \"/_/global/domain/path/map.json[#start-layer-name]\"\n     * {@link https://workadventu.re/map-building/api-nav.md#going-to-a-different-map-from-the-script | Website documentation}\n     *\n     * @param {string} url Url of the web page\n     */\n    goToRoom(url: string): void {\n        sendToWorkadventure({\n            type: \"loadPage\",\n            data: {\n                url,\n            },\n        });\n    }\n\n    /**\n     * Opens the webpage at \"url\" in an iFrame (on the right side of the screen) or close that iFrame.\n     * {@link https://workadventu.re/map-building/api-nav.md#openingclosing-web-page-in-co-websites | Website documentation}\n     *\n     * @param {string} url Url of the web page\n     * @param {boolean|undefined} allowApi  Allows the webpage to use the \"IFrame API\" and execute script (it is equivalent to putting the openWebsiteAllowApi property in the map)\n     * @param {string|undefined} allowPolicy Grants additional access rights to the iFrame\n     * @param {number|undefined} widthPercent Define the width of the main cowebsite beetween the min size and the max size (70% of the viewport)\n     * @param {number|undefined} position Define in whitch slot the web page will be open\n     * @param {boolean|undefined} closable Allow to close the webpage also you need to close it by the api\n     * @param {boolean|undefined} lazy Add the cowebsite but don't load it\n     * @returns {CoWebsite} The CoWebsite created\n     */\n    async openCoWebSite(\n        url: string,\n        allowApi?: boolean,\n        allowPolicy?: string,\n        widthPercent?: number,\n        position?: number,\n        closable?: boolean,\n        lazy?: boolean\n    ): Promise<CoWebsite> {\n        const result = await queryWorkadventure({\n            type: \"openCoWebsite\",\n            data: {\n                url,\n                allowApi,\n                allowPolicy,\n                widthPercent,\n                position,\n                closable,\n                lazy,\n            },\n        });\n        return new CoWebsite(result.id);\n    }\n\n    /**\n     * Get all opened co-websites with their ids and positions.\n     * {@link https://workadventu.re/map-building/api-nav.md#get-all-co-websites | Website documentation}\n     *\n     * @returns {CoWebsite[]} All Cowebsites\n     */\n    async getCoWebSites(): Promise<CoWebsite[]> {\n        const result = await queryWorkadventure({\n            type: \"getCoWebsites\",\n            data: undefined,\n        });\n        return result.map((cowebsiteEvent) => new CoWebsite(cowebsiteEvent.id));\n    }\n\n    /**\n     * @deprecated Use closeCoWebsites instead to close all co-websites\n     */\n    closeCoWebSite() {\n        return queryWorkadventure({\n            type: \"closeCoWebsites\",\n            data: undefined,\n        });\n    }\n}\n\nexport default new WorkadventureNavigationCommands();\n","import { IframeApiContribution, sendToWorkadventure } from \"./IframeApiContribution\";\n\nexport class WorkadventureControlsCommands extends IframeApiContribution<WorkadventureControlsCommands> {\n    callbacks = [];\n\n    /**\n     *  Disable player controls.\n     * {@link https://workadventu.re/map-building/api-controls.md#disabling--restoring-controls | Website documentation}\n     */\n    disablePlayerControls(): void {\n        sendToWorkadventure({ type: \"disablePlayerControls\", data: undefined });\n    }\n\n    /**\n     * Restore player controls.\n     * {@link https://workadventu.re/map-building/api-controls.md#disabling--restoring-controls | Website documentation}\n     */\n    restorePlayerControls(): void {\n        sendToWorkadventure({ type: \"restorePlayerControls\", data: undefined });\n    }\n\n    /**\n     * Turn off player microphone.\n     * {@link https://workadventu.re/map-building/api-controls.md#turn-off-webcam-or-microphone | Website documentation}\n     */\n    turnOffMicrophone(): void {\n        sendToWorkadventure({ type: \"turnOffMicrophone\", data: undefined });\n    }\n\n    /**\n     * Turn off player webcam.\n     * {@link https://workadventu.re/map-building/api-controls.md#turn-off-webcam-or-microphone | Website documentation}\n     */\n    turnOffWebcam(): void {\n        sendToWorkadventure({ type: \"turnOffWebcam\", data: undefined });\n    }\n\n    /**\n     * Disable player microphone.\n     * {@link https://workadventu.re/map-building/api-controls.md#disabling--restoring-webcam-or-microphone | Website documentation}\n     */\n    disableMicrophone(): void {\n        sendToWorkadventure({ type: \"disableMicrophone\", data: undefined });\n    }\n\n    /**\n     * Restore player microphone.\n     * {@link https://workadventu.re/map-building/api-controls.md#disabling--restoring-webcam-or-microphone | Website documentation}\n     */\n    restoreMicrophone(): void {\n        sendToWorkadventure({ type: \"restoreMicrophone\", data: undefined });\n    }\n\n    /**\n     * Disable player webcam.\n     * {@link https://workadventu.re/map-building/api-controls.md#disabling--restoring-webcam-or-microphone | Website documentation}\n     */\n    disableWebcam(): void {\n        sendToWorkadventure({ type: \"disableWebcam\", data: undefined });\n    }\n\n    /**\n     * Disable player webcam.\n     * {@link https://workadventu.re/map-building/api-controls.md#disabling--restoring-webcam-or-microphone | Website documentation}\n     */\n    restoreWebcam(): void {\n        sendToWorkadventure({ type: \"restoreWebcam\", data: undefined });\n    }\n\n    /**\n     * Disable proximity meetings.\n     * {@link https://workadventu.re/map-building/api-controls.md#disabling--restoring-proximity-meeting | Website documentation}\n     */\n    disablePlayerProximityMeeting(): void {\n        sendToWorkadventure({ type: \"disablePlayerProximityMeeting\", data: undefined });\n    }\n\n    /**\n     * Restore proximity meettings.\n     * {@link https://workadventu.re/map-building/api-controls.md#disabling--restoring-proximity-meeting | Website documentation}\n     */\n    restorePlayerProximityMeeting(): void {\n        sendToWorkadventure({ type: \"restorePlayerProximityMeeting\", data: undefined });\n    }\n}\n\nexport default new WorkadventureControlsCommands();\n","import { sendToWorkadventure } from \"../IframeApiContribution\";\nimport type { ClosePopupEvent } from \"../../Events/ClosePopupEvent\";\n\nexport class Popup {\n    constructor(private id: number) {}\n\n    /**\n     * Closes the popup\n     */\n    public close(): void {\n        sendToWorkadventure({\n            type: \"closePopup\",\n            data: {\n                popupId: this.id,\n            } as ClosePopupEvent,\n        });\n    }\n}\n","import {\n    ActionMessageType,\n    MessageReferenceEvent,\n    removeActionMessage,\n    triggerActionMessage,\n    TriggerActionMessageEvent,\n} from \"../../Events/Ui/TriggerActionMessageEvent\";\nimport { queryWorkadventure } from \"../IframeApiContribution\";\nimport type { ActionMessageOptions } from \"../ui\";\nfunction uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16) | 0,\n            v = c === \"x\" ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\n\nexport class ActionMessage {\n    public readonly uuid: string;\n    private readonly type: ActionMessageType;\n    private readonly message: string;\n    private readonly callback: () => void;\n\n    constructor(actionMessageOptions: ActionMessageOptions, private onRemove: () => void) {\n        this.uuid = uuidv4();\n        this.message = actionMessageOptions.message;\n        this.type = actionMessageOptions.type ?? \"message\";\n        this.callback = actionMessageOptions.callback;\n        this.create().catch((e) => console.error(e));\n    }\n\n    private async create() {\n        await queryWorkadventure({\n            type: triggerActionMessage,\n            data: {\n                message: this.message,\n                type: this.type,\n                uuid: this.uuid,\n            } as TriggerActionMessageEvent,\n        });\n    }\n\n    async remove() {\n        await queryWorkadventure({\n            type: removeActionMessage,\n            data: {\n                uuid: this.uuid,\n            } as MessageReferenceEvent,\n        });\n        this.onRemove();\n    }\n\n    triggerCallback() {\n        this.callback();\n    }\n}\n","import { sendToWorkadventure } from \"../IframeApiContribution\";\n\nexport class Menu {\n    constructor(private menuName: string) {}\n\n    /**\n     * remove the menu\n     */\n    public remove() {\n        sendToWorkadventure({\n            type: \"unregisterMenu\",\n            data: {\n                name: this.menuName,\n            },\n        });\n    }\n}\n","import {\n    CreateUIWebsiteEvent,\n    UIWebsiteCSSValue,\n    UIWebsiteMargin,\n    UIWebsitePosition,\n    UIWebsiteSize,\n    ViewportPositionHorizontal,\n    ViewportPositionVertical,\n    UIWebsite as UIWebsiteCore,\n} from \"../../Events/Ui/UIWebsite\";\nimport { IframeApiContribution, queryWorkadventure, sendToWorkadventure } from \"../IframeApiContribution\";\n\nclass UIWebsitePositionInternal {\n    private readonly website: UIWebsite;\n    private _vertical: ViewportPositionVertical;\n    private _horizontal: ViewportPositionHorizontal;\n\n    constructor(uiWebsite: UIWebsite, position: UIWebsitePosition) {\n        this.website = uiWebsite;\n        this._vertical = position.vertical;\n        this._horizontal = position.horizontal;\n    }\n\n    public get vertical() {\n        return this._vertical;\n    }\n\n    public set vertical(vertical: ViewportPositionVertical) {\n        this._vertical = vertical;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.website.id,\n                position: {\n                    vertical: this._vertical,\n                    horizontal: this._horizontal,\n                },\n            },\n        });\n    }\n\n    public get horizontal() {\n        return this._horizontal;\n    }\n\n    public set horizontal(horizontal: ViewportPositionHorizontal) {\n        this._horizontal = horizontal;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.website.id,\n                position: {\n                    vertical: this._vertical,\n                    horizontal: this._horizontal,\n                },\n            },\n        });\n    }\n}\n\nclass UIWebsiteSizeInternal {\n    private readonly website: UIWebsite;\n    private _height: UIWebsiteCSSValue;\n    private _width: UIWebsiteCSSValue;\n\n    constructor(uiWebsite: UIWebsite, size: UIWebsiteSize) {\n        this.website = uiWebsite;\n        this._height = size.height;\n        this._width = size.width;\n    }\n\n    public get height() {\n        return this._height;\n    }\n\n    public set height(height: UIWebsiteCSSValue) {\n        this._height = height;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.website.id,\n                size: {\n                    height: this._height,\n                    width: this._width,\n                },\n            },\n        });\n    }\n\n    public get width() {\n        return this._height;\n    }\n\n    public set width(width: UIWebsiteCSSValue) {\n        this._width = width;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.website.id,\n                size: {\n                    height: this._height,\n                    width: this._width,\n                },\n            },\n        });\n    }\n}\n\nclass UIWebsiteMarginInternal {\n    private readonly website: UIWebsite;\n    private _top?: UIWebsiteCSSValue;\n    private _bottom?: UIWebsiteCSSValue;\n    private _left?: UIWebsiteCSSValue;\n    private _right?: UIWebsiteCSSValue;\n\n    constructor(uiWebsite: UIWebsite, margin: UIWebsiteMargin) {\n        this.website = uiWebsite;\n        this._top = margin.top;\n        this._bottom = margin.bottom;\n        this._left = margin.left;\n        this._right = margin.right;\n    }\n\n    public get top() {\n        return this._top;\n    }\n\n    public set top(top: UIWebsiteCSSValue | undefined) {\n        this._top = top;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.website.id,\n                margin: {\n                    top: this._top,\n                },\n            },\n        });\n    }\n\n    public get bottom() {\n        return this._bottom;\n    }\n\n    public set bottom(bottom: UIWebsiteCSSValue | undefined) {\n        this._bottom = bottom;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.website.id,\n                margin: {\n                    bottom: this._bottom,\n                },\n            },\n        });\n    }\n\n    public get left() {\n        return this._left;\n    }\n\n    public set left(left: UIWebsiteCSSValue | undefined) {\n        this._left = left;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.website.id,\n                margin: {\n                    left: this._left,\n                },\n            },\n        });\n    }\n\n    public get right() {\n        return this._right;\n    }\n\n    public set right(right: UIWebsiteCSSValue | undefined) {\n        this._right = right;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.website.id,\n                margin: {\n                    right: this._right,\n                },\n            },\n        });\n    }\n}\n\nexport class UIWebsite {\n    public readonly id: string;\n    private _url: string;\n    private _visible: boolean;\n    private readonly _allowPolicy: string;\n    private readonly _allowApi: boolean;\n    private _position: UIWebsitePositionInternal;\n    private _size: UIWebsiteSizeInternal;\n    private _margin: UIWebsiteMarginInternal;\n\n    constructor(config: UIWebsiteCore) {\n        this.id = config.id;\n        this._url = config.url;\n        this._visible = config.visible ?? true;\n        this._allowPolicy = config.allowPolicy ?? \"\";\n        this._allowApi = config.allowApi ?? false;\n        this._position = new UIWebsitePositionInternal(this, config.position);\n        this._size = new UIWebsiteSizeInternal(this, config.size);\n        this._margin = new UIWebsiteMarginInternal(this, config.margin ?? {});\n    }\n\n    public get url() {\n        return this._url;\n    }\n\n    public set url(url: string) {\n        this._url = url;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.id,\n                url: this._url,\n            },\n        });\n    }\n\n    public get visible() {\n        return this._visible;\n    }\n\n    public set visible(visible: boolean) {\n        this._visible = visible;\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.id,\n                visible: this._visible,\n            },\n        });\n    }\n\n    public get allowPolicy() {\n        return this._allowPolicy;\n    }\n\n    public get allowApi() {\n        return this._allowApi;\n    }\n\n    public get position() {\n        return this._position;\n    }\n\n    public set position(position: UIWebsitePosition) {\n        this._position = new UIWebsitePositionInternal(this, position);\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.id,\n                position: {\n                    vertical: this._position.vertical,\n                    horizontal: this._position.horizontal,\n                },\n            },\n        });\n    }\n\n    public get size() {\n        return this._size;\n    }\n\n    public set size(size: UIWebsiteSize) {\n        this._size = new UIWebsiteSizeInternal(this, size);\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.id,\n                size: {\n                    height: this._size.height,\n                    width: this._size.width,\n                },\n            },\n        });\n    }\n\n    public get margin() {\n        return this._margin;\n    }\n\n    public set margin(margin: UIWebsiteMargin) {\n        this._margin = new UIWebsiteMarginInternal(this, margin);\n        sendToWorkadventure({\n            type: \"modifyUIWebsite\",\n            data: {\n                id: this.id,\n                margin: {\n                    top: this._margin.top,\n                    bottom: this._margin.bottom,\n                    left: this._margin.left,\n                    right: this._margin.right,\n                },\n            },\n        });\n    }\n\n    close() {\n        return queryWorkadventure({\n            type: \"closeUIWebsite\",\n            data: this.id,\n        });\n    }\n}\n\nexport class UIWebsiteCommands extends IframeApiContribution<UIWebsiteCommands> {\n    callbacks = [];\n\n    /**\n     * Open an iFrame that is fixed in the viewport. Use this for advanced popups, additional buttons in the UI, HUD, etc... Returns a promise of a UIWebsite instance.\n     * {@link https://workadventu.re/map-building/api-ui.md#display-a-ui-website | Website documentation}\n     *\n     * @param {CreateUIWebsiteEvent} createUIWebsite The details of the UIWebsite to create\n     * @returns {Promise<UIWebsite>} Promise to return a UIWebsite\n     */\n    async open(createUIWebsite: CreateUIWebsiteEvent): Promise<UIWebsite> {\n        const result = await queryWorkadventure({\n            type: \"openUIWebsite\",\n            data: createUIWebsite,\n        });\n\n        return new UIWebsite(result);\n    }\n\n    /**\n     * Returns all UI websites (iframes positionned on the viewport)\n     * {@link https://workadventu.re/map-building/api-ui.md#get-all-ui-websites | Website documentation}\n     *\n     * @returns {Promise<UIWebsite[]>} Promise to return all UI websites\n     */\n    async getAll(): Promise<UIWebsite[]> {\n        const result = await queryWorkadventure({\n            type: \"getUIWebsites\",\n            data: undefined,\n        });\n\n        return result.map((current) => new UIWebsite(current));\n    }\n}\n\nexport default new UIWebsiteCommands();\n","import { AddPlayerEvent } from \"../../Events/AddPlayerEvent\";\nimport { Observable, Subject } from \"rxjs\";\nimport { PlayerPosition } from \"../../Events/PlayerPosition\";\nimport { ActionsMenuAction } from \"../ui\";\nimport { sendToWorkadventure } from \"../IframeApiContribution\";\n\nexport const remotePlayers = new Map<number, RemotePlayer>();\n\nexport interface RemotePlayerInterface {\n    /**\n     * A unique ID for this player. Each character on the map has a unique ID\n     */\n    readonly playerId: number;\n    /**\n     * The displayed name for this player\n     */\n    readonly name: string;\n    /**\n     * A unique ID for the user. Unlike the \"id\", 2 characters can have the same UUID if they belong to the same user\n     * (i.e. if the same user logged twice using 2 different tabs)\n     */\n    readonly uuid: string;\n    /*get availabilityStatus();*/\n\n    /**\n     * The color of the outline around the player's name\n     */\n    readonly outlineColor: number | undefined;\n\n    /**\n     * The position of the current player, expressed in game pixels, relative to the top - left of the map.\n     */\n    readonly position: PlayerPosition;\n    /**\n     * A stream updated with the position of this current player.\n     */\n    readonly position$: Observable<PlayerPosition>;\n    /**\n     * An object storing players variables\n     */\n    readonly state: ReadOnlyState;\n}\n\nexport type ReadOnlyState = { onVariableChange(key: string): Observable<unknown> } & {\n    readonly [key: string]: unknown;\n};\n\nexport class RemotePlayer implements RemotePlayerInterface {\n    private _playerId: number;\n    private _name: string;\n    private _userUuid: string;\n    private _availabilityStatus: string;\n    private _outlineColor: number | undefined;\n    private _position: PlayerPosition;\n    private _variables: Map<string, unknown>;\n    private _variablesSubjects = new Map<string, Subject<unknown>>();\n    public readonly state: ReadOnlyState;\n    private actions: Map<string, ActionsMenuAction> = new Map<string, ActionsMenuAction>();\n\n    public constructor(addPlayerEvent: AddPlayerEvent) {\n        this._playerId = addPlayerEvent.playerId;\n        this._name = addPlayerEvent.name;\n        this._userUuid = addPlayerEvent.userUuid;\n        this._availabilityStatus = addPlayerEvent.availabilityStatus;\n        this._outlineColor = addPlayerEvent.outlineColor;\n        this._position = addPlayerEvent.position;\n        this._variables = addPlayerEvent.variables;\n        const variableSubjects = this._variablesSubjects;\n        const variables = this._variables;\n        this.state = new Proxy(\n            {\n                onVariableChange(key: string): Observable<unknown> {\n                    let subject = variableSubjects.get(key);\n                    if (subject === undefined) {\n                        subject = new Subject<unknown>();\n                        variableSubjects.set(key, subject);\n                    }\n                    return subject.asObservable();\n                },\n            },\n            {\n                get(target, p: PropertyKey, receiver: unknown): unknown {\n                    if (p in target) {\n                        return Reflect.get(target, p, receiver);\n                    }\n                    return variables.get(p.toString());\n                },\n                has(target, p: PropertyKey): boolean {\n                    if (p in target) {\n                        return true;\n                    }\n                    return variables.has(p.toString());\n                },\n            }\n        );\n    }\n\n    get playerId(): number {\n        return this._playerId;\n    }\n\n    get name(): string {\n        return this._name;\n    }\n\n    get uuid(): string {\n        return this._userUuid;\n    }\n\n    /**\n     * Todo\n     */\n    /*get availabilityStatus(): string {\n        return this._availabilityStatus;\n    }*/\n\n    get outlineColor(): number | undefined {\n        return this._outlineColor;\n    }\n\n    get position(): PlayerPosition {\n        return this._position;\n    }\n\n    set position(_position: PlayerPosition) {\n        this._position = _position;\n        this._position$.next(_position);\n    }\n\n    public readonly _position$ = new Subject<PlayerPosition>();\n    public readonly position$ = this._position$.asObservable();\n\n    public destroy() {\n        this._position$.complete();\n        for (const subject of this._variablesSubjects.values()) {\n            subject.complete();\n        }\n    }\n\n    public setVariable(name: string, value: unknown): void {\n        this._variables.set(name, value);\n        const observable = this._variablesSubjects.get(name);\n        if (observable) {\n            observable.next(value);\n        }\n    }\n\n    public addAction(key: string, callback: () => void): ActionsMenuAction {\n        const newAction = new ActionsMenuAction(this, key, callback);\n        this.actions.set(key, newAction);\n        sendToWorkadventure({\n            type: \"addActionsMenuKeyToRemotePlayer\",\n            data: { id: this._playerId, actionKey: key },\n        });\n        return newAction;\n    }\n\n    public callAction(key: string): void {\n        const action = this.actions.get(key);\n        if (action) {\n            action.call();\n        }\n    }\n\n    public removeAction(key: string): void {\n        this.actions.delete(key);\n        sendToWorkadventure({\n            type: \"removeActionsMenuKeyFromRemotePlayer\",\n            data: { id: this._playerId, actionKey: key },\n        });\n    }\n}\n\nexport interface RemotePlayerMoved {\n    player: RemotePlayerInterface;\n    newPosition: PlayerPosition;\n    oldPosition: PlayerPosition;\n}\n","import { IframeApiContribution, sendToWorkadventure } from \"../IframeApiContribution\";\nimport { ModalEvent } from \"../../Events/ModalEvent\";\n\nexport class WorkadventureModalCommands extends IframeApiContribution<WorkadventureModalCommands> {\n    callbacks = [];\n\n    /**\n     * Open instantly the chat window.\n     * {@link https://workadventu.re/map-building/api-chat.md#open-the-modal-window | Website documentation}\n     */\n    openModal(modalEvent: ModalEvent): void {\n        sendToWorkadventure({ type: \"openModal\", data: modalEvent });\n    }\n\n    /**\n     * Close instantly the chat window.\n     * {@link https://workadventu.re/map-building/api-chat.md#close-the-modal-window | Website documentation}\n     */\n    closeModal(): void {\n        sendToWorkadventure({ type: \"closeModal\", data: undefined });\n    }\n}\n\nexport default new WorkadventureModalCommands();\n","import { IframeApiContribution, sendToWorkadventure } from \"./IframeApiContribution\";\nimport { apiCallback } from \"./registeredCallbacks\";\nimport type { ButtonClickedCallback, ButtonDescriptor } from \"./Ui/ButtonDescriptor\";\nimport { Popup } from \"./Ui/Popup\";\nimport { ActionMessage } from \"./Ui/ActionMessage\";\nimport { Menu } from \"./Ui/Menu\";\nimport type { RequireOnlyOne } from \"../types\";\nimport { ActionsMenuActionClickedEvent } from \"../Events/ActionsMenuActionClickedEvent\";\nimport { Observable, Subject } from \"rxjs\";\nimport type { UIWebsiteCommands } from \"./Ui/UIWebsite\";\nimport website from \"./Ui/UIWebsite\";\nimport { RemotePlayer } from \"./Players/RemotePlayer\";\nimport { AddPlayerEvent } from \"../Events/AddPlayerEvent\";\nimport modal from \"./Ui/Modal\";\nimport type { WorkadventureModalCommands } from \"./Ui/Modal\";\n\nlet popupId = 0;\nconst popups: Map<number, Popup> = new Map<number, Popup>();\nconst popupCallbacks: Map<number, Map<number, ButtonClickedCallback>> = new Map<\n    number,\n    Map<number, ButtonClickedCallback>\n>();\n\nconst menus: Map<string, Menu> = new Map<string, Menu>();\nconst menuCallbacks: Map<string, (command: string) => void> = new Map();\nconst actionMessages = new Map<string, ActionMessage>();\n\ninterface MenuDescriptor {\n    callback?: (commandDescriptor: string) => void;\n    iframe?: string;\n    allowApi?: boolean;\n}\n\nexport type MenuOptions = RequireOnlyOne<MenuDescriptor, \"callback\" | \"iframe\">;\n\nexport interface ActionMessageOptions {\n    message: string;\n    type?: \"message\" | \"warning\";\n    callback: () => void;\n}\n\nexport class ActionsMenuAction {\n    private remotePlayer: RemotePlayer;\n    private key: string;\n    private callback: () => void;\n\n    constructor(remotePlayer: RemotePlayer, key: string, callback: () => void) {\n        this.remotePlayer = remotePlayer;\n        this.key = key;\n        this.callback = callback;\n    }\n\n    public call(): void {\n        this.callback();\n    }\n\n    public remove(): void {\n        this.remotePlayer.removeAction(this.key);\n    }\n}\n\nexport class WorkAdventureUiCommands extends IframeApiContribution<WorkAdventureUiCommands> {\n    public readonly _onRemotePlayerClicked: Subject<RemotePlayer>;\n    public readonly onRemotePlayerClicked: Observable<RemotePlayer>;\n\n    private currentlyClickedRemotePlayer?: RemotePlayer;\n\n    constructor() {\n        super();\n        this._onRemotePlayerClicked = new Subject<RemotePlayer>();\n        this.onRemotePlayerClicked = this._onRemotePlayerClicked.asObservable();\n    }\n\n    callbacks = [\n        apiCallback({\n            type: \"buttonClickedEvent\",\n            callback: (payloadData) => {\n                const callback = popupCallbacks.get(payloadData.popupId)?.get(payloadData.buttonId);\n                const popup = popups.get(payloadData.popupId);\n                if (popup === undefined) {\n                    throw new Error('Could not find popup with ID \"' + payloadData.popupId + '\"');\n                }\n                if (callback) {\n                    callback(popup);\n                }\n            },\n        }),\n        apiCallback({\n            type: \"menuItemClicked\",\n            callback: (event) => {\n                const callback = menuCallbacks.get(event.menuItem);\n                const menu = menus.get(event.menuItem);\n                if (menu === undefined) {\n                    throw new Error('Could not find menu named \"' + event.menuItem + '\"');\n                }\n                if (callback) {\n                    callback(event.menuItem);\n                }\n            },\n        }),\n        apiCallback({\n            type: \"messageTriggered\",\n            callback: (event) => {\n                const actionMessage = actionMessages.get(event.uuid);\n                if (actionMessage) {\n                    actionMessage.triggerCallback();\n                }\n            },\n        }),\n        apiCallback({\n            type: \"remotePlayerClickedEvent\",\n            callback: (payloadData: AddPlayerEvent) => {\n                this._onRemotePlayerClicked.next(new RemotePlayer(payloadData));\n            },\n        }),\n        apiCallback({\n            type: \"actionsMenuActionClickedEvent\",\n            callback: (payloadData: ActionsMenuActionClickedEvent) => {\n                this.currentlyClickedRemotePlayer?.callAction(payloadData.actionName);\n            },\n        }),\n    ];\n\n    /**\n     * Open a popup in front of the game.\n     * {@link https://workadventu.re/map-building/api-ui.md#opening-a-popup | Website documentation}\n     *\n     * @param {string} targetObject Targeted object name\n     * @param {string} message Message to display\n     * @param {ButtonDescriptor[]} buttons Buttons displayed below popup\n     * @returns {Popup} Popup created\n     */\n    public openPopup(targetObject: string, message: string, buttons: ButtonDescriptor[]): Popup {\n        popupId++;\n        const popup = new Popup(popupId);\n        const btnMap = new Map<number, () => void>();\n        popupCallbacks.set(popupId, btnMap);\n        let id = 0;\n        for (const button of buttons) {\n            const callback = button.callback;\n            if (callback) {\n                btnMap.set(id, () => {\n                    callback(popup);\n                });\n            }\n            id++;\n        }\n\n        sendToWorkadventure({\n            type: \"openPopup\",\n            data: {\n                popupId,\n                targetObject,\n                message,\n                buttons: buttons.map((button) => {\n                    return {\n                        label: button.label,\n                        className: button.className,\n                    };\n                }),\n            },\n        });\n\n        popups.set(popupId, popup);\n        return popup;\n    }\n\n    /**\n     * Add a custom menu item containing the text commandDescriptor in the navbar of the menu. options attribute accepts an object.\n     * {@link https://workadventu.re/map-building/api-ui.md#add-custom-menu | Website documentation}\n     *\n     * @param {string} commandDescriptor Command description\n     * @param {MenuOptions | ((commandDescriptor: string) => void)} options Manu options\n     * @returns {Menu} Menu created\n     */\n    public registerMenuCommand(\n        commandDescriptor: string,\n        options: MenuOptions | ((commandDescriptor: string) => void)\n    ): Menu {\n        const menu = new Menu(commandDescriptor);\n\n        if (typeof options === \"function\") {\n            menuCallbacks.set(commandDescriptor, options);\n            sendToWorkadventure({\n                type: \"registerMenu\",\n                data: {\n                    name: commandDescriptor,\n                    options: {\n                        allowApi: false,\n                    },\n                },\n            });\n        } else {\n            options.allowApi = options.allowApi === undefined ? options.iframe !== undefined : options.allowApi;\n\n            if (options.iframe !== undefined) {\n                sendToWorkadventure({\n                    type: \"registerMenu\",\n                    data: {\n                        name: commandDescriptor,\n                        iframe: options.iframe,\n                        options: {\n                            allowApi: options.allowApi,\n                        },\n                    },\n                });\n            } else if (options.callback !== undefined) {\n                menuCallbacks.set(commandDescriptor, options.callback);\n                sendToWorkadventure({\n                    type: \"registerMenu\",\n                    data: {\n                        name: commandDescriptor,\n                        options: {\n                            allowApi: options.allowApi,\n                        },\n                    },\n                });\n            } else {\n                throw new Error(\n                    \"When adding a menu with WA.ui.registerMenuCommand, you must pass either an iframe or a callback\"\n                );\n            }\n        }\n        menus.set(commandDescriptor, menu);\n        return menu;\n    }\n\n    public addActionsMenuKeyToRemotePlayer(id: number, actionKey: string): void {\n        sendToWorkadventure({\n            type: \"addActionsMenuKeyToRemotePlayer\",\n            data: { id, actionKey },\n        });\n    }\n\n    public removeActionsMenuKeyFromRemotePlayer(id: number, actionKey: string): void {\n        sendToWorkadventure({\n            type: \"removeActionsMenuKeyFromRemotePlayer\",\n            data: { id, actionKey },\n        });\n    }\n\n    /**\n     * Display a bubble like in proximity meeting (Draft function).\n     * Todo: enhanced bubble functions behaviors\n     */\n    public displayBubble(): void {\n        sendToWorkadventure({ type: \"displayBubble\", data: undefined });\n    }\n\n    /**\n     * Remove a bubble like in proximity meeting.\n     * Todo: enhanced bubble functions behaviors\n     */\n    public removeBubble(): void {\n        sendToWorkadventure({ type: \"removeBubble\", data: undefined });\n    }\n\n    /**\n     * Displays a message at the bottom of the screen (that will disappear when space bar is pressed).\n     * {@link https://workadventu.re/map-building/api-ui.md#awaiting-user-confirmation-with-space-bar | Website documentation}\n     *\n     * @param {ActionMessageOptions} actionMessageOptions Action options\n     * @returns {ActionMessage} Trigger action message\n     */\n    public displayActionMessage(actionMessageOptions: ActionMessageOptions): ActionMessage {\n        const actionMessage = new ActionMessage(actionMessageOptions, () => {\n            actionMessages.delete(actionMessage.uuid);\n        });\n        actionMessages.set(actionMessage.uuid, actionMessage);\n        return actionMessage;\n    }\n\n    get website(): UIWebsiteCommands {\n        return website;\n    }\n\n    get modal(): WorkadventureModalCommands {\n        return modal;\n    }\n}\n\nexport default new WorkAdventureUiCommands();\n","import { sendToWorkadventure } from \"../IframeApiContribution\";\nimport type { LoadSoundEvent } from \"../../Events/LoadSoundEvent\";\nimport type { PlaySoundEvent } from \"../../Events/PlaySoundEvent\";\nimport type { StopSoundEvent } from \"../../Events/StopSoundEvent\";\n//import SoundConfig = Phaser.Types.Sound.SoundConfig;\n\n/**\n * A copy of the SoundConfig type from Phaser\n */\nexport type SoundConfig = {\n    /**\n     * Boolean indicating whether the sound should be muted or not.\n     */\n    mute?: boolean;\n    /**\n     * A value between 0 (silence) and 1 (full volume).\n     */\n    volume?: number;\n    /**\n     * Defines the speed at which the sound should be played.\n     */\n    rate?: number;\n    /**\n     * Represents detuning of sound in [cents](https://en.wikipedia.org/wiki/Cent_%28music%29).\n     */\n    detune?: number;\n    /**\n     * Position of playback for this sound, in seconds.\n     */\n    seek?: number;\n    /**\n     * Whether or not the sound or current sound marker should loop.\n     */\n    loop?: boolean;\n    /**\n     * Time, in seconds, that should elapse before the sound actually starts its playback.\n     */\n    delay?: number;\n    /**\n     * A value between -1 (full left pan) and 1 (full right pan). 0 means no pan.\n     */\n    pan?: number;\n};\n\nexport class Sound {\n    constructor(private url: string) {\n        sendToWorkadventure({\n            type: \"loadSound\",\n            data: {\n                url: this.url,\n            } as LoadSoundEvent,\n        });\n    }\n\n    public play(config: SoundConfig | undefined) {\n        sendToWorkadventure({\n            type: \"playSound\",\n            data: {\n                url: this.url,\n                config,\n            } as PlaySoundEvent,\n        });\n        return this.url;\n    }\n    public stop() {\n        sendToWorkadventure({\n            type: \"stopSound\",\n            data: {\n                url: this.url,\n            } as StopSoundEvent,\n        });\n        return this.url;\n    }\n}\n","import { IframeApiContribution } from \"./IframeApiContribution\";\nimport { Sound } from \"./Sound/Sound\";\n\nexport class WorkadventureSoundCommands extends IframeApiContribution<WorkadventureSoundCommands> {\n    callbacks = [];\n\n    /**\n     * Load a sound from an url.\n     *\n     * Please note that loadSound returns an object of the Sound class.\n     *\n     * The Sound class that represents a loaded sound contains two methods: play(soundConfig : SoundConfig|undefined) and stop().\n     *\n     * The parameter soundConfig is optional, if you call play without a Sound config the sound will be played with the basic configuration.\n     * {@link https://workadventu.re/map-building/api-sound.md#load-a-sound-from-an-url | Website documentation}\n     *\n     * @param url\n     * @returns\n     */\n    loadSound(url: string): Sound {\n        return new Sound(url);\n    }\n}\n\nexport default new WorkadventureSoundCommands();\n","import { sendToWorkadventure } from \"../IframeApiContribution\";\nimport type { CreateEmbeddedWebsiteEvent, Rectangle } from \"../../Events/EmbeddedWebsiteEvent\";\n\nexport class EmbeddedWebsite {\n    public readonly name: string;\n    private _url: string;\n    private _visible: boolean;\n    private _allow: string;\n    private _allowApi: boolean;\n    private _position: Rectangle;\n    private readonly origin: \"map\" | \"player\" | undefined;\n    private _scale: number;\n\n    constructor(private config: CreateEmbeddedWebsiteEvent) {\n        this.name = config.name;\n        this._url = config.url;\n        this._visible = config.visible ?? true;\n        this._allow = config.allow ?? \"\";\n        this._allowApi = config.allowApi ?? false;\n        this._position = config.position;\n        this.origin = config.origin;\n        this._scale = config.scale ?? 1;\n    }\n\n    public get url() {\n        return this._url;\n    }\n\n    public set url(url: string) {\n        this._url = url;\n        sendToWorkadventure({\n            type: \"modifyEmbeddedWebsite\",\n            data: {\n                name: this.name,\n                url: this._url,\n            },\n        });\n    }\n\n    public get visible() {\n        return this._visible;\n    }\n\n    public set visible(visible: boolean) {\n        this._visible = visible;\n        sendToWorkadventure({\n            type: \"modifyEmbeddedWebsite\",\n            data: {\n                name: this.name,\n                visible: this._visible,\n            },\n        });\n    }\n\n    public get x() {\n        return this._position.x;\n    }\n\n    public set x(x: number) {\n        this._position.x = x;\n        sendToWorkadventure({\n            type: \"modifyEmbeddedWebsite\",\n            data: {\n                name: this.name,\n                x: this._position.x,\n            },\n        });\n    }\n\n    public get y() {\n        return this._position.y;\n    }\n\n    public set y(y: number) {\n        this._position.y = y;\n        sendToWorkadventure({\n            type: \"modifyEmbeddedWebsite\",\n            data: {\n                name: this.name,\n                y: this._position.y,\n            },\n        });\n    }\n\n    public get width() {\n        return this._position.width;\n    }\n\n    public set width(width: number) {\n        this._position.width = width;\n        sendToWorkadventure({\n            type: \"modifyEmbeddedWebsite\",\n            data: {\n                name: this.name,\n                width: this._position.width,\n            },\n        });\n    }\n\n    public get height() {\n        return this._position.height;\n    }\n\n    public set height(height: number) {\n        this._position.height = height;\n        sendToWorkadventure({\n            type: \"modifyEmbeddedWebsite\",\n            data: {\n                name: this.name,\n                height: this._position.height,\n            },\n        });\n    }\n\n    public get scale(): number {\n        return this._scale;\n    }\n\n    public set scale(scale: number) {\n        this._scale = scale;\n        sendToWorkadventure({\n            type: \"modifyEmbeddedWebsite\",\n            data: {\n                name: this.name,\n                scale: this._scale,\n            },\n        });\n    }\n}\n","import { IframeApiContribution, queryWorkadventure } from \"./IframeApiContribution\";\nimport { EmbeddedWebsite } from \"./Room/EmbeddedWebsite\";\nimport type { CreateEmbeddedWebsiteEvent } from \"../Events/EmbeddedWebsiteEvent\";\n\nexport class WorkadventureRoomWebsiteCommands extends IframeApiContribution<WorkadventureRoomWebsiteCommands> {\n    callbacks = [];\n\n    /**\n     * You can get an instance of an embedded website by using the WA.room.website.get() method. It returns a promise of an EmbeddedWebsite instance.\n     * {@link https://workadventu.re/map-building/api-room.md#getting-an-instance-of-a-website-already-embedded-in-the-map | Website documentation}\n     *\n     * @param {string} objectName Object name\n     * @returns {Promise<EmbeddedWebsite>} Promise to get a embed website\n     */\n    async get(objectName: string): Promise<EmbeddedWebsite> {\n        const websiteEvent = await queryWorkadventure({\n            type: \"getEmbeddedWebsite\",\n            data: objectName,\n        });\n        return new EmbeddedWebsite(websiteEvent);\n    }\n\n    /**\n     * You can create an instance of an embedded website by using the WA.room.website.create() method. It returns an EmbeddedWebsite instance.\n     * {@link https://workadventu.re/map-building/api-room.md#adding-a-new-website-in-a-map | Website documentation}\n     *\n     * @param createEmbeddedWebsiteEvent\n     * @returns {EmbeddedWebsite} Created embed website\n     */\n    create(createEmbeddedWebsiteEvent: CreateEmbeddedWebsiteEvent): EmbeddedWebsite {\n        queryWorkadventure({\n            type: \"createEmbeddedWebsite\",\n            data: createEmbeddedWebsiteEvent,\n        }).catch((e) => {\n            console.error(e);\n        });\n        return new EmbeddedWebsite(createEmbeddedWebsiteEvent);\n    }\n\n    /**\n     * Use WA.room.website.delete to completely remove an embedded website from your map.\n     * {@link https://workadventu.re/map-building/api-room.md#deleting-a-website-from-a-map | Website documentation}\n     *\n     * @param {string} objectName Object name\n     * @returns {Promise<void>} Promise to away to known when the object has been deleted\n     */\n    async delete(objectName: string): Promise<void> {\n        return await queryWorkadventure({\n            type: \"deleteEmbeddedWebsite\",\n            data: objectName,\n        });\n    }\n}\n\nexport default new WorkadventureRoomWebsiteCommands();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapChunk = void 0;\nconst zod_1 = require(\"zod\");\nexports.ITiledMapChunk = zod_1.z.object({\n    data: zod_1.z.union([zod_1.z.string(), zod_1.z.number().array()]),\n    height: zod_1.z.number(),\n    width: zod_1.z.number(),\n    x: zod_1.z.number(),\n    y: zod_1.z.number(),\n});\n//# sourceMappingURL=ITiledMapChunk.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapFrame = void 0;\nconst zod_1 = require(\"zod\");\nexports.ITiledMapFrame = zod_1.z.object({\n    duration: zod_1.z.number(),\n    tileid: zod_1.z.number(),\n});\n//# sourceMappingURL=ITiledMapFrame.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapGrid = void 0;\nconst zod_1 = require(\"zod\");\nexports.ITiledMapGrid = zod_1.z.object({\n    width: zod_1.z.number(),\n    height: zod_1.z.number(),\n    orientation: zod_1.z.enum(['orthogonal', 'isometric']),\n});\n//# sourceMappingURL=ITiledMapGrid.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapProperty = void 0;\nconst zod_1 = require(\"zod\");\nconst literalSchema = zod_1.z.union([zod_1.z.string(), zod_1.z.number(), zod_1.z.boolean(), zod_1.z.null()]);\nconst jsonSchema = zod_1.z.lazy(() => zod_1.z.union([literalSchema, zod_1.z.array(jsonSchema), zod_1.z.record(jsonSchema)]));\nconst ITiledMapStringProperty = zod_1.z.object({\n    name: zod_1.z.string(),\n    type: zod_1.z.union([zod_1.z.literal('string'), zod_1.z.literal('color'), zod_1.z.literal('file')]),\n    value: zod_1.z.string().optional(),\n    propertytype: zod_1.z.string().optional(),\n});\nconst ITiledMapIntProperty = zod_1.z.object({\n    name: zod_1.z.string(),\n    type: zod_1.z.union([zod_1.z.literal('int'), zod_1.z.literal('object')]),\n    value: zod_1.z.number().int().optional(),\n    propertytype: zod_1.z.string().optional(),\n});\nconst ITiledMapFloatProperty = zod_1.z.object({\n    name: zod_1.z.string(),\n    type: zod_1.z.literal('float'),\n    value: zod_1.z.number().optional(),\n    propertytype: zod_1.z.string().optional(),\n});\nconst ITiledMapBoolProperty = zod_1.z.object({\n    name: zod_1.z.string(),\n    type: zod_1.z.literal('bool'),\n    value: zod_1.z.boolean().optional(),\n    propertytype: zod_1.z.string().optional(),\n});\nconst ITiledMapClassProperty = zod_1.z.object({\n    name: zod_1.z.string(),\n    type: zod_1.z.literal('class'),\n    value: jsonSchema.optional(),\n    propertytype: zod_1.z.string().optional(),\n});\nexports.ITiledMapProperty = zod_1.z.union([\n    ITiledMapStringProperty,\n    ITiledMapIntProperty,\n    ITiledMapFloatProperty,\n    ITiledMapBoolProperty,\n    ITiledMapClassProperty,\n]);\n//# sourceMappingURL=ITiledMapProperty.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapImageLayer = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nexports.ITiledMapImageLayer = zod_1.z.object({\n    image: zod_1.z.string(),\n    name: zod_1.z.string(),\n    opacity: zod_1.z.number(),\n    type: zod_1.z.literal('imagelayer'),\n    visible: zod_1.z.boolean(),\n    height: zod_1.z.number().optional(),\n    id: zod_1.z.number().optional(),\n    offsetx: zod_1.z.number().optional(),\n    offsety: zod_1.z.number().optional(),\n    parallaxx: zod_1.z.number().optional(),\n    parallaxy: zod_1.z.number().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    repeatx: zod_1.z.boolean().optional(),\n    repeaty: zod_1.z.boolean().optional(),\n    startx: zod_1.z.number().optional(),\n    starty: zod_1.z.number().optional(),\n    tintcolor: zod_1.z.string().optional(),\n    class: zod_1.z.string().optional(),\n    width: zod_1.z.number().optional(),\n    x: zod_1.z.number().optional(),\n    y: zod_1.z.number().optional(),\n});\n//# sourceMappingURL=ITiledMapImageLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapPoint = void 0;\nconst zod_1 = require(\"zod\");\nexports.ITiledMapPoint = zod_1.z.object({\n    x: zod_1.z.number(),\n    y: zod_1.z.number(),\n});\n//# sourceMappingURL=ITiledMapPoint.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapText = void 0;\nconst zod_1 = require(\"zod\");\nexports.ITiledMapText = zod_1.z.object({\n    text: zod_1.z.string(),\n    bold: zod_1.z.boolean().optional(),\n    color: zod_1.z.string().optional(),\n    fontfamily: zod_1.z.string().optional(),\n    halign: zod_1.z.enum(['center', 'right', 'justify', 'left']).optional(),\n    italic: zod_1.z.boolean().optional(),\n    kerning: zod_1.z.boolean().optional(),\n    pixelsize: zod_1.z.number().optional(),\n    strikeout: zod_1.z.boolean().optional(),\n    underline: zod_1.z.boolean().optional(),\n    valign: zod_1.z.enum(['center', 'bottom', 'top']).optional(),\n    wrap: zod_1.z.boolean().optional(),\n});\n//# sourceMappingURL=ITiledMapText.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapObject = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nconst ITiledMapPoint_1 = require(\"./ITiledMapPoint\");\nconst ITiledMapText_1 = require(\"./ITiledMapText\");\nexports.ITiledMapObject = zod_1.z.object({\n    id: zod_1.z.number(),\n    name: zod_1.z.string(),\n    visible: zod_1.z.boolean(),\n    x: zod_1.z.number(),\n    y: zod_1.z.number(),\n    ellipse: zod_1.z.boolean().optional(),\n    gid: zod_1.z.number().optional(),\n    height: zod_1.z.number().optional(),\n    point: zod_1.z.boolean().optional(),\n    polygon: ITiledMapPoint_1.ITiledMapPoint.array().optional(),\n    polyline: ITiledMapPoint_1.ITiledMapPoint.array().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    rotation: zod_1.z.number().optional(),\n    template: zod_1.z.string().optional(),\n    text: ITiledMapText_1.ITiledMapText.optional(),\n    type: zod_1.z.string().optional(),\n    class: zod_1.z.string().optional(),\n    width: zod_1.z.number().optional(),\n});\n//# sourceMappingURL=ITiledMapObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapTileLayer = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nconst ITiledMapChunk_1 = require(\"./ITiledMapChunk\");\nexports.ITiledMapTileLayer = zod_1.z.object({\n    data: zod_1.z.union([zod_1.z.string(), zod_1.z.number().array()]),\n    height: zod_1.z.number(),\n    id: zod_1.z.number(),\n    name: zod_1.z.string(),\n    opacity: zod_1.z.number(),\n    type: zod_1.z.literal('tilelayer'),\n    visible: zod_1.z.boolean(),\n    width: zod_1.z.number(),\n    chunks: ITiledMapChunk_1.ITiledMapChunk.array().optional(),\n    compression: zod_1.z.string().optional(),\n    encoding: zod_1.z.enum(['csv', 'base64']).optional(),\n    offsetx: zod_1.z.number().optional(),\n    offsety: zod_1.z.number().optional(),\n    parallaxx: zod_1.z.number().optional(),\n    parallaxy: zod_1.z.number().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    startx: zod_1.z.number().optional(),\n    starty: zod_1.z.number().optional(),\n    tintcolor: zod_1.z.string().optional(),\n    class: zod_1.z.string().optional(),\n    x: zod_1.z.number().optional(),\n    y: zod_1.z.number().optional(),\n});\n//# sourceMappingURL=ITiledMapTileLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapGroupLayer = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nconst ITiledMapLayer_1 = require(\"./ITiledMapLayer\");\nexports.ITiledMapGroupLayer = zod_1.z.lazy(() => zod_1.z.object({\n    name: zod_1.z.string(),\n    opacity: zod_1.z.number(),\n    type: zod_1.z.literal('group'),\n    layers: ITiledMapLayer_1.ITiledMapLayer.array(),\n    visible: zod_1.z.boolean(),\n    height: zod_1.z.number().optional(),\n    draworder: zod_1.z.string().optional(),\n    id: zod_1.z.number().optional(),\n    class: zod_1.z.string().optional(),\n    offsetx: zod_1.z.number().optional(),\n    offsety: zod_1.z.number().optional(),\n    parallaxx: zod_1.z.number().optional(),\n    parallaxy: zod_1.z.number().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    startx: zod_1.z.number().optional(),\n    starty: zod_1.z.number().optional(),\n    tintcolor: zod_1.z.string().optional(),\n    width: zod_1.z.number().optional(),\n    x: zod_1.z.number().optional(),\n    y: zod_1.z.number().optional(),\n}));\n//# sourceMappingURL=ITiledMapGroupLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapObjectLayer = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nconst ITiledMapObject_1 = require(\"./ITiledMapObject\");\nexports.ITiledMapObjectLayer = zod_1.z.object({\n    name: zod_1.z.string(),\n    objects: ITiledMapObject_1.ITiledMapObject.array(),\n    opacity: zod_1.z.number(),\n    type: zod_1.z.literal('objectgroup'),\n    visible: zod_1.z.boolean(),\n    draworder: zod_1.z.string().optional(),\n    height: zod_1.z.number().optional(),\n    id: zod_1.z.number().optional(),\n    offsetx: zod_1.z.number().optional(),\n    offsety: zod_1.z.number().optional(),\n    parallaxx: zod_1.z.number().optional(),\n    parallaxy: zod_1.z.number().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    startx: zod_1.z.number().optional(),\n    starty: zod_1.z.number().optional(),\n    tintcolor: zod_1.z.string().optional(),\n    width: zod_1.z.number().optional(),\n    class: zod_1.z.string().optional(),\n    x: zod_1.z.number().optional(),\n    y: zod_1.z.number().optional(),\n});\n//# sourceMappingURL=ITiledMapObjectLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapLayer = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapTileLayer_1 = require(\"./ITiledMapTileLayer\");\nconst ITiledMapGroupLayer_1 = require(\"./ITiledMapGroupLayer\");\nconst ITiledMapObjectLayer_1 = require(\"./ITiledMapObjectLayer\");\nconst ITiledMapImageLayer_1 = require(\"./ITiledMapImageLayer\");\nexports.ITiledMapLayer = zod_1.z.union([\n    ITiledMapTileLayer_1.ITiledMapTileLayer,\n    ITiledMapGroupLayer_1.ITiledMapGroupLayer,\n    ITiledMapObjectLayer_1.ITiledMapObjectLayer,\n    ITiledMapImageLayer_1.ITiledMapImageLayer,\n]);\n//# sourceMappingURL=ITiledMapLayer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapOffset = void 0;\nconst zod_1 = require(\"zod\");\nexports.ITiledMapOffset = zod_1.z.object({\n    x: zod_1.z.number(),\n    y: zod_1.z.number(),\n});\n//# sourceMappingURL=ITiledMapOffset.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapTerrain = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nexports.ITiledMapTerrain = zod_1.z.object({\n    name: zod_1.z.string(),\n    tile: zod_1.z.number(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n});\n//# sourceMappingURL=ITiledMapTerrain.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapTile = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapFrame_1 = require(\"./ITiledMapFrame\");\nconst ITiledMapObjectLayer_1 = require(\"./ITiledMapObjectLayer\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nconst ITiledMapTerrain_1 = require(\"./ITiledMapTerrain\");\nexports.ITiledMapTile = zod_1.z.object({\n    id: zod_1.z.number(),\n    animation: ITiledMapFrame_1.ITiledMapFrame.array().optional(),\n    image: zod_1.z.string().optional(),\n    imageheight: zod_1.z.number().optional(),\n    imagewidth: zod_1.z.number().optional(),\n    x: zod_1.z.number().optional(),\n    y: zod_1.z.number().optional(),\n    width: zod_1.z.number().optional(),\n    height: zod_1.z.number().optional(),\n    objectgroup: ITiledMapObjectLayer_1.ITiledMapObjectLayer.array().optional(),\n    probability: zod_1.z.number().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    class: zod_1.z.string().optional(),\n    terrain: ITiledMapTerrain_1.ITiledMapTerrain.array().optional(),\n    type: zod_1.z.string().optional(),\n});\n//# sourceMappingURL=ITiledMapTile.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapTransformations = void 0;\nconst zod_1 = require(\"zod\");\nexports.ITiledMapTransformations = zod_1.z.object({\n    hflip: zod_1.z.boolean().optional(),\n    vflip: zod_1.z.boolean().optional(),\n    rotate: zod_1.z.boolean().optional(),\n    preferuntransformed: zod_1.z.boolean().optional(),\n});\n//# sourceMappingURL=ITiledMapTransformations.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapWangColor = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nexports.ITiledMapWangColor = zod_1.z.object({\n    name: zod_1.z.string(),\n    color: zod_1.z.string(),\n    tile: zod_1.z.number(),\n    probability: zod_1.z.number(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array(),\n    type: zod_1.z.string().optional(),\n    class: zod_1.z.string().optional(),\n});\n//# sourceMappingURL=ITiledMapWangColor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapWangTile = void 0;\nconst zod_1 = require(\"zod\");\nexports.ITiledMapWangTile = zod_1.z.object({\n    tileid: zod_1.z.string(),\n    wangid: zod_1.z.number().array(),\n});\n//# sourceMappingURL=ITiledMapWangTile.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapWangSet = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nconst ITiledMapWangColor_1 = require(\"./ITiledMapWangColor\");\nconst ITiledMapWangTile_1 = require(\"./ITiledMapWangTile\");\nexports.ITiledMapWangSet = zod_1.z.object({\n    name: zod_1.z.string(),\n    tile: zod_1.z.number(),\n    colors: ITiledMapWangColor_1.ITiledMapWangColor.array().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    wangtiles: ITiledMapWangTile_1.ITiledMapWangTile.array().optional(),\n    type: zod_1.z.enum(['corner', 'edge', 'mixed']),\n    class: zod_1.z.string().optional(),\n});\n//# sourceMappingURL=ITiledMapWangSet.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMapTileset = void 0;\nconst zod_1 = require(\"zod\");\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nconst ITiledMapTerrain_1 = require(\"./ITiledMapTerrain\");\nconst ITiledMapGrid_1 = require(\"./ITiledMapGrid\");\nconst ITiledMapOffset_1 = require(\"./ITiledMapOffset\");\nconst ITiledMapTile_1 = require(\"./ITiledMapTile\");\nconst ITiledMapTransformations_1 = require(\"./ITiledMapTransformations\");\nconst ITiledMapWangSet_1 = require(\"./ITiledMapWangSet\");\nexports.ITiledMapTileset = zod_1.z.object({\n    name: zod_1.z.string(),\n    image: zod_1.z.string(),\n    backgroundcolor: zod_1.z.string().optional(),\n    columns: zod_1.z.number().optional(),\n    fillmode: zod_1.z.enum(['stretch', 'preserve-aspect-fit']).optional(),\n    firstgid: zod_1.z.number().optional(),\n    grid: ITiledMapGrid_1.ITiledMapGrid.optional(),\n    id: zod_1.z.number().optional(),\n    imageheight: zod_1.z.number().optional(),\n    imagewidth: zod_1.z.number().optional(),\n    margin: zod_1.z.number().optional(),\n    objectalignment: zod_1.z.string().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    source: zod_1.z.string().optional(),\n    spacing: zod_1.z.number().optional(),\n    terrains: ITiledMapTerrain_1.ITiledMapTerrain.array().optional(),\n    tilecount: zod_1.z.number().optional(),\n    tiledversion: zod_1.z.string().optional(),\n    tileheight: zod_1.z.number().optional(),\n    tileoffset: ITiledMapOffset_1.ITiledMapOffset.optional(),\n    tilerendersize: zod_1.z.enum(['tile', 'grid']).optional(),\n    tiles: ITiledMapTile_1.ITiledMapTile.array().optional(),\n    tilewidth: zod_1.z.number().optional(),\n    transformations: ITiledMapTransformations_1.ITiledMapTransformations.optional(),\n    transparentcolor: zod_1.z.string().optional(),\n    type: zod_1.z.literal('tileset').optional(),\n    class: zod_1.z.string().optional(),\n    version: zod_1.z.union([zod_1.z.string(), zod_1.z.number()]).optional(),\n    wangsets: ITiledMapWangSet_1.ITiledMapWangSet.array().optional(),\n});\n//# sourceMappingURL=ITiledMapTileset.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ITiledMap = void 0;\nconst ITiledMapProperty_1 = require(\"./ITiledMapProperty\");\nconst ITiledMapLayer_1 = require(\"./ITiledMapLayer\");\nconst ITiledMapTileset_1 = require(\"./ITiledMapTileset\");\nconst zod_1 = require(\"zod\");\nexports.ITiledMap = zod_1.z.object({\n    layers: ITiledMapLayer_1.ITiledMapLayer.array(),\n    tiledversion: zod_1.z.string(),\n    tilesets: ITiledMapTileset_1.ITiledMapTileset.array(),\n    type: zod_1.z.literal('map'),\n    backgroundcolor: zod_1.z.string().optional(),\n    compressionlevel: zod_1.z.number().optional(),\n    height: zod_1.z.number().optional(),\n    hexsidelength: zod_1.z.number().optional(),\n    infinite: zod_1.z.boolean().optional(),\n    nextlayerid: zod_1.z.number().optional(),\n    nextobjectid: zod_1.z.number().optional(),\n    orientation: zod_1.z.enum(['orthogonal', 'isometric', 'staggered', 'hexagonal']).optional(),\n    parallaxoriginx: zod_1.z.number().optional(),\n    parallaxoriginy: zod_1.z.number().optional(),\n    properties: ITiledMapProperty_1.ITiledMapProperty.array().optional(),\n    renderorder: zod_1.z.enum(['right-down', 'right-up', 'left-down', 'left-up']).optional(),\n    staggeraxis: zod_1.z.enum(['x', 'y']).optional(),\n    staggerindex: zod_1.z.enum(['odd', 'even']).optional(),\n    tileheight: zod_1.z.number().optional(),\n    tilewidth: zod_1.z.number().optional(),\n    class: zod_1.z.string().optional(),\n    version: zod_1.z.union([zod_1.z.string(), zod_1.z.number()]).optional(),\n    width: zod_1.z.number().optional(),\n});\n//# sourceMappingURL=ITiledMap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.upgradeMapToNewest = void 0;\nfunction upgradeMapToNewest(map, useCopy = false) {\n    const newMap = useCopy ? JSON.parse(JSON.stringify(map)) : map;\n    for (const layer of newMap.layers) {\n        updateLayerFieldValue(layer);\n    }\n    return newMap;\n}\nexports.upgradeMapToNewest = upgradeMapToNewest;\nfunction updateLayerFieldValue(layer) {\n    var _a;\n    if (layer.type === 'group') {\n        for (const deeperLayer of (_a = layer.layers) !== null && _a !== void 0 ? _a : []) {\n            updateLayerFieldValue(deeperLayer);\n        }\n    }\n    if (layer.type === 'objectgroup') {\n        for (const obj of layer.objects) {\n            if (obj.class === undefined) {\n                obj.class = obj.type;\n            }\n        }\n    }\n}\n//# sourceMappingURL=utility.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.upgradeMapToNewest = exports.ITiledMapGroupLayer = void 0;\n__exportStar(require(\"./ITiledMapChunk\"), exports);\n__exportStar(require(\"./ITiledMapFrame\"), exports);\n__exportStar(require(\"./ITiledMapGrid\"), exports);\n__exportStar(require(\"./ITiledMapImageLayer\"), exports);\n__exportStar(require(\"./ITiledMapObject\"), exports);\n__exportStar(require(\"./ITiledMapLayer\"), exports);\n__exportStar(require(\"./ITiledMapObjectLayer\"), exports);\n__exportStar(require(\"./ITiledMapOffset\"), exports);\n__exportStar(require(\"./ITiledMapPoint\"), exports);\n__exportStar(require(\"./ITiledMapProperty\"), exports);\n__exportStar(require(\"./ITiledMapTerrain\"), exports);\n__exportStar(require(\"./ITiledMapText\"), exports);\n__exportStar(require(\"./ITiledMapTile\"), exports);\n__exportStar(require(\"./ITiledMapTileset\"), exports);\n__exportStar(require(\"./ITiledMapTransformations\"), exports);\n__exportStar(require(\"./ITiledMapWangColor\"), exports);\n__exportStar(require(\"./ITiledMapWangSet\"), exports);\n__exportStar(require(\"./ITiledMapWangTile\"), exports);\n__exportStar(require(\"./ITiledMapTileLayer\"), exports);\nvar ITiledMapGroupLayer_1 = require(\"./ITiledMapGroupLayer\");\nObject.defineProperty(exports, \"ITiledMapGroupLayer\", { enumerable: true, get: function () { return ITiledMapGroupLayer_1.ITiledMapGroupLayer; } });\n__exportStar(require(\"./ITiledMap\"), exports);\nvar utility_1 = require(\"./utility\");\nObject.defineProperty(exports, \"upgradeMapToNewest\", { enumerable: true, get: function () { return utility_1.upgradeMapToNewest; } });\n//# sourceMappingURL=index.js.map","import { ITiledMapObject } from \"@workadventure/tiled-map-type-guard\";\nimport { CreateAreaEvent } from \"../../Events/CreateAreaEvent\";\nimport { sendToWorkadventure } from \"../IframeApiContribution\";\n\n// TODO: Include more properties to extends functionality later on\nexport type IArea = Omit<ITiledMapObject, \"id\" | \"gid\" | \"visible\" | \"rotation\" | \"ellipse\" | \"polygon\" | \"polyline\">;\n\nexport class Area implements IArea {\n    private config: CreateAreaEvent;\n\n    public readonly name: string;\n    public readonly type: string = \"area\";\n    private _x: number;\n    private _y: number;\n    private _width: number;\n    private _height: number;\n\n    constructor(config: CreateAreaEvent) {\n        this.config = config;\n\n        this.name = config.name;\n        this._x = config.x;\n        this._y = config.y;\n        this._width = config.width;\n        this._height = config.height;\n    }\n\n    public setProperty(propertyName: string, propertyValue: string | number | boolean | undefined): void {\n        sendToWorkadventure({\n            type: \"setAreaProperty\",\n            data: {\n                areaName: this.name,\n                propertyName: propertyName,\n                propertyValue: propertyValue,\n            },\n        });\n    }\n\n    public get x() {\n        return this._x;\n    }\n\n    public set x(x: number) {\n        this._x = x;\n        sendToWorkadventure({\n            type: \"modifyArea\",\n            data: {\n                name: this.name,\n                x: this._x,\n            },\n        });\n    }\n\n    public set y(y: number) {\n        this._y = y;\n        sendToWorkadventure({\n            type: \"modifyArea\",\n            data: {\n                name: this.name,\n                y: this._y,\n            },\n        });\n    }\n\n    public get y() {\n        return this._y;\n    }\n\n    public set width(width: number) {\n        this._width = width;\n        sendToWorkadventure({\n            type: \"modifyArea\",\n            data: {\n                name: this.name,\n                width: this._width,\n            },\n        });\n    }\n\n    public get width() {\n        return this._width;\n    }\n\n    public set height(height: number) {\n        this._height = height;\n        sendToWorkadventure({\n            type: \"modifyArea\",\n            data: {\n                name: this.name,\n                height: this._height,\n            },\n        });\n    }\n\n    public get height() {\n        return this._height;\n    }\n}\n","import { Observable, Subject } from \"rxjs\";\nimport { ChangeAreaEvent } from \"../Events/ChangeAreaEvent\";\nimport { CreateAreaEvent } from \"../Events/CreateAreaEvent\";\nimport { Area } from \"./Area/Area\";\nimport { IframeApiContribution, queryWorkadventure } from \"./IframeApiContribution\";\nimport { apiCallback } from \"./registeredCallbacks\";\n\nconst enterAreaStreams: Map<string, Subject<void>> = new Map<string, Subject<void>>();\nconst leaveAreaStreams: Map<string, Subject<void>> = new Map<string, Subject<void>>();\n\nexport class WorkadventureAreaCommands extends IframeApiContribution<WorkadventureAreaCommands> {\n    callbacks = [\n        apiCallback({\n            type: \"enterAreaEvent\",\n            callback: (payloadData: ChangeAreaEvent) => {\n                enterAreaStreams.get(payloadData.name)?.next();\n            },\n        }),\n        apiCallback({\n            type: \"leaveAreaEvent\",\n            callback: (payloadData) => {\n                leaveAreaStreams.get(payloadData.name)?.next();\n            },\n        }),\n    ];\n\n    /**\n     * Create a new Area object (currently limited to rectangular shapes).\n     * {@link https://workadventu.re/map-building/api-room.md#create-area | Website documentation}\n     *\n     * @param {{name: string, x: number, y: number, width: number, height: number}} createAreaEvent Define the name, position and size of the area\n     * @returns {Area} Area object\n     */\n    create(createAreaEvent: CreateAreaEvent): Area {\n        void queryWorkadventure({\n            type: \"createArea\",\n            data: createAreaEvent,\n        });\n        return new Area(createAreaEvent);\n    }\n\n    /**\n     * Get an existing Area object.\n     * {@link https://workadventu.re/map-building/api-room.md#get-an-area | Website documentation}\n     *\n     * @param {string} name Name of the area searched\n     * @returns {Area} Area found\n     */\n    async get(name: string): Promise<Area> {\n        const areaEvent = await queryWorkadventure({\n            type: \"getArea\",\n            data: name,\n        });\n\n        return new Area(areaEvent);\n    }\n\n    /**\n     * Delete Area by it's name.\n     * {@link https://workadventu.re/map-building/api-room.md#delete-area | Website documentation}\n     *\n     * @param {string} name Area name\n     * @returns {Promise<void>} Promise resolved when the removing is finished\n     */\n    async delete(name: string): Promise<void> {\n        await queryWorkadventure({\n            type: \"deleteArea\",\n            data: name,\n        });\n        enterAreaStreams.delete(name);\n        leaveAreaStreams.delete(name);\n    }\n\n    /**\n     * Listens to the position of the current user. The event is triggered when the user enters a given area.\n     * {@link https://workadventu.re/map-building/api-room.md#detecting-when-the-user-entersleaves-an-area | Website documentation}\n     *\n     * @param {string} areaName Area name\n     * @returns {Subject<void>} An observable fired when someone enters the area\n     */\n    onEnter(areaName: string): Observable<void> {\n        let subject = enterAreaStreams.get(areaName);\n        if (subject === undefined) {\n            subject = new Subject<void>();\n            enterAreaStreams.set(areaName, subject);\n        }\n\n        return subject.asObservable();\n    }\n\n    /**\n     * Listens to the position of the current user. The event is triggered when the user leaves a given area.\n     * {@link https://workadventu.re/map-building/api-room.md#detecting-when-the-user-entersleaves-an-area | Website documentation}\n     *\n     * @param {string} areaName Area name\n     * @returns {Subject<void>} An observable fired when someone leaves the area\n     */\n    onLeave(areaName: string): Observable<void> {\n        let subject = leaveAreaStreams.get(areaName);\n        if (subject === undefined) {\n            subject = new Subject<void>();\n            leaveAreaStreams.set(areaName, subject);\n        }\n\n        return subject.asObservable();\n    }\n}\n\nexport default new WorkadventureAreaCommands();\n","import { Observable, Subject } from \"rxjs\";\n\nimport { EnterLeaveEvent } from \"../Events/EnterLeaveEvent\";\nimport { ChangeLayerEvent } from \"../Events/ChangeLayerEvent\";\n\nimport { IframeApiContribution, queryWorkadventure, sendToWorkadventure } from \"./IframeApiContribution\";\nimport { apiCallback } from \"./registeredCallbacks\";\n\nimport type { WorkadventureRoomWebsiteCommands } from \"./website\";\nimport website from \"./website\";\nimport area from \"./area\";\nimport { WorkadventureAreaCommands } from \"./area\";\nimport { ITiledMap } from \"@workadventure/tiled-map-type-guard\";\n\nconst enterStreams: Map<string, Subject<EnterLeaveEvent>> = new Map<string, Subject<EnterLeaveEvent>>();\nconst leaveStreams: Map<string, Subject<EnterLeaveEvent>> = new Map<string, Subject<EnterLeaveEvent>>();\n\nconst enterLayerStreams: Map<string, Subject<void>> = new Map<string, Subject<void>>();\nconst leaveLayerStreams: Map<string, Subject<void>> = new Map<string, Subject<void>>();\n\ninterface TileDescriptor {\n    x: number;\n    y: number;\n    tile: number | string | null;\n    layer: string;\n}\n\nlet roomId: string | undefined;\n\nexport const setRoomId = (id: string) => {\n    roomId = id;\n};\n\nlet mapURL: string | undefined;\n\nexport const setMapURL = (url: string) => {\n    mapURL = url;\n};\n\nexport class WorkadventureRoomCommands extends IframeApiContribution<WorkadventureRoomCommands> {\n    callbacks = [\n        apiCallback({\n            callback: (payloadData: EnterLeaveEvent) => {\n                enterStreams.get(payloadData.name)?.next();\n            },\n            type: \"enterEvent\",\n        }),\n        apiCallback({\n            type: \"leaveEvent\",\n            callback: (payloadData) => {\n                leaveStreams.get(payloadData.name)?.next();\n            },\n        }),\n        apiCallback({\n            type: \"enterLayerEvent\",\n            callback: (payloadData: ChangeLayerEvent) => {\n                enterLayerStreams.get(payloadData.name)?.next();\n            },\n        }),\n        apiCallback({\n            type: \"leaveLayerEvent\",\n            callback: (payloadData) => {\n                leaveLayerStreams.get(payloadData.name)?.next();\n            },\n        }),\n    ];\n\n    /**\n     * @deprecated Use onEnterLayer instead\n     */\n    onEnterZone(name: string, callback: () => void): void {\n        let subject = enterStreams.get(name);\n        if (subject === undefined) {\n            subject = new Subject<EnterLeaveEvent>();\n            enterStreams.set(name, subject);\n        }\n        subject.subscribe(callback);\n    }\n\n    /**\n     * @deprecated Use onLeaveLayer instead\n     */\n    onLeaveZone(name: string, callback: () => void): void {\n        let subject = leaveStreams.get(name);\n        if (subject === undefined) {\n            subject = new Subject<EnterLeaveEvent>();\n            leaveStreams.set(name, subject);\n        }\n        subject.subscribe(callback);\n    }\n\n    /**\n     * Listens to the position of the current user. The event is triggered when the user enters a given layer.\n     * {@link https://workadventu.re/map-building/api-room.md#detecting-when-the-user-entersleaves-a-layer | Website documentation}\n     *\n     * @param {string} layerName Name of the layer who as defined in Tiled\n     * @returns {Subject<void>} Event subject can be listen by a subscribtion\n     */\n    onEnterLayer(layerName: string): Observable<void> {\n        let subject = enterLayerStreams.get(layerName);\n        if (subject === undefined) {\n            subject = new Subject<void>();\n            enterLayerStreams.set(layerName, subject);\n        }\n\n        return subject.asObservable();\n    }\n\n    /**\n     * Listens to the position of the current user. The event is triggered when the user leaves a given layer.\n     * {@link https://workadventu.re/map-building/api-room.md#detecting-when-the-user-entersleaves-a-layer | Website documentation}\n     *\n     * @param {string} layerName Name of the layer who as defined in Tiled\n     * @returns {Subject<void>} Event subject can be listen by a subscribtion\n     */\n    onLeaveLayer(layerName: string): Observable<void> {\n        let subject = leaveLayerStreams.get(layerName);\n        if (subject === undefined) {\n            subject = new Subject<void>();\n            leaveLayerStreams.set(layerName, subject);\n        }\n\n        return subject.asObservable();\n    }\n\n    /**\n     * This methods can be used to show a layer. if layerName is the name of a group layer, show all the layer in that group layer.\n     * {@link https://workadventu.re/map-building/api-room.md#show--hide-a-layer | Website documentation}\n     *\n     * @param {string} layerName Name of the layer/group layer who as defined in Tiled\n     */\n    showLayer(layerName: string): void {\n        sendToWorkadventure({ type: \"showLayer\", data: { name: layerName } });\n    }\n\n    /**\n     * This methods can be used to hide a layer. if layerName is the name of a group layer, hide all the layer in that group layer.\n     * {@link https://workadventu.re/map-building/api-room.md#show--hide-a-layer | Website documentation}\n     *\n     * @param {string} layerName Name of the layer/group layer who as defined in Tiled\n     */\n    hideLayer(layerName: string): void {\n        sendToWorkadventure({ type: \"hideLayer\", data: { name: layerName } });\n    }\n\n    /**\n     * Set the value of the propertyName property of the layer layerName at propertyValue.\n     * If the property doesn't exist, create the property propertyName and set the value of the property at propertyValue.\n     * Note : To unset a property from a layer, use setProperty with propertyValue set to undefined.\n     * {@link https://workadventu.re/map-building/api-room.md#setcreate-properties-in-a-layer | Website documentation}\n     *\n     * @param {string} layerName Name of the layer who as defined in Tiled\n     * @param {string} propertyName Name of the property\n     * @param {string|number|boolean|undefined} propertyValue Value of the property\n     */\n    setProperty(layerName: string, propertyName: string, propertyValue: string | number | boolean | undefined): void {\n        sendToWorkadventure({\n            type: \"setProperty\",\n            data: {\n                layerName: layerName,\n                propertyName: propertyName,\n                propertyValue: propertyValue,\n            },\n        });\n    }\n\n    /**\n     * Returns a promise that resolves to the JSON map file.\n     * Check the {@link https://doc.mapeditor.org/en/stable/reference/json-map-format/ | Tiled documentation to learn more about the format of the JSON map}.\n     * {@link https://workadventu.re/map-building/api-room.md#getting-map-data | Website documentation}\n     *\n     * @returns {Promise<ITiledMap>} Map in Tiled JSON format\n     */\n    async getTiledMap(): Promise<ITiledMap> {\n        const event = await queryWorkadventure({ type: \"getMapData\", data: undefined });\n        return event.data as ITiledMap;\n    }\n\n    /**\n     * Replace the tile at the x and y coordinates in the layer named layer by the tile with the id tile.\n     * {@link https://workadventu.re/map-building/api-room.md#changing-tiles | Website documentation}\n     *\n     * @param {TileDescriptor[]} tiles Description of a tile\n     */\n    setTiles(tiles: TileDescriptor[]): void {\n        sendToWorkadventure({\n            type: \"setTiles\",\n            data: tiles,\n        });\n    }\n\n    /**\n     * The ID of the current room is available from the WA.room.id property.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-room.md#get-the-room-id | Website documentation}\n     *\n     * @returns {string} Id of the room\n     */\n    get id(): string {\n        if (roomId === undefined) {\n            throw new Error(\"Room id not initialized yet. You should call WA.room.id within a WA.onInit callback.\");\n        }\n        return roomId;\n    }\n\n    /**\n     * The URL of the map is available from the WA.room.mapURL property.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-room.md#get-the-map-url | Website documentation}\n     *\n     * @returns {string} Url of the map\n     */\n    get mapURL(): string {\n        if (mapURL === undefined) {\n            throw new Error(\n                \"mapURL is not initialized yet. You should call WA.room.mapURL within a WA.onInit callback.\"\n            );\n        }\n        return mapURL;\n    }\n\n    /**\n     * Load a tileset in JSON format from an url and return the id of the first tile of the loaded tileset.\n     * {@link https://workadventu.re/map-building/api-room.md#loading-a-tileset | Website documentation}\n     *\n     * @param {string} url Url of the tileset\n     * @returns {Promise<number>} Promise to return the id of the tileset\n     */\n    async loadTileset(url: string): Promise<number> {\n        return await queryWorkadventure({\n            type: \"loadTileset\",\n            data: {\n                url: url,\n            },\n        });\n    }\n\n    get website(): WorkadventureRoomWebsiteCommands {\n        return website;\n    }\n\n    get area(): WorkadventureAreaCommands {\n        return area;\n    }\n}\n\nexport default new WorkadventureRoomCommands();\n","import { Observable, Subject } from \"rxjs\";\n\nimport { SetVariableEvent } from \"../Events/SetVariableEvent\";\n\nexport abstract class AbstractWorkadventureStateCommands {\n    protected setVariableResolvers = new Subject<SetVariableEvent>();\n    protected variables = new Map<string, unknown>();\n    private variableSubscribers = new Map<string, Subject<unknown>>();\n\n    protected constructor() {\n        //super();\n\n        this.setVariableResolvers.subscribe((event) => {\n            // const oldValue = this.variables.get(event.key);\n            // If we are setting the same value, no need to do anything.\n            // No need to do this check since it is already performed in SharedVariablesManager and PlayersVariablesManager\n            /*if (JSON.stringify(oldValue) === JSON.stringify(event.value)) {\n                return;\n            }*/\n            this.variables.set(event.key, event.value);\n            const subject = this.variableSubscribers.get(event.key);\n            if (subject !== undefined) {\n                subject.next(event.value);\n            }\n        });\n    }\n\n    // TODO: see how we can remove this method from types exposed to WA.state object\n    initVariables(_variables: Map<string, unknown>): void {\n        for (const [name, value] of _variables.entries()) {\n            // In case the user already decided to put values in the variables (before onInit), let's make sure onInit does not override this.\n            if (!this.variables.has(name)) {\n                this.variables.set(name, value);\n            }\n        }\n    }\n\n    loadVariable(key: string): unknown {\n        return this.variables.get(key);\n    }\n\n    hasVariable(key: string): boolean {\n        return this.variables.has(key);\n    }\n\n    onVariableChange(key: string): Observable<unknown> {\n        let subject = this.variableSubscribers.get(key);\n        if (subject === undefined) {\n            subject = new Subject<unknown>();\n            this.variableSubscribers.set(key, subject);\n        }\n        return subject.asObservable();\n    }\n}\n","import { queryWorkadventure } from \"./IframeApiContribution\";\nimport { apiCallback } from \"./registeredCallbacks\";\nimport { AbstractWorkadventureStateCommands } from \"./AbstractState\";\n\nexport class WorkadventureStateCommands extends AbstractWorkadventureStateCommands {\n    public constructor() {\n        super();\n    }\n\n    callbacks = [\n        apiCallback({\n            type: \"setVariable\",\n            callback: (payloadData) => {\n                this.setVariableResolvers.next(payloadData);\n            },\n        }),\n    ];\n\n    saveVariable(key: string, value: unknown): Promise<void> {\n        this.variables.set(key, value);\n        return queryWorkadventure({\n            type: \"setVariable\",\n            data: {\n                key,\n                value,\n            },\n        });\n    }\n}\n\n// TODO: rework this function to be able to create a WorkadventurePlayerStateCommands too! (something like: \"wrapInProxy\")\nexport function createState(): WorkadventureStateCommands & { [key: string]: unknown } {\n    return new Proxy(new WorkadventureStateCommands(), {\n        get(target: WorkadventureStateCommands, p: PropertyKey, receiver: unknown): unknown {\n            if (p in target) {\n                return Reflect.get(target, p, receiver);\n            }\n            return target.loadVariable(p.toString());\n        },\n        set(target: WorkadventureStateCommands, p: PropertyKey, value: unknown, receiver: unknown): boolean {\n            // Note: when using \"set\", there is no way to wait, so we ignore the return of the promise.\n            // User must use WA.state.saveVariable to have error message.\n            target.saveVariable(p.toString(), value).catch((e) => console.error(e));\n            return true;\n        },\n        has(target: WorkadventureStateCommands, p: PropertyKey): boolean {\n            if (p in target) {\n                return true;\n            }\n            return target.hasVariable(p.toString());\n        },\n    }) as WorkadventureStateCommands & { [key: string]: unknown };\n}\n","import { queryWorkadventure } from \"./IframeApiContribution\";\nimport { apiCallback } from \"./registeredCallbacks\";\nimport { AbstractWorkadventureStateCommands } from \"./AbstractState\";\n\nexport class WorkadventurePlayerStateCommands extends AbstractWorkadventureStateCommands {\n    public constructor() {\n        super();\n    }\n\n    callbacks = [\n        apiCallback({\n            type: \"setPlayerVariable\",\n            callback: (payloadData) => {\n                this.setVariableResolvers.next(payloadData);\n            },\n        }),\n    ];\n\n    saveVariable(\n        key: string,\n        value: unknown,\n        options?: {\n            public?: boolean;\n            persist?: boolean;\n            ttl?: number;\n            scope?: \"world\" | \"room\";\n        }\n    ): Promise<void> {\n        if (options && options.ttl !== undefined && !options.persist) {\n            throw new Error(\"A variable that has a ttl set must be persisted with 'persist = true'\");\n        }\n        if (options && options.scope === \"world\" && !options.persist) {\n            throw new Error(\"A variable that has a 'world' scope must be persisted with 'persist = true'\");\n        }\n\n        this.variables.set(key, value);\n        return queryWorkadventure({\n            type: \"setPlayerVariable\",\n            data: {\n                key,\n                value,\n                public: options?.public ?? false,\n                ttl: options?.ttl ?? undefined,\n                persist: options?.persist ?? true,\n                scope: options?.scope ?? \"world\",\n            },\n        });\n    }\n}\n\nexport const playerState = new Proxy(new WorkadventurePlayerStateCommands(), {\n    get(target: WorkadventurePlayerStateCommands, p: PropertyKey, receiver: unknown): unknown {\n        if (p in target) {\n            return Reflect.get(target, p, receiver);\n        }\n        return target.loadVariable(p.toString());\n    },\n    set(target: WorkadventurePlayerStateCommands, p: PropertyKey, value: unknown, receiver: unknown): boolean {\n        // Note: when using \"set\", there is no way to wait, so we ignore the return of the promise.\n        // User must use WA.state.saveVariable to have error message.\n        target.saveVariable(p.toString(), value).catch((e) => console.error(e));\n        return true;\n    },\n    has(target: WorkadventurePlayerStateCommands, p: PropertyKey): boolean {\n        if (p in target) {\n            return true;\n        }\n        return target.hasVariable(p.toString());\n    },\n}) as WorkadventurePlayerStateCommands & { [key: string]: unknown };\n","import { Subject } from \"rxjs\";\nimport { JoinProximityMeetingEvent } from \"../../Events/ProximityMeeting/JoinProximityMeetingEvent\";\nimport { ParticipantProximityMeetingEvent } from \"../../Events/ProximityMeeting/ParticipantProximityMeetingEvent\";\n\nimport { IframeApiContribution } from \"../IframeApiContribution\";\nimport { RemotePlayer } from \"../Players/RemotePlayer\";\nimport { apiCallback } from \"../registeredCallbacks\";\n\nlet joinStream: Subject<RemotePlayer[]>;\nlet participantJoinStream: Subject<RemotePlayer>;\nlet participantLeaveStream: Subject<RemotePlayer>;\nlet leaveStream: Subject<void>;\n\nexport class WorkadventureProximityMeetingCommands extends IframeApiContribution<WorkadventureProximityMeetingCommands> {\n    callbacks = [\n        apiCallback({\n            type: \"joinProximityMeetingEvent\",\n            callback: (payloadData: JoinProximityMeetingEvent) => {\n                joinStream?.next(payloadData.users.map((user) => new RemotePlayer(user)));\n            },\n        }),\n        apiCallback({\n            type: \"participantJoinProximityMeetingEvent\",\n            callback: (payloadData: ParticipantProximityMeetingEvent) => {\n                participantJoinStream?.next(new RemotePlayer(payloadData.user));\n            },\n        }),\n        apiCallback({\n            type: \"participantLeaveProximityMeetingEvent\",\n            callback: (payloadData: ParticipantProximityMeetingEvent) => {\n                participantLeaveStream?.next(new RemotePlayer(payloadData.user));\n            },\n        }),\n        apiCallback({\n            type: \"leaveProximityMeetingEvent\",\n            callback: () => {\n                leaveStream?.next();\n            },\n        }),\n    ];\n\n    /**\n     * Detecting when the user enter on a meeting.\n     * {@link https://workadventu.re/map-building/api-player.md#detecting-when-the-user-entersleaves-a-meeting | Website documentation}\n     *\n     * @returns {Subject<RemotePlayer[]>} Observable who return the joined users\n     */\n    onJoin(): Subject<RemotePlayer[]> {\n        if (joinStream === undefined) {\n            joinStream = new Subject<RemotePlayer[]>();\n        }\n        return joinStream;\n    }\n\n    /**\n     * Detecting when a participant joined on the current meeting.\n     * {@link https://workadventu.re/map-building/api-player.md#detecting-when-a-participant-entersleaves-the-current-meeting | Website documentation}\n     *\n     * @returns {Subject<RemotePlayer>} Observable who return the joined user\n     */\n    onParticipantJoin(): Subject<RemotePlayer> {\n        if (participantJoinStream === undefined) {\n            participantJoinStream = new Subject<RemotePlayer>();\n        }\n        return participantJoinStream;\n    }\n\n    /**\n     * Detecting when a participant left on the current meeting.\n     * {@link https://workadventu.re/map-building/api-player.md#detecting-when-a-participant-entersleaves-the-current-meeting | Website documentation}\n     *\n     * @returns {Subject<RemotePlayer>} Observable who return the left user\n     */\n    onParticipantLeave(): Subject<RemotePlayer> {\n        if (participantLeaveStream === undefined) {\n            participantLeaveStream = new Subject<RemotePlayer>();\n        }\n        return participantLeaveStream;\n    }\n\n    /**\n     * Detecting when the user leave on a meeting.\n     * {@link https://workadventu.re/map-building/api-player.md#detecting-when-the-user-entersleaves-a-meeting | Website documentation}\n     */\n    onLeave(): Subject<void> {\n        if (leaveStream === undefined) {\n            leaveStream = new Subject<void>();\n        }\n        return leaveStream;\n    }\n}\n\nexport default new WorkadventureProximityMeetingCommands();\n","import { IframeApiContribution, queryWorkadventure, sendToWorkadventure } from \"./IframeApiContribution\";\nimport type { HasPlayerMovedEvent, HasPlayerMovedEventCallback } from \"../Events/HasPlayerMovedEvent\";\nimport { Subject } from \"rxjs\";\nimport { apiCallback } from \"./registeredCallbacks\";\nimport { playerState } from \"./playerState\";\nimport proximityMeeting, { WorkadventureProximityMeetingCommands } from \"./Player/ProximityMeeting\";\n\nconst moveStream = new Subject<HasPlayerMovedEvent>();\n\nlet playerName: string | undefined;\n\nexport const setPlayerName = (name: string) => {\n    playerName = name;\n};\n\nlet playerLanguage: string | undefined;\n\nexport const setPlayerLanguage = (language: string | undefined) => {\n    playerLanguage = language;\n};\n\nlet tags: string[] | undefined;\n\nexport const setTags = (_tags: string[]) => {\n    tags = _tags;\n};\n\nlet userRoomToken: string | undefined;\n\nexport const setUserRoomToken = (token: string | undefined) => {\n    userRoomToken = token;\n};\n\nlet playerId: number | undefined;\n\nexport const setPlayerId = (_id: number | undefined) => {\n    playerId = _id;\n};\n\nlet uuid: string | undefined;\n\nexport const setUuid = (_uuid: string | undefined) => {\n    uuid = _uuid;\n};\n\nexport class WorkadventurePlayerCommands extends IframeApiContribution<WorkadventurePlayerCommands> {\n    readonly state = playerState;\n\n    callbacks = [\n        apiCallback({\n            type: \"hasPlayerMoved\",\n            callback: (payloadData) => {\n                moveStream.next(payloadData);\n            },\n        }),\n    ];\n\n    /**\n     * Get the player name.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-player.md#get-the-player-name | Website documentation}\n     *\n     * @returns {string} Player name\n     */\n    get name(): string {\n        if (playerName === undefined) {\n            throw new Error(\n                \"Player name not initialized yet. You should call WA.player.name within a WA.onInit callback.\"\n            );\n        }\n        return playerName;\n    }\n\n    /**\n     * Get the player UUID.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-player.md#get-the-player-uuid | Website documentation}\n     * @deprecated Use WA.player.uuid instead\n     *\n     * @returns {string|undefined} Player UUID\n     */\n    get id(): string | undefined {\n        if (uuid === undefined) {\n            throw new Error(\"Player id not initialized yet. You should call WA.player.id within a WA.onInit callback.\");\n        }\n        return uuid;\n    }\n\n    /**\n     * Get the player id.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-player.md#get-the-player-id | Website documentation}\n     *\n     * @returns {number} Player id\n     */\n    get playerId(): number {\n        if (playerId === undefined) {\n            throw new Error(\n                \"Player id not initialized yet. You should call WA.player.playerId within a WA.onInit callback.\"\n            );\n        }\n        return playerId;\n    }\n\n    /**\n     * Get the player UUID.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-player.md#get-the-player-uuid | Website documentation}\n     *\n     * @returns {string|undefined} Player UUID\n     */\n    get uuid(): string | undefined {\n        if (uuid === undefined) {\n            throw new Error(\n                \"Player id not initialized yet. You should call WA.player.uuid within a WA.onInit callback.\"\n            );\n        }\n        return uuid;\n    }\n\n    /**\n     * Get the player language.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-player.md#get-the-player-language | Website documentation}\n     *\n     * @returns {string} Player language\n     */\n    get language(): string {\n        if (playerLanguage === undefined) {\n            throw new Error(\n                \"Player language not initialized yet. You should call WA.player.language within a WA.onInit callback.\"\n            );\n        }\n        return playerLanguage;\n    }\n\n    /**\n     * Get the player tags.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-player.md#get-the-tags-of-the-player | Website documentation}\n     *\n     * @returns {string[]} Player tags\n     */\n    get tags(): string[] {\n        if (tags === undefined) {\n            throw new Error(\"Tags not initialized yet. You should call WA.player.tags within a WA.onInit callback.\");\n        }\n        return tags;\n    }\n\n    /**\n     * Get the player position.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-player.md#get-the-position-of-the-player | Website documentation}\n     *\n     * @returns {Position} Player position\n     */\n    async getPosition(): Promise<Position> {\n        return await queryWorkadventure({\n            type: \"getPlayerPosition\",\n            data: undefined,\n        });\n    }\n\n    /**\n     * Listens to the movement of the current user and calls the callback.\n     * Sends an event when the user stops moving, changes direction and every 200ms when moving in the same direction.\n     * {@link https://workadventu.re/map-building/api-player.md#listen-to-player-movement | Website documentation}\n     *\n     * @param {HasPlayerMovedEventCallback} callback Function that will be called when the current player is moving. It contains the event\n     */\n    onPlayerMove(callback: HasPlayerMovedEventCallback): void {\n        moveStream.subscribe(callback);\n        sendToWorkadventure({\n            type: \"onPlayerMove\",\n            data: undefined,\n        });\n    }\n\n    /**\n     * Player will try to find shortest path to the destination point and proceed to move there.\n     * {@link https://workadventu.re/map-building/api-player.md#move-player-to-position | Website documentation}\n     *\n     * @param {number} x Horizontal position\n     * @param {number} y Vertical position\n     * @param {number} speed Speed\n     * @returns {Promise<{ x: number, y: number, cancelled: boolean }>} Promise to give an object with the position and if the move has been cancelled or not\n     */\n    public async moveTo(x: number, y: number, speed?: number): Promise<{ x: number; y: number; cancelled: boolean }> {\n        return await queryWorkadventure({\n            type: \"movePlayerTo\",\n            data: { x, y, speed },\n        });\n    }\n\n    /**\n     * This token can be used by third party services to authenticate a player and prove that the player is in a given room.\n     * The token is generated by the administration panel linked to WorkAdventure.\n     * The token is a string and is depending on your implementation of the administration panel.\n     * In WorkAdventure SAAS version, the token is a JWT token that contains information such as the player's room ID and its associated membership ID.\n     *\n     * If you are using the self-hosted version of WorkAdventure and you developed your own administration panel, the token can be anything.\n     * By default, self-hosted versions of WorkAdventure don't come with an administration panel, so the token string will be empty.\n     * {@link https://workadventu.re/map-building/api-player.md#get-the-user-room-token-of-the-player | Website documentation}\n     *\n     * @returns {string|undefined} User room token\n     */\n    get userRoomToken(): string | undefined {\n        if (userRoomToken === undefined) {\n            throw new Error(\n                \"User-room token not initialized yet. You should call WA.player.userRoomToken within a WA.onInit callback.\"\n            );\n        }\n        return userRoomToken;\n    }\n\n    /**\n     * Display a thin line around your player's name (the \"outline\").\n     * {@link https://workadventu.re/map-building/api-player.md#set-the-outline-color-of-the-player | Website documentation}\n     *\n     * @param {number} red\n     * @param {number} green\n     * @param {number} blue\n     * @returns {Promise<void>} Promise to wait to known when the outiline has been displayed\n     */\n    public setOutlineColor(red: number, green: number, blue: number): Promise<void> {\n        return queryWorkadventure({\n            type: \"setPlayerOutline\",\n            data: {\n                red,\n                green,\n                blue,\n            },\n        });\n    }\n\n    /**\n     * Remove the thin line around your player's name (the \"outline\").\n     * {@link https://workadventu.re/map-building/api-player.md#set-the-outline-color-of-the-player | Website documentation}\n     *\n     * @returns {Promise<void>} Promise to await to known when the outline has been removed\n     */\n    public removeOutlineColor(): Promise<void> {\n        return queryWorkadventure({\n            type: \"removePlayerOutline\",\n            data: undefined,\n        });\n    }\n\n    get proximityMeeting(): WorkadventureProximityMeetingCommands {\n        return proximityMeeting;\n    }\n}\n\nexport type Position = {\n    x: number;\n    y: number;\n};\n\nexport default new WorkadventurePlayerCommands();\n","import { IframeApiContribution, queryWorkadventure } from \"./IframeApiContribution\";\nimport { Observable, Subject } from \"rxjs\";\nimport { apiCallback } from \"./registeredCallbacks\";\nimport { RemotePlayer, RemotePlayerInterface, RemotePlayerMoved, remotePlayers } from \"./Players/RemotePlayer\";\nimport { AddPlayerEvent } from \"../Events/AddPlayerEvent\";\n\nexport interface PlayerVariableChanged {\n    player: RemotePlayer;\n    value: unknown;\n}\n\nconst sharedPlayersVariableStream = new Map<string, Subject<PlayerVariableChanged>>();\nconst _newRemotePlayersStream = new Subject<RemotePlayer>();\nconst newRemotePlayersStream = _newRemotePlayersStream.asObservable();\nconst _removeRemotePlayersStream = new Subject<RemotePlayer>();\nconst removeRemotePlayersStream = _removeRemotePlayersStream.asObservable();\nconst _playersMovedStream = new Subject<RemotePlayerMoved>();\nconst playersMovedStream = _playersMovedStream.asObservable();\n\nexport class WorkadventurePlayersCommands extends IframeApiContribution<WorkadventurePlayersCommands> {\n    private trackingPlayers = false;\n    private trackingMovement = false;\n\n    callbacks = [\n        apiCallback({\n            type: \"setSharedPlayerVariable\",\n            callback: (payloadData) => {\n                const remotePlayer = remotePlayers.get(payloadData.playerId);\n                if (remotePlayer === undefined) {\n                    console.warn(\n                        \"Received a variable message for a player that isn't connected. Ignoring.\",\n                        payloadData\n                    );\n                    return;\n                }\n\n                const stream = sharedPlayersVariableStream.get(payloadData.key);\n                if (stream) {\n                    stream.next({\n                        player: remotePlayer,\n                        value: payloadData.value,\n                    });\n                }\n                remotePlayer.setVariable(payloadData.key, payloadData.value);\n            },\n        }),\n        apiCallback({\n            type: \"addRemotePlayer\",\n            callback: (payloadData) => {\n                this.registerRemotePlayer(payloadData);\n            },\n        }),\n        apiCallback({\n            type: \"removeRemotePlayer\",\n            callback: (userId) => {\n                const remotePlayer = remotePlayers.get(userId);\n                if (remotePlayer === undefined) {\n                    console.warn(\"Could not find remote player to delete: \", userId);\n                } else {\n                    remotePlayers.delete(userId);\n                    _removeRemotePlayersStream.next(remotePlayer);\n                    remotePlayer.destroy();\n                }\n            },\n        }),\n        apiCallback({\n            type: \"remotePlayerChanged\",\n            callback: (event) => {\n                const remotePlayer = remotePlayers.get(event.playerId);\n                if (remotePlayer === undefined) {\n                    console.warn(\"Could not find remote player with ID : \", event.playerId);\n                    return;\n                }\n\n                if (event.position) {\n                    const oldPosition = remotePlayer.position;\n                    remotePlayer.position = event.position;\n\n                    _playersMovedStream.next({\n                        player: remotePlayer,\n                        newPosition: event.position,\n                        oldPosition,\n                    });\n                }\n                // TODO: listen to other status changes (like outlineColor, availability, etc...)\n            },\n        }),\n    ];\n\n    private registerRemotePlayer(event: AddPlayerEvent): void {\n        const remotePlayer = new RemotePlayer(event);\n        remotePlayers.set(event.playerId, remotePlayer);\n        _newRemotePlayersStream.next(remotePlayer);\n    }\n\n    /**\n     * Start the tracking players. You need to call this method before being able to listen to players positions.\n     * {@link https://workadventu.re/map-building/api-players.md#enabling-players-tracking | Website documentation}\n     *\n     * ```ts\n     * await WA.players.configureTracking({\n     *     players: true, // Required to use \"onPlayerEnters\", \"onPlayerLeaves\", \"list\" and \"get\"\n     *     movement: true, // Required to get the player position and use \"onPlayerMoves\"\n     * })\n     * ```\n     *\n     * @param options\n     */\n    public async configureTracking(options?: { players?: boolean; movement?: boolean }): Promise<void> {\n        const trackingPlayers = options?.players ?? true;\n        const trackingMovement = options?.movement ?? true;\n        if (trackingPlayers === this.trackingPlayers && trackingMovement === this.trackingMovement) {\n            return;\n        }\n        this.trackingPlayers = trackingPlayers;\n        this.trackingMovement = trackingMovement;\n        const remotePlayersData = await queryWorkadventure({\n            type: \"enablePlayersTracking\",\n            data: {\n                players: this.trackingPlayers,\n                movement: this.trackingMovement,\n            },\n        });\n\n        if (trackingPlayers) {\n            for (const remotePlayerEvent of remotePlayersData) {\n                this.registerRemotePlayer(remotePlayerEvent);\n            }\n        }\n    }\n\n    /**\n     * Listens to a given variable change on all available players.\n     * {@link https://workadventu.re/map-building/api-players.md#listen-to-a-remote-player-variable-changes | Website documentation}\n     *\n     * ```ts\n     * WA.players.onVariableChange(\"score\").subscribe({ player, value } => {\n     *     console.log(\"Score for player\", player.name, \"has been updated to\", value);\n     * });\n     * ```\n     *\n     * If you are looking to listen for variable changes of only one player, look at `RemotePlayer.onVariableChange` instead.\n     */\n    public onVariableChange(variableName: string): Observable<PlayerVariableChanged> {\n        let stream = sharedPlayersVariableStream.get(variableName);\n        if (!stream) {\n            stream = new Subject<PlayerVariableChanged>();\n            sharedPlayersVariableStream.set(variableName, stream);\n        }\n        return stream.asObservable();\n    }\n\n    /**\n     * Listens to new remote players.\n     * These will be triggered when a remote player is entering our \"zone\" (zone ~= viewport)\n     * This means this will NOT be triggered when a remote player enters the map, but when the remote player is\n     * getting visible.\n     * {@link https://workadventu.re/map-building/api-players.md#tracking-players-in-real-time | Website documentation}\n     *\n     * Usage:\n     *\n     * ```\n     * WA.players.onPlayerEnters.subscribe((remotePlayer) => { doStuff(); });\n     * ```\n     */\n    public get onPlayerEnters(): Observable<RemotePlayerInterface> {\n        if (!this.trackingPlayers) {\n            throw new Error(\n                \"Cannot call WA.players.onPlayerEnters(). You forgot to call WA.players.configureTracking() first.\"\n            );\n        }\n        return newRemotePlayersStream;\n    }\n\n    /**\n     * Listens to remote players leaving.\n     * These will be triggered when a remote player is leaving our \"zone\" (zone ~= viewport)\n     * This means this will be triggered when a remote player leaves the map, but ALSO when the remote player is\n     * walking away and is no longer visible.\n     * {@link https://workadventu.re/map-building/api-players.md#tracking-players-in-real-time | Website documentation}\n     *\n     * Usage:\n     *\n     * ```\n     * WA.players.onPlayerLeaves.subscribe((remotePlayer) => { doCleanupStuff(); });\n     * ```\n     */\n    public get onPlayerLeaves(): Observable<RemotePlayerInterface> {\n        if (!this.trackingPlayers) {\n            throw new Error(\n                \"Cannot call WA.players.onPlayerLeaves(). You forgot to call WA.players.configureTracking() first.\"\n            );\n        }\n        return removeRemotePlayersStream;\n    }\n\n    /**\n     * Listens to movement from all players who are in our zone (zone ~= viewport)\n     * This means this may NOT be triggered when a remote player moves but is far away from us.\n     * {@link https://workadventu.re/map-building/api-players.md#tracking-players-movement | Website documentation}\n     *\n     * Usage:\n     *\n     * ```\n     * WA.players.onPlayerMoves.subscribe(({ player, newPosition, oldPosition }) => { doStuff(); });\n     * ```\n     */\n    public get onPlayerMoves(): Observable<RemotePlayerMoved> {\n        if (!this.trackingMovement) {\n            throw new Error(\n                \"Cannot call WA.players.onPlayerMoves(). You forgot to call WA.players.configureTracking() first.\"\n            );\n        }\n        return playersMovedStream;\n    }\n\n    /**\n     * Returns a RemotePlayer by its id.\n     * {@link https://workadventu.re/map-building/api-players.md#getting-a-remote-player-by-id | Website documentation}\n     *\n     * Note: if the same user is connected twice, it will be considered as 2 different players with 2 different IDs.\n     */\n    public get(id: number): RemotePlayerInterface | undefined {\n        return remotePlayers.get(id);\n    }\n\n    /**\n     * Returns the list of all nearby remote players.\n     * The list only contains the players in the same zone as the current player (where zone ~= viewport).\n     * {@link https://workadventu.re/map-building/api-players.md#getting-a-list-of-players-around-me | Website documentation}\n     */\n    public list(): IterableIterator<RemotePlayerInterface> {\n        return remotePlayers.values();\n    }\n}\n\nexport default new WorkadventurePlayersCommands();\n","import { IframeApiContribution, sendToWorkadventure } from \"./IframeApiContribution\";\nimport { Observable, Subject } from \"rxjs\";\nimport type { WasCameraUpdatedEvent } from \"../Events/WasCameraUpdatedEvent\";\nimport { apiCallback } from \"./registeredCallbacks\";\n\nconst moveStream = new Subject<WasCameraUpdatedEvent>();\n\nexport class WorkAdventureCameraCommands extends IframeApiContribution<WorkAdventureCameraCommands> {\n    callbacks = [\n        apiCallback({\n            type: \"wasCameraUpdated\",\n            callback: (payloadData) => {\n                moveStream.next(payloadData);\n            },\n        }),\n    ];\n\n    /**\n     * Set camera to follow the player.\n     * {@link https://workadventu.re/map-building/api-camera.md#start-following-player | Website documentation}\n     *\n     * @param smooth Smooth transition\n     */\n    public followPlayer(smooth = false): void {\n        sendToWorkadventure({\n            type: \"cameraFollowPlayer\",\n            data: { smooth },\n        });\n    }\n\n    /**\n     * Set camera to look at given spot. Setting width and height will adjust zoom.\n     * Set lock to true to lock camera in this position.\n     * Set smooth to true for smooth transition.\n     * {@link https://workadventu.re/map-building/api-camera.md#set-spot-for-camera-to-look-at | Website documentation}\n     *\n     * @param {number} x Horizontal position\n     * @param {number} y Vertical position\n     * @param {number} width Width size\n     * @param {number} height Height size\n     * @param {boolean} lock Zoom locked\n     * @param {boolean} smooth Smooth transition\n     */\n    set(x: number, y: number, width?: number, height?: number, lock = false, smooth = false): void {\n        sendToWorkadventure({\n            type: \"cameraSet\",\n            data: { x, y, width, height, lock, smooth },\n        });\n    }\n\n    /**\n     * Listens to updates of the camera viewport.\n     * It will trigger for every update of the camera's properties (position or scale for instance).\n     * {@link https://workadventu.re/map-building/api-camera.md#listen-to-camera-updates | Website documentation}\n     *\n     * @returns {Subject<WasCameraUpdatedEvent>} An observable firing event when the camera is updated\n     */\n    onCameraUpdate(): Observable<WasCameraUpdatedEvent> {\n        sendToWorkadventure({\n            type: \"onCameraUpdate\",\n            data: undefined,\n        });\n        return moveStream.asObservable();\n    }\n}\n\nexport default new WorkAdventureCameraCommands();\n","import { registeredCallbacks } from \"./front/api/Iframe/registeredCallbacks\";\nimport {\n    isIframeAnswerEvent,\n    isIframeErrorAnswerEvent,\n    isIframeResponseEvent,\n    isLookingLikeIframeEventWrapper\n} from \"./front/api/Events/IframeEvent\";\nimport type { TypedMessageEvent } from \"./front/api/Events/IframeEvent\";\nimport chat from \"./front/api/Iframe/chat\";\nimport nav, { CoWebsite } from \"./front/api/Iframe/nav\";\nimport controls from \"./front/api/Iframe/controls\";\nimport ui from \"./front/api/Iframe/ui\";\nimport sound from \"./front/api/Iframe/sound\";\nimport room, { setMapURL, setRoomId } from \"./front/api/Iframe/room\";\nimport { createState } from \"./front/api/Iframe/state\";\nimport player, { setPlayerName, setPlayerLanguage, setTags, setUserRoomToken, setUuid } from \"./front/api/Iframe/player\";\nimport players from \"./front/api/Iframe/players\";\nimport type { ButtonDescriptor } from \"./front/api/Iframe/Ui/ButtonDescriptor\";\nimport type { Popup } from \"./front/api/Iframe/Ui/Popup\";\nimport type { Sound } from \"./front/api/Iframe/Sound/Sound\";\nimport { answerPromises, queryWorkadventure } from \"./front/api/Iframe/IframeApiContribution\";\nimport camera from \"./front/api/Iframe/camera\";\nexport type { UIWebsite } from \"./front/api/Iframe/Ui/UIWebsite\";\nexport type { Menu } from \"./front/api/Iframe/Ui/Menu\";\nexport type { ActionMessage } from \"./front/api/Iframe/Ui/ActionMessage\";\nexport type { EmbeddedWebsite } from \"./front/api/Iframe/Room/EmbeddedWebsite\";\nexport type { Area } from \"./front/api/Iframe/Area/Area\";\nexport type { ActionsMenuAction } from \"./front/api/Iframe/ui\";\n\nconst globalState = createState();\n\nlet _metadata: unknown | undefined;\n\nconst setMetadata = (data: unknown | undefined) => {\n    _metadata = data;\n};\n\n// Notify WorkAdventure that we are ready to receive data\nconst initPromise = queryWorkadventure({\n    type: \"getState\",\n    data: undefined,\n}).then((gameState) => {\n    setPlayerName(gameState.nickname);\n    setPlayerLanguage(gameState.language);\n    setRoomId(gameState.roomId);\n    setMapURL(gameState.mapUrl);\n    setTags(gameState.tags);\n    setUuid(gameState.uuid);\n    setUserRoomToken(gameState.userRoomToken);\n    setMetadata(gameState.metadata);\n    globalState.initVariables(gameState.variables as Map<string, unknown>);\n    player.state.initVariables(gameState.playerVariables as Map<string, unknown>);\n});\n\nconst wa = {\n    ui,\n    nav,\n    controls,\n    chat,\n    sound,\n    room,\n    player,\n    players,\n    camera,\n    state: globalState,\n\n    /**\n     * When your script / iFrame loads WorkAdventure, it takes a few milliseconds for your\n     * script / iFrame to exchange data with WorkAdventure. You should wait for the WorkAdventure\n     * API to be fully ready using the WA.onInit() method.\n     * {@link https://workadventu.re/map-building/api-start.md#waiting-for-workadventure-api-to-be-available | Website documentation}\n     *\n     * Some properties (like the current username, or the room ID) are not available until WA.onInit has completed.\n     *\n     * @returns {void}\n     */\n    onInit(): Promise<void> {\n        return initPromise;\n    },\n\n    /**\n     * The metadata sent by the administration website.\n     * Important: You need to wait for the end of the initialization before accessing.\n     * {@link https://workadventu.re/map-building/api-metadata.md | Website documentation}\n     *\n     * @returns {unknown|undefined} Metadata\n     */\n    get metadata(): unknown | undefined {\n        return _metadata;\n    },\n\n    // All methods below are deprecated and should not be used anymore.\n    // They are kept here for backward compatibility.\n\n    /**\n     * @deprecated Use WA.chat.sendChatMessage instead\n     */\n    sendChatMessage(message: string, author: string): void {\n        console.warn(\"Method WA.sendChatMessage is deprecated. Please use WA.chat.sendChatMessage instead\");\n        chat.sendChatMessage(message, author);\n    },\n\n    /**\n     * @deprecated Use WA.chat.disablePlayerControls instead\n     */\n    disablePlayerControls(): void {\n        console.warn(\n            \"Method WA.disablePlayerControls is deprecated. Please use WA.controls.disablePlayerControls instead\"\n        );\n        controls.disablePlayerControls();\n    },\n\n    /**\n     * @deprecated Use WA.controls.restorePlayerControls instead\n     */\n    restorePlayerControls(): void {\n        console.warn(\n            \"Method WA.restorePlayerControls is deprecated. Please use WA.controls.restorePlayerControls instead\"\n        );\n        controls.restorePlayerControls();\n    },\n\n    /**\n     * @deprecated Use WA.ui.displayBubble instead\n     */\n    displayBubble(): void {\n        console.warn(\"Method WA.displayBubble is deprecated. Please use WA.ui.displayBubble instead\");\n        ui.displayBubble();\n    },\n\n    /**\n     * @deprecated Use WA.ui.removeBubble instead\n     */\n    removeBubble(): void {\n        console.warn(\"Method WA.removeBubble is deprecated. Please use WA.ui.removeBubble instead\");\n        ui.removeBubble();\n    },\n\n    /**\n     * @deprecated Use WA.nav.openTab instead\n     */\n    openTab(url: string): void {\n        console.warn(\"Method WA.openTab is deprecated. Please use WA.nav.openTab instead\");\n        nav.openTab(url);\n    },\n\n    /**\n     * @deprecated Use WA.sound.loadSound instead\n     */\n    loadSound(url: string): Sound {\n        console.warn(\"Method WA.loadSound is deprecated. Please use WA.sound.loadSound instead\");\n        return sound.loadSound(url);\n    },\n\n    /**\n     * @deprecated Use WA.nav.goToPage instead\n     */\n    goToPage(url: string): void {\n        console.warn(\"Method WA.goToPage is deprecated. Please use WA.nav.goToPage instead\");\n        nav.goToPage(url);\n    },\n\n    /**\n     * @deprecated Use WA.nav.goToRoom instead\n     */\n    goToRoom(url: string): void {\n        console.warn(\"Method WA.goToRoom is deprecated. Please use WA.nav.goToRoom instead\");\n        nav.goToRoom(url);\n    },\n\n    /**\n     * @deprecated Use WA.nav.openCoWebSite instead\n     */\n    openCoWebSite(url: string, allowApi = false, allowPolicy = \"\"): Promise<CoWebsite> {\n        console.warn(\"Method WA.openCoWebSite is deprecated. Please use WA.nav.openCoWebSite instead\");\n        return nav.openCoWebSite(url, allowApi, allowPolicy);\n    },\n\n    /**\n     * @deprecated Use WA.nav.closeCoWebSite instead\n     */\n    closeCoWebSite(): Promise<void> {\n        console.warn(\"Method WA.closeCoWebSite is deprecated. Please use WA.nav.closeCoWebSite instead\");\n        return nav.closeCoWebSite();\n    },\n\n    /**\n     * @deprecated Use WA.ui.openPopup instead\n     */\n    openPopup(targetObject: string, message: string, buttons: ButtonDescriptor[]): Popup {\n        console.warn(\"Method WA.openPopup is deprecated. Please use WA.ui.openPopup instead\");\n        return ui.openPopup(targetObject, message, buttons);\n    },\n    /**\n     * @deprecated Use WA.chat.onChatMessage instead\n     */\n    onChatMessage(callback: (message: string) => void): void {\n        console.warn(\"Method WA.onChatMessage is deprecated. Please use WA.chat.onChatMessage instead\");\n        chat.onChatMessage(callback);\n    },\n    /**\n     * @deprecated Use WA.room.onEnterZone instead\n     */\n    onEnterZone(name: string, callback: () => void): void {\n        console.warn(\"Method WA.onEnterZone is deprecated. Please use WA.room.onEnterZone instead\");\n        room.onEnterZone(name, callback);\n    },\n    /**\n     * @deprecated Use WA.room.onLeaveZone instead\n     */\n    onLeaveZone(name: string, callback: () => void): void {\n        console.warn(\"Method WA.onLeaveZone is deprecated. Please use WA.room.onLeaveZone instead\");\n        room.onLeaveZone(name, callback);\n    },\n};\n\nexport type WorkAdventureApi = typeof wa;\nexport type { Sound, Popup, ButtonDescriptor, CoWebsite };\n\ndeclare global {\n    interface Window {\n        WA: WorkAdventureApi;\n    }\n    let WA: WorkAdventureApi;\n}\n\nwindow.WA = wa;\n\nwindow.addEventListener(\"message\", (message: TypedMessageEvent<unknown>) => {\n    if (message.source !== window.parent) {\n        return; // Skip message in this event listener\n    }\n    const payload = message.data;\n\n    //console.debug(payload);\n\n    const safeParseErrorAnswerEvent = isIframeErrorAnswerEvent.safeParse(payload);\n    if (safeParseErrorAnswerEvent.success) {\n        const payloadData = safeParseErrorAnswerEvent.data;\n        const queryId = payloadData.id;\n        const payloadError = payloadData.error;\n\n        const resolver = answerPromises.get(queryId);\n        if (resolver === undefined) {\n            throw new Error(\"In Iframe API, got an error answer for a question that we have no track of.\");\n        }\n        resolver.reject(new Error(payloadError));\n\n        answerPromises.delete(queryId);\n    } else if (isIframeAnswerEvent(payload)) {\n        const queryId = payload.id;\n        const payloadData = payload.data;\n\n        const resolver = answerPromises.get(queryId);\n        if (resolver === undefined) {\n            throw new Error(\"In Iframe API, got an answer for a question that we have no track of.\");\n        }\n        resolver.resolve(payloadData);\n\n        answerPromises.delete(queryId);\n    } else {\n        const safeParsedPayload = isIframeResponseEvent.safeParse(payload);\n        if (safeParsedPayload.success) {\n            const payloadData = safeParsedPayload.data;\n\n            const callbacks = registeredCallbacks[payloadData.type];\n            if (callbacks === undefined) {\n                throw new Error('Missing event handler for event of type \"' + payloadData.type + \"'\");\n            }\n            for (const callback of callbacks) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                callback?.(payloadData.data);\n            }\n        } else {\n            const safeLooksLikeResponse = isLookingLikeIframeEventWrapper.safeParse(payload);\n            if (safeLooksLikeResponse.success) {\n                throw new Error(\n                    \"Could not parse message received from WorkAdventure. Message:\" + JSON.stringify(payload)\n                );\n            }\n        }\n    }\n});\n"],"names":["util","val","assertIs","_arg","assertNever","_x","items","obj","item","validKeys","k","filtered","e","object","keys","key","arr","checker","joinValues","array","separator","_","value","ZodParsedType","getParsedType","data","ZodIssueCode","quotelessJson","ZodError","issues","sub","subs","actualProto","_mapper","mapper","issue","fieldErrors","processError","error","curr","i","el","formErrors","errorMap","_ctx","message","overrideErrorMap","setErrorMap","map","getErrorMap","makeIssue","params","path","errorMaps","issueData","fullPath","fullIssue","errorMessage","maps","m","EMPTY_PATH","addIssueToContext","ctx","x","ParseStatus","status","results","arrayValue","s","INVALID","pairs","syncPairs","pair","finalObject","DIRTY","OK","isAborted","isDirty","isValid","isAsync","errorUtil","ParseInputLazyPath","parent","handleResult","result","processCreateParams","invalid_type_error","required_error","description","iss","ZodType","def","input","_a","maybeAsyncResult","check","getIssueProperties","setError","refinementData","refinement","ZodEffects","ZodFirstPartyTypeKind","ZodOptional","ZodNullable","ZodArray","ZodPromise","option","ZodUnion","incoming","ZodIntersection","transform","defaultValueFunc","ZodDefault","ZodBranded","This","cuidRegex","uuidRegex","emailRegex","ZodString","regex","validation","minLength","maxLength","len","ch","min","max","floatSafeRemainder","step","valDecCount","stepDecCount","decCount","valInt","stepInt","ZodNumber","kind","inclusive","ZodBigInt","ZodBoolean","ZodDate","minDate","maxDate","ZodUndefined","ZodNull","ZodAny","ZodUnknown","ZodNever","ZodVoid","schema","objectUtil","first","second","AugmentFactory","augmentation","ZodObject","deepPartialify","newShape","fieldSchema","ZodTuple","shape","shapeKeys","extraKeys","keyValidator","unknownKeys","catchall","_b","_c","_d","defaultError","merging","index","mask","newField","createZodEnum","options","handleResults","unionErrors","childCtx","dirty","types","ZodDiscriminatedUnion","discriminator","discriminatorValue","type","mergeValues","a","b","aType","bType","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","handleParsed","parsedLeft","parsedRight","merged","left","right","itemIndex","rest","schemas","ZodRecord","keyType","valueType","third","ZodMap","finalMap","ZodSet","finalizeSet","elements","parsedSet","element","minSize","maxSize","size","ZodFunction","makeArgsIssue","args","makeReturnsIssue","returns","fn","parsedArgs","parsedReturns","returnType","func","ZodLazy","getter","ZodLiteral","values","ZodEnum","expectedValues","enumValues","ZodNativeEnum","nativeEnumValues","promisified","effect","processed","checkCtx","arg","executeRefinement","acc","inner","base","preprocess","ZodNaN","BRAND","custom","fatal","p","p2","late","instanceOfType","cls","stringType","numberType","nanType","bigIntType","booleanType","dateType","undefinedType","nullType","anyType","unknownType","neverType","voidType","arrayType","objectType","strictObjectType","unionType","discriminatedUnionType","intersectionType","tupleType","recordType","mapType","setType","functionType","lazyType","literalType","enumType","nativeEnumType","promiseType","effectsType","optionalType","nullableType","preprocessType","ostring","onumber","oboolean","NEVER","mod","isChatEvent","z","ChatMessageTypes","ChatMessageTypes2","isChatMessageTypes","isChatMessage","isClosePopupEvent","isGoToPageEvent","isLoadPageEvent","isOpenCoWebsiteEvent","isCoWebsite","isButtonDescriptor","isOpenPopupEvent","isOpenTabEvent","isLayerEvent","isSetPropertyEvent","isLoadSoundEvent","isSoundConfig","isPlaySoundEvent","isStopSoundEvent","isSetTilesEvent","isGameStateEvent","isMapDataEvent","isSetVariableEvent","isRectangle","isEmbeddedWebsiteEvent","isCreateEmbeddedWebsiteEvent","isLoadTilesetEvent","triggerActionMessage","removeActionMessage","isActionMessageType","isTriggerActionMessageEvent","isMessageReferenceEvent","isUnregisterMenuEvent","isMenuRegisterOptions","isMenuRegisterEvent","isPlayerPosition","isCameraSetEvent","isCameraFollowPlayerEvent","isColorEvent","isMovePlayerToEventConfig","isMovePlayerToEventAnswer","isAddActionsMenuKeyToRemotePlayerEvent","isRemoveActionsMenuKeyFromRemotePlayerEvent","isSetAreaPropertyEvent","regexUnit","isUIWebsiteCSSValue","isUIWebsiteMargin","isViewportPositionVertical","isViewportPositionHorizontal","isUIWebsitePosition","isUIWebsiteSize","isCreateUIWebsiteEvent","isModifyUIWebsiteEvent","isUIWebsite","isAreaEvent","isCreateAreaEvent","isUserInputChatEvent","isEnterLeaveEvent","isChangeLayerEvent","isChangeAreaEvent","isButtonClickedEvent","isActionsMenuActionClickedEvent","isHasPlayerMovedEvent","isWasCameraUpdatedEvent","isAskPositionEvent","isLeaveMucEvent","isJoinMucEvent","isMenuItemClickedEvent","isAddPlayerEvent","isRemotePlayerChangedEvent","isJoinProximityMeetingEvent","isParticipantProximityMeetingEvent","isSetSharedPlayerVariableEvent","isEnablePlayersTrackingEvent","isSetPlayerVariableEvent","isSettingsEvent","isChatVisibilityEvent","isNotificationEvent","isShowBusinessCardEvent","isModalEvent","isIframeResponseEvent","isLookingLikeIframeEventWrapper","isIframeAnswerEvent","event","isIframeErrorAnswerEvent","registeredCallbacks","apiCallback","callbackData","sendToWorkadventure","content","queryNumber","answerPromises","queryWorkadventure","resolve","reject","IframeApiContribution","extendStatics","d","__extends","__","__values","o","__read","n","r","ar","__spreadArray","to","from","pack","l","isFunction","createErrorClass","createImpl","_super","instance","ctorFunc","UnsubscriptionError","errors","err","arrRemove","Subscription","initialTeardown","e_1","e_2","_parentage","_parentage_1","_parentage_1_1","parent_1","e_1_1","initialFinalizer","_finalizers","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","empty","EMPTY_SUBSCRIPTION","isSubscription","config","timeoutProvider","handler","timeout","_i","delegate","handle","reportUnhandledError","noop","context","errorContext","cb","isRoot","errorThrown","Subscriber","destination","_this","EMPTY_OBSERVER","next","complete","SafeSubscriber","_bind","bind","thisArg","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","defaultErrorHandler","observable","identity","pipeFromArray","fns","prev","Observable","subscribe","operator","subscriber","isSubscriber","source","sink","promiseCtor","getPromiseCtor","Symbol_observable","operations","isObserver","ObjectUnsubscribedError","Subject","subject","AnonymousSubject","observer","observers","hasError","isStopped","thrownError","chatStream","WorkadventureChatCommands","__publicField","author","callback","chat","CoWebsite","id","WorkadventureNavigationCommands","url","allowApi","allowPolicy","widthPercent","position","closable","lazy","cowebsiteEvent","nav","WorkadventureControlsCommands","controls","Popup","uuidv4","c","ActionMessage","actionMessageOptions","onRemove","Menu","menuName","UIWebsitePositionInternal","uiWebsite","vertical","horizontal","UIWebsiteSizeInternal","height","width","UIWebsiteMarginInternal","margin","top","bottom","UIWebsite","visible","UIWebsiteCommands","createUIWebsite","current","website$1","remotePlayers","RemotePlayer","addPlayerEvent","variableSubjects","variables","target","receiver","_position","name","newAction","ActionsMenuAction","action","WorkadventureModalCommands","modalEvent","modal","popupId","popups","popupCallbacks","menus","menuCallbacks","actionMessages","remotePlayer","WorkAdventureUiCommands","payloadData","popup","actionMessage","targetObject","buttons","btnMap","button","commandDescriptor","menu","actionKey","website","ui","Sound","WorkadventureSoundCommands","sound","EmbeddedWebsite","y","scale","WorkadventureRoomWebsiteCommands","objectName","websiteEvent","createEmbeddedWebsiteEvent","ITiledMapChunk","zod_1","require$$0","ITiledMapFrame","ITiledMapGrid","ITiledMapProperty","literalSchema","jsonSchema","ITiledMapStringProperty","ITiledMapIntProperty","ITiledMapFloatProperty","ITiledMapBoolProperty","ITiledMapClassProperty","ITiledMapImageLayer","ITiledMapProperty_1","require$$1","ITiledMapPoint","ITiledMapText","ITiledMapObject","ITiledMapPoint_1","require$$2","ITiledMapText_1","require$$3","ITiledMapTileLayer","ITiledMapChunk_1","ITiledMapGroupLayer","ITiledMapLayer_1","ITiledMapObjectLayer","ITiledMapObject_1","ITiledMapLayer","ITiledMapTileLayer_1","ITiledMapGroupLayer_1","ITiledMapObjectLayer_1","ITiledMapImageLayer_1","require$$4","ITiledMapOffset","ITiledMapTerrain","ITiledMapTile","ITiledMapFrame_1","ITiledMapTerrain_1","ITiledMapTransformations","ITiledMapWangColor","ITiledMapWangTile","ITiledMapWangSet","ITiledMapWangColor_1","ITiledMapWangTile_1","ITiledMapTileset","ITiledMapGrid_1","ITiledMapOffset_1","ITiledMapTile_1","require$$5","ITiledMapTransformations_1","require$$6","ITiledMapWangSet_1","require$$7","ITiledMap","ITiledMapTileset_1","utility","upgradeMapToNewest","useCopy","newMap","layer","updateLayerFieldValue","deeperLayer","__createBinding","this","k2","__exportStar","exports","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","require$$17","require$$18","require$$19","require$$20","utility_1","require$$21","Area","propertyName","propertyValue","enterAreaStreams","leaveAreaStreams","WorkadventureAreaCommands","createAreaEvent","areaEvent","areaName","area","enterStreams","leaveStreams","enterLayerStreams","leaveLayerStreams","roomId","setRoomId","mapURL","setMapURL","WorkadventureRoomCommands","layerName","tiles","room","AbstractWorkadventureStateCommands","_variables","WorkadventureStateCommands","createState","WorkadventurePlayerStateCommands","playerState","joinStream","participantJoinStream","participantLeaveStream","leaveStream","WorkadventureProximityMeetingCommands","user","proximityMeeting","moveStream","playerName","setPlayerName","playerLanguage","setPlayerLanguage","language","tags","setTags","_tags","userRoomToken","setUserRoomToken","token","uuid","setUuid","_uuid","WorkadventurePlayerCommands","speed","red","green","blue","player","sharedPlayersVariableStream","_newRemotePlayersStream","newRemotePlayersStream","_removeRemotePlayersStream","removeRemotePlayersStream","_playersMovedStream","playersMovedStream","WorkadventurePlayersCommands","stream","userId","oldPosition","trackingPlayers","trackingMovement","remotePlayersData","remotePlayerEvent","variableName","players","WorkAdventureCameraCommands","smooth","lock","camera","globalState","_metadata","setMetadata","initPromise","gameState","wa","payload","safeParseErrorAnswerEvent","queryId","payloadError","resolver","safeParsedPayload","callbacks"],"mappings":"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"}